package io.github.wfouche.tulip.report;

/// usr/bin/env jbang "$0" "$@" ; exit $?

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
//JAVA 21
// spotless:on

import java.util.Base64;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBwcmludF9mdW5jdGlvbgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IG9yZy5IZHJIaXN0b2dyYW0uSGlzdG9ncmFtIGFzIEhpc3RvZ3JhbQppbXBvcnQgb3MKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKaW1wb3J0IGphdmEuaW8uUHJpbnRTdHJlYW0gYXMgUHJpbnRTdHJlYW0KaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGFzIEJ5dGVBcnJheU91dHB1dFN0cmVhbQoKIyAvLy8gamJhbmcKIyByZXF1aXJlcy1qeXRob24gPSAiPT0yLjcuNCIKIyByZXF1aXJlcy1qYXZhID0gIj49MjEiCiMgZGVwZW5kZW5jaWVzID0gWwojICAgImNvbS5nb29nbGUuY29kZS5nc29uOmdzb246Mi4xMy4xIiwKIyAgICJvcmcuaGRyaGlzdG9ncmFtOkhkckhpc3RvZ3JhbToyLjIuMiIKIyBdCiMgW3B5dGhvbi1qdm1dCiMgICBkZWJ1ZyA9IGZhbHNlCiMgLy8vCgpzdW1tYXJ5X2h0bWxfMSA9ICcnJzwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgo8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICBkaXYuaGlzdG8gewogICAgICAgICBkaXNwbGF5OiBub25lCiAgICB9Cjwvc3R5bGU+Cgo8IS0tTG9hZCB0aGUgQUpBWCBBUEktLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9qc2FwaSI+PC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CgogICAgaWYgKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYikgewogICAgICAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuCiAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdUaGUgRmlsZSBBUElzIGFyZSBub3QgZnVsbHkgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci4nKTsKICAgIH0KCiAgICAvLyBMb2FkIHRoZSBWaXN1YWxpemF0aW9uIEFQSSBhbmQgdGhlIGNvcmVjaGFydCBwYWNrYWdlLgogICAgZ29vZ2xlLmxvYWQoJ3Zpc3VhbGl6YXRpb24nLCAnMS4wJywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOwoKICAgIC8vIFNldCBhIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBHb29nbGUgVmlzdWFsaXphdGlvbiBBUEkgaXMgbG9hZGVkLgogICAgZ29vZ2xlLnNldE9uTG9hZENhbGxiYWNrKGRyYXdJbml0aWFsQ2hhcnQpOwoKICAgIHZhciBjaGFydERhdGEgPSBudWxsOwogICAgdmFyIGNoYXJ0ID0gbnVsbDsKCiAgICBmdW5jdGlvbiBzZXRDaGFydERhdGEobmFtZXMsIGhpc3RvcykgewogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPCBoaXN0b3MubGVuZ3RoKSB7CiAgICAgICAgICAgIG5hbWVzLnB1c2goJ1Vua25vd24nKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZXJpZXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3Rvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzZXJpZXMgPSBhcHBlbmREYXRhU2VyaWVzKGhpc3Rvc1tpXSwgbmFtZXNbaV0sIHNlcmllcyk7CiAgICAgICAgfQoKICAgICAgICBjaGFydERhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHNlcmllcyk7CiAgICB9CgonJycKCnRleHRfYmxvY2tfMSA9ICcnJwogICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsKICAgICAgICAvLyBDb25uZWN0IHRoZSBjaG9vc2UgZmlsZXMgYnV0dG9uOgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsKCiAgICAgICAgLy8gTG9hZCBzb21lIHN0YXRpYyBleGFtcGxlIGRhdGE6CiAgICAgICAgdmFyIGRhdGExU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMSIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEyU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMiIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEzU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMyIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGhpc3RvcyA9IFtkYXRhM1N0ciwgZGF0YTJTdHIsIGRhdGExU3RyXTsKICAgICAgICB2YXIgbmFtZXMgPSBbJ0EnLCAnQicsICdDJ107CgogICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgIH0KJycnCgpzdW1tYXJ5X2h0bWxfMiA9ICcnJwogICAgdmFyIG1heFBlcmNlbnRpbGUgPSAxMDAwMDAwOwoKICAgIGZ1bmN0aW9uIGRyYXdDaGFydCgpIHsKCiAgICAgICAgdmFyIHRpY2tzID0KICAgICAgICAgICAgICAgIFt7djoxLGY6JzAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAsZjonOTAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAwLGY6Jzk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAsZjonOTkuOSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMCxmOic5OS45OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAsZjonOTkuOTk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwMDAsZjonOTkuOTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMCxmOic5OS45OTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMDAsZjonOTkuOTk5OTk5JSd9XTsKCiAgICAgICAgdmFyIHVuaXRTZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGltZVVuaXRTZWxlY3Rpb24iKTsKICAgICAgICB2YXIgdW5pdFNlbEluZGV4ID0gdW5pdFNlbGVjdGlvbi5zZWxlY3RlZEluZGV4OwogICAgICAgIHZhciB1bml0VGV4dCA9IHVuaXRTZWxlY3Rpb24ub3B0aW9uc1t1bml0U2VsSW5kZXhdLmlubmVySFRNTDsKCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7Ci8vICAgICAgICAgICAgdGl0bGU6ICdQZXJjZW50aWxlIFJlc3BvbnNlIFRpbWUgRGlzdHJpYnV0aW9uJywKICAgICAgICAgICAgaGVpZ2h0OiA0ODAsCi8vICAgICAgICAgICAgaEF4aXM6IHt0aXRsZTogJ1BlcmNlbnRpbGUnLCBtaW5WYWx1ZTogMCwgbG9nU2NhbGU6IHRydWUsIHRpY2tzOnRpY2tzIH0sCiAgICAgICAgICAgIGhBeGlzOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBlcmNlbnRpbGUiLAogICAgICAgICAgICAgICAgbWluVmFsdWU6IDEsIGxvZ1NjYWxlOiB0cnVlLCB0aWNrczp0aWNrcywKICAgICAgICAgICAgICAgIHZpZXdXaW5kb3dNb2RlOidleHBsaWNpdCcsCiAgICAgICAgICAgICAgICB2aWV3V2luZG93OnsKICAgICAgICAgICAgICAgICAgICBtYXg6bWF4UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgICAgICBtaW46MQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB2QXhpczoge3RpdGxlOiAnTGF0ZW5jeSAoJyArIHVuaXRUZXh0ICsgJyknLCBtaW5WYWx1ZTogMCB9LAogICAgICAgICAgICBsZWdlbmQ6IHtwb3NpdGlvbjogJ2JvdHRvbSd9CiAgICAgICAgfTsKCgogICAgICAgIC8vIGFkZCB0b29sdGlwcyB3aXRoIGNvcnJlY3QgcGVyY2VudGlsZSB0ZXh0IHRvIGRhdGE6CiAgICAgICAgdmFyIGNvbHVtbnMgPSBbMF07CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjaGFydERhdGEuZ2V0TnVtYmVyT2ZDb2x1bW5zKCk7IGkrKykgewogICAgICAgICAgICBjb2x1bW5zLnB1c2goaSk7CiAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbHRpcCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjYWxjOiAoZnVuY3Rpb24gKGopIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGR0LCByb3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMC9kdC5nZXRWYWx1ZShyb3csIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LmdldENvbHVtbkxhYmVsKGopICsgJzogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGlsZS50b1ByZWNpc2lvbig3KSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wlXFwnaWxlID0gJyArIGR0LmdldFZhbHVlKHJvdywgaikgKyAnICcgKyB1bml0VGV4dAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKGkpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgdmlldyA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5EYXRhVmlldyhjaGFydERhdGEpOwogICAgICAgIHZpZXcuc2V0Q29sdW1ucyhjb2x1bW5zKTsKCiAgICAgICAgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uTGluZUNoYXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydF9kaXYnKSk7CiAgICAgICAgY2hhcnQuZHJhdyh2aWV3LCBvcHRpb25zKTsKCiAgICAgICAgZ29vZ2xlLnZpc3VhbGl6YXRpb24uZXZlbnRzLmFkZExpc3RlbmVyKGNoYXJ0LCAncmVhZHknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNoYXJ0X2Rpdi5pbm5lckhUTUwgPSAnPGltZyBzcmM9IicgKyBjaGFydC5nZXRJbWFnZVVSSSgpICsgJyI+JzsKICAgICAgICB9KTsKCiAgICB9Cjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBhcHBlbmREYXRhU2VyaWVzKGhpc3RvLCBuYW1lLCBkYXRhU2VyaWVzKSB7CiAgICAgICAgdmFyIHNlcmllczsKICAgICAgICB2YXIgc2VyaWVzQ291bnQ7CiAgICAgICAgaWYgKGRhdGFTZXJpZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgc2VyaWVzID0gWyBbJ1gnLCBuYW1lXSBdOwogICAgICAgICAgICBzZXJpZXNDb3VudCA9IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VyaWVzID0gZGF0YVNlcmllczsKICAgICAgICAgICAgc2VyaWVzWzBdLnB1c2gobmFtZSk7CiAgICAgICAgICAgIHNlcmllc0NvdW50ID0gc2VyaWVzWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICB2YXIgbGluZXMgPSBoaXN0by5zcGxpdCgiXFxuIik7CgogICAgICAgIHZhciBzZXJpZXNJbmRleCA9IDE7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGxpbmUudHJpbSgpLnNwbGl0KC9bIF0rLyk7CgogICAgICAgICAgICBpZiAobGluZVswXSAhPSAnIycgJiYgdmFsdWVzLmxlbmd0aCA9PSA0KSB7CgogICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7CiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodmFsdWVzWzNdKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHgpICYmICFpc05hTih5KSkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzSW5kZXggPj0gc2VyaWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMucHVzaChbeF0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlcmllc1tzZXJpZXNJbmRleF0ubGVuZ3RoIDwgc2VyaWVzQ291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKHkpOwogICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdoaWxlIChzZXJpZXNJbmRleCA8IHNlcmllcy5sZW5ndGgpIHsKICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICBzZXJpZXNJbmRleCsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlcmllczsKICAgIH0KPC9zY3JpcHQ+CjxzY3JpcHQ+CiAgICBmdW5jdGlvbiB0aW1lVW5pdHNTZWxlY3RlZChldnQpIHsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9CgogICAgZnVuY3Rpb24gZG9FeHBvcnQoZXZlbnQpIHsKICAgICAgICBzYXZlU3ZnQXNQbmcoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJyksICdIaXN0b2dyYW0nLCAyLjApOwogICAgICAgIHJldHVybiB7dHlwZWQ6ICcnfTsKICAgIH0KPC9zY3JpcHQ+Cgo8c2NyaXB0PgogICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHsKICAgICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzOyAvLyBGaWxlTGlzdCBvYmplY3QKICAgICAgICB2YXIgZmlsZURpc3BsYXlBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVEaXNwbGF5QXJlYScpOwoKICAgICAgICB2YXIgbmFtZXMgPSBbXTsKICAgICAgICB2YXIgaGlzdG9zID0gW107CgogICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiZmlsZSBzZWxlY3RlZC4uLlxcbiI7CgogICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRmlsZUxpc3QgYW5kIHJlbmRlciBpbWFnZSBmaWxlcyBhcyB0aHVtYm5haWxzLgogICAgICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZXNbaV07IGkrKykgewogICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZnVuY3Rpb24odGhlRmlsZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBoaXN0b3MucHVzaChlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goZXNjYXBlKHRoZUZpbGUubmFtZSkpOwogICAgICAgICAgICAgICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiIFBsb3R0aW5nIGlucHV0IGZyb206ICIgKyBuYW1lcyArICJcXG4iOwogICAgICAgICAgICAgICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICAgICAgICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKGYpOwoKICAgICAgICAgICAgLy8gUmVhZCBpbiB0aGUgaW1hZ2UgZmlsZSBhcyBhIGRhdGEgVVJMLgogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmKTsKICAgICAgICB9CgogICAgfQoKPC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG91dCQgPSB0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiBleHBvcnRzIHx8IHRoaXM7CgogICAgICAgIHZhciBkb2N0eXBlID0gJzw/eG1sIHZlcnNpb249IjEuMCIgc3RhbmRhbG9uZT0ibm8iPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPic7CgogICAgICAgIGZ1bmN0aW9uIGlubGluZUltYWdlcyhjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3ZnIGltYWdlJyk7CiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1hZ2VzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGxlZnQgPT0gMCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgKGZ1bmN0aW9uKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmh0dHAvLnRlc3QoaHJlZikgJiYgIShuZXcgUmVnRXhwKCdeJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0KS50ZXN0KGhyZWYpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVuZGVyIGVtYmVkZGVkIGltYWdlcyBsaW5raW5nIHRvIGV4dGVybmFsIGhvc3RzLiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKTsKICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd4bGluazpocmVmJywgY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykpOwogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KShpbWFnZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdHlsZXMoZG9tKSB7CiAgICAgICAgICAgIHZhciBjc3MgPSAiIjsKICAgICAgICAgICAgdmFyIHNoZWV0cyA9IGRvY3VtZW50LnN0eWxlU2hlZXRzOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHNoZWV0c1tpXS5oYXNPd25Qcm9wZXJ0eSgnY3NzUnVsZXMnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IHNoZWV0c1tpXS5jc3NSdWxlczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbal07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArPSBydWxlLnNlbGVjdG9yVGV4dCArICIgeyAiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgIiB9XFxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwogICAgICAgICAgICBzLmlubmVySFRNTCA9ICI8IVtDREFUQVtcXG4iICsgY3NzICsgIlxcbl1dPiI7CgogICAgICAgICAgICB2YXIgZGVmcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RlZnMnKTsKICAgICAgICAgICAgZGVmcy5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgcmV0dXJuIGRlZnM7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaSA9IGZ1bmN0aW9uKGVsLCBzY2FsZUZhY3RvciwgY2IpIHsKICAgICAgICAgICAgc2NhbGVGYWN0b3IgPSBzY2FsZUZhY3RvciB8fCAxOwoKICAgICAgICAgICAgaW5saW5lSW1hZ2VzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCd3aWR0aCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNsb25lLnN0eWxlLndpZHRoCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IG91dCQuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgICAgICAgICB8fCBjbG9uZS5zdHlsZS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfHwgb3V0JC5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICB2YXIgeG1sbnMgPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy8iOwoKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsICIxLjEiKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnMiLCAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnM6eGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIHdpZHRoICogc2NhbGVGYWN0b3IpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCBoZWlnaHQgKiBzY2FsZUZhY3Rvcik7CiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwICIgKyB3aWR0aCArICIgIiArIGhlaWdodCk7CiAgICAgICAgICAgICAgICBvdXRlci5hcHBlbmRDaGlsZChjbG9uZSk7CgogICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKHN0eWxlcyhjbG9uZSksIGNsb25lLmZpcnN0Q2hpbGQpOwoKICAgICAgICAgICAgICAgIHZhciBzdmcgPSBkb2N0eXBlICsgb3V0ZXIuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcgKyB3aW5kb3cuYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ZnKSkpOwogICAgICAgICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgICAgICAgICAgY2IodXJpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnNhdmVTdmdBc1BuZyA9IGZ1bmN0aW9uKGVsLCBuYW1lLCBzY2FsZUZhY3RvcikgewogICAgICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaShlbCwgc2NhbGVGYWN0b3IsIGZ1bmN0aW9uKHVyaSkgewogICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmk7CiAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pKCk7Cjwvc2NyaXB0PgoKPHN0eWxlPgogICAgLnNsaWRlci13aWR0aDUwMAogICAgewogICAgICAgIHdpZHRoOiA1MDBweDsKICAgIH0KPC9zdHlsZT4KCjwvaGVhZD4KCjxib2R5PgoKX19DSEFSVFNfVEVYVF9fCgo8aDI+UGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+Cgo8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVzIiBuYW1lPSJmaWxlc1tdIiBtdWx0aXBsZSAvPgoKPHByZSBpZD0iZmlsZURpc3BsYXlBcmVhIj5QbGVhc2Ugc2VsZWN0IGZpbGUocykgYWJvdmUuPC9wcmU+Cgo8IS0tRGl2IHRoYXQgd2lsbCBob2xkIHRoZSBjaGFydC0tPgo8ZGl2IGlkPSJjaGFydF9kaXYiPk5vbmUgTG9hZGVkPC9kaXY+CgpMYXRlbmN5IHRpbWUgdW5pdHM6CjxzZWxlY3QgbmFtZT0idW5pdHMiIHNpemU9IjEiIGlkPSJ0aW1lVW5pdFNlbGVjdGlvbiIgb25DaGFuZ2U9InRpbWVVbml0c1NlbGVjdGVkKCkiPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAoc2Vjb25kcykiPnNlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gc2VsZWN0ZWQgdmFsdWU9IkxhdGVuY3kgKG1pbGxpc2Vjb25kcykiPm1pbGxpc2Vjb25kczwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAocXMpIj5taWNyb3NlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IkxhdGVuY3kgKG5hbm9zZWNvbmRzKSI+bmFub3NlY29uZHM8L29wdGlvbj4KPC9zZWxlY3Q+CjxidXR0b24gdHlwZT0nYnV0dG9uJyBvbmNsaWNrPSdkb0V4cG9ydChldmVudCknPkV4cG9ydCBJbWFnZTwvYnV0dG9uPgoKJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7CjxwPgpQZXJjZW50aWxlIHJhbmdlOgoKPGlucHV0IHR5cGU9InJhbmdlIiBjbGFzcz0ic2xpZGVyLXdpZHRoNTAwIgogICAgICAgbWluPSIxIiBtYXg9IjgiIHZhbHVlPSI3IiBzdGVwPSIxIgogICAgICAgd2lkdGg9IjMwMHB4IgogICAgICAgb25jaGFuZ2U9InNob3dWYWx1ZSh0aGlzLnZhbHVlKSIgLz4KPHNwYW4gaWQ9InBlcmNlbnRpbGVSYW5nZSI+OTkuOTk5OTklPC9zcGFuPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBzaG93VmFsdWUobmV3VmFsdWUpIHsKICAgICAgICB2YXIgeCA9IE1hdGgucG93KDEwLCBuZXdWYWx1ZSk7CiAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMCAvIHgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZXJjZW50aWxlUmFuZ2UiKS5pbm5lckhUTUw9cGVyY2VudGlsZSArICIlIjsKICAgICAgICBtYXhQZXJjZW50aWxlID0geDsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9Cjwvc2NyaXB0Pgo8L3A+CicnJwoKc3VtbWFyeV9odG1sX3RhYmxlXzEgPSAnJycKPHN0eWxlPgp0YWJsZSwgdGgsIHRkIHsKICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBmb250LXNpemU6MTZweDsgdGV4dC1hbGlnbjogY2VudGVyOwp9Cm1hcmsgewogIGJhY2tncm91bmQtY29sb3I6IExpZ2h0R3JheTsKICBjb2xvcjogYmxhY2s7Cn0KPC9zdHlsZT4KCjxoMj5QZXJjZW50aWxlIFJlc3BvbnNlIFRpbWUgRGlzdHJpYnV0aW9uPC9oMj4KJycnCgpzdW1tYXJ5X2h0bWxfMyA9ICcnJzwvYm9keT4KPC9odG1sPgonJycKCiMgPGgyPjxhIGhyZWY9Imh0dHBzOi8vd2ZvdWNoZS5naXRodWIuaW8vVHVsaXAtZG9jcyI+X19ERVNDMV9fPC9hPiAvIF9fREVTQzJfXzwvaDI+CiMgPGgyPl9fREVTQzFfXyAvIF9fREVTQzJfXzwvaDI+CgpoZWFkZXIgPSAnJyc8IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgoKPHN0eWxlPgp0YWJsZSwgdGgsIHRkIHsKICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBmb250LXNpemU6MTZweDsgdGV4dC1hbGlnbjogY2VudGVyOwp9CnRoOm50aC1jaGlsZChuKzE0KSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTVFNEUyOwp9CnRkOm50aC1jaGlsZChuKzE0KSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRTVFNEUyOwp9Cjwvc3R5bGU+Cgo8Ym9keT4KCjxoMj48YSBocmVmPSJodHRwczovL3dmb3VjaGUuZ2l0aHViLmlvL1R1bGlwLWRvY3MiPl9fREVTQzFfXzwvYT4gLyBfX0RFU0MyX188L2gyPgoKPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlIj4KICA8dHI+CiAgICA8dGg+QmVuY2htYXJrPC90aD4KICAgIDx0aD5SdW4gSWQ8L3RoPgogICAgPHRoPiNOPC90aD4KICAgIDx0aD4jRjwvdGg+CiAgICA8dGg+RHVyYXRpb248L3RoPgogICAgPHRoPkFwczwvdGg+CiAgICA8dGg+QXZnX1J0PC90aD4KICAgIDx0aD5TdGRfRGV2PC90aD4KICAgIDx0aD5NaW5fUnQ8L3RoPgogICAgPHRoPnA5MF9SdDwvdGg+CiAgICA8dGg+cDk5X1J0PC90aD4KICAgIDx0aD5NYXhfUnQ8L3RoPgogICAgPHRoPk1heF9SdHQ8L3RoPgogICAgPHRoPkFRUzwvdGg+CiAgICA8dGg+TVFTPC90aD4KICAgIDx0aD5BV1Q8L3RoPgogICAgPHRoPk1XVDwvdGg+CiAgICA8dGg+Q1BVX1Q8L3RoPgogICAgPHRoPkNQVTwvdGg+CiAgICA8dGg+TUVNPC90aD4KICA8L3RyPgonJycKCmJlbmNobWFya19jb2x1bW5zID0gJycnCiAgPHRyPgogICAgPHRoPkJlbmNobWFyazwvdGg+CiAgICA8dGg+UnVuIElkPC90aD4KICAgIDx0aD4jTjwvdGg+CiAgICA8dGg+I0Y8L3RoPgogICAgPHRoPkR1cmF0aW9uPC90aD4KICAgIDx0aD5BcHM8L3RoPgogICAgPHRoPkF2Z19SdDwvdGg+CiAgICA8dGg+U3RkX0RldjwvdGg+CiAgICA8dGg+TWluX1J0PC90aD4KICAgIDx0aD5wOTBfUnQ8L3RoPgogICAgPHRoPnA5OV9SdDwvdGg+CiAgICA8dGg+TWF4X1J0PC90aD4KICAgIDx0aD5NYXhfUnR0PC90aD4KICAgIDx0aD5BUVM8L3RoPgogICAgPHRoPk1RUzwvdGg+CiAgICA8dGg+QVdUPC90aD4KICAgIDx0aD5NV1Q8L3RoPgogICAgPHRoPkNQVV9UPC90aD4KICAgIDx0aD5DUFU8L3RoPgogICAgPHRoPk1FTTwvdGg+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfaGVhZGVyID0gJycnCiAgPHRyPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX2VtcHR5X3JvdyA9ICcnJwogIDx0cj4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfZGV0YWlsX3JvdyA9ICcnJwogIDx0cj4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+JWQ8L3RkPgogICAgPHRkPiVkPC90ZD4KICAgIDx0ZD4lZDwvdGQ+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiUuM2Y8L3RkPgogICAgPHRkPiUuM2YgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD4lLjFmPC90ZD4KICAgIDx0ZD4lZDwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiUuMWY8L3RkPgogICAgPHRkPiUuMWY8L3RkPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX3N1bW1hcnlfcm93ID0gJycnCiAgPHRyPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4KICAgIDx0ZD48Yj48dGFnMT4lZDwvdGFnMT48L2I+PC90ZD4KICAgIDx0ZD48Yj4lczwvYj48L3RkPgogICAgPHRkPjxiPjx0YWcyPiUuM2Y8L3RhZzI+PC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4zZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPgogICAgPHRkPjxiPiVzPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPgogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4KICA8L3RyPgonJycKCnRyYWlsZXIgPSAnJycKPC90YWJsZT4KPC9ib2R5Pgo8L2h0bWw+CicnJwoKY2hhcnRzX2h0bWwgPSAnJycKPGgyPkFjdGlvbnMgcGVyIFNlY29uZDwvaDI+CiAgPGRpdiBpZD0ibWFpbiIgc3R5bGU9IndpZHRoOiAxMDAlO2hlaWdodDo0MDBweDsiPjwvZGl2PgogIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9lY2hhcnRzLzYuMC4wL2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICA8c2NyaXB0IHNyYz0iX19KU19UX0NIQVJUX18iPjwvc2NyaXB0Pgo8aDI+UmVzcG9uc2UgVGltZXMgKG1zKTwvaDI+CiAgPGRpdiBpZD0ibWFpbl9wIiBzdHlsZT0id2lkdGg6IDEwMCU7aGVpZ2h0OjQwMHB4OyI+PC9kaXY+CiAgPHNjcmlwdCBzcmM9Il9fSlNfUF9DSEFSVF9fIj48L3NjcmlwdD4KJycnCgpjaGFydF90X2h0bWwgPSAnJycKdmFyIG15Q2hhcnQxID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJykpOwoKdmFyIGRhdGEgPSAgX19EQVRBX187Cgp2YXIgb3B0aW9uID0gewogIGxlZ2VuZDoge30sCiAgdG9vbHRpcDogewogICAgdHJpZ2dlcjogJ2F4aXMnLAogIH0sCiAgZGF0YXNldDogewogICAgc291cmNlOmRhdGEsCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInXSwKICB9LAogIHhBeGlzOiB7IHR5cGU6ICd0aW1lJyB9LAogIHlBeGlzOiB7IH0sCiAgc2VyaWVzOiBbCiAgewogICAgIG5hbWU6ICdBY3Rpb25zL3MnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IxJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZSAKICAgICB9CiAgfSx7CiAgICAgbmFtZTogJ0ZhaWx1cmVzL3MnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IyJwogIH0KfV0KfTsKbXlDaGFydDEuc2V0T3B0aW9uKG9wdGlvbik7CicnJwoKY2hhcnRfcF9odG1sID0gJycnCnZhciBteUNoYXJ0MiA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbl9wJykpOwoKdmFyIGRhdGEgPSAgX19EQVRBX187Cgp2YXIgb3B0aW9uID0gewogIGxlZ2VuZDoge30sCiAgdG9vbHRpcDogewogICAgdHJpZ2dlcjogJ2F4aXMnLAogIH0sCiAgZGF0YXNldDogewogICAgc291cmNlOmRhdGEsCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInLCAnc2Vuc29yMycsICdzZW5zb3I0JywgJ3NlbnNvcjUnLCAnc2Vuc29yNiddLAogIH0sCiAgeEF4aXM6IHsgdHlwZTogJ3RpbWUnIH0sCiAgeUF4aXM6IHsgfSwKICBzZXJpZXM6IFsKICB7CiAgICAgbmFtZTogJ01heCcsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjYnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlCiAgICAgfQogIH0sewogICAgIG5hbWU6ICdwOTknLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3I1JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQogICAgIH0KICB9LHsKICAgICBuYW1lOiAncDk1JywKICAgICB0eXBlOiAnbGluZScsCiAgICAgc21vb3RoOiB0cnVlLAogICAgIGVuY29kZTogewogICAgICAgeDogJ3RpbWVzdGFtcCcsCiAgICAgICB5OiAnc2Vuc29yNCcgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUKICAgICB9CgogIH0sewogICAgIG5hbWU6ICdwOTAnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IzJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQogICAgIH0KCiAgfSx7CiAgICAgbmFtZTogJ0F2ZycsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjInCiAgICAgfQogIH0sewogICAgIG5hbWU6ICdNaW4nLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IxJwogIH0KfV0KfTsKbXlDaGFydDIuc2V0T3B0aW9uKG9wdGlvbik7Cgp3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHsKICBteUNoYXJ0MS5yZXNpemUoKTsKICBteUNoYXJ0Mi5yZXNpemUoKTsKfTsKJycnCgpjbGFzcyBTdW1tYXJ5OgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYubnVtX2FjdGlvbnMgPSAwCiAgICAgICAgc2VsZi5udW1fZmFpbGVkID0gMAogICAgICAgIHNlbGYuZHVyYXRpb24gPSAwLjAKICAgICAgICBzZWxmLm1pbl9ydCA9IDEwMDAwMDAwMDAuMAogICAgICAgIHNlbGYubWF4X3J0ID0gMC4wCiAgICAgICAgc2VsZi5tYXhfcnRfdHMgPSAiIgogICAgICAgIHNlbGYubWVtID0gMC4wCiAgICAgICAgc2VsZi5jcHUgPSAwLjAKICAgICAgICBzZWxmLm1heF9hd3QgPSAwLjAKICAgICAgICBzZWxmLm1heF93dCA9IDAuMAogICAgICAgIHNlbGYuYXZnX3FzID0gMC4wCiAgICAgICAgc2VsZi5tYXhfcXMgPSAwCiAgICAgICAgc2VsZi5uYW1lID0gIiIKICAgICAgICBzZWxmLmNwdV90aW1lX25zID0gMAogICAgICAgIHNlbGYuY2hhcnRfdF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozMy4xMDAnLCAxMTAwLCAwXQogICAgICAgIHNlbGYuY2hhcnRfcF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMF0KICAgICAgICBzZWxmLmFwc19jb3VudCA9IDAuMAogICAgICAgIHNlbGYuYXBzX3RhcmdldF9zdW0gPSAwLjAKCmRlZiBjcmVhdGVSZXBvcnQoZmlsZW5hbWUsIHRleHQpOgoKICAgIGN3ZCA9IG9zLmdldGN3ZCgpCiAgICBpZiBvcy5wYXRoLmlzZGlyKCJidWlsZC9yZXBvcnRzL3R1bGlwIik6CiAgICAgICAgb3MuY2hkaXIoImJ1aWxkL3JlcG9ydHMvdHVsaXAiKQoKICAgIHByaW50KCJcbk91dHB1dCBmaWxlbmFtZSA9ICIgKyBmaWxlbmFtZSkKCiAgICBpZiB0ZXh0WzBdID09ICd7JzoKICAgICAgICBjb25maWdfZmlsZW5hbWUgPSAiIgogICAgICAgIGNvbmZpZ19maWxlbmFtZTIgPSAiIgogICAgZWxzZToKICAgICAgICBjb25maWdfZmlsZW5hbWUgPSB0ZXh0CiAgICAgICAgY29uZmlnX2ZpbGVuYW1lMiA9IG9zLnBhdGguYmFzZW5hbWUoY29uZmlnX2ZpbGVuYW1lKQoKICAgIGpoaCA9IHt9CiAgICBqc3MgPSB7fQoKICAgIHByaW50X2RldGFpbF9yb3dzID0gVHJ1ZQoKICAgIGdsb2JhbCBuYW1lMnMKICAgIGdsb2JhbCBuYW1lMnNfbGlzdAogICAgZ2xvYmFsIGJlbmNobWFya19pZAogICAgbmFtZTJzID0gIiIKICAgIG5hbWUyc19saXN0ID0gW10KICAgIGJlbmNobWFya19pZCA9IDAKCiAgICBzbSA9IE5vbmUKICAgIGpoID0gSGlzdG9ncmFtKDEsIDM2MDAqMTAwMCoxMDAwLCAzKQogICAgZmlsZU9iaiA9IG9wZW4oZmlsZW5hbWUpCiAgICBqYiA9IGpzb24ubG9hZChmaWxlT2JqLCBvYmplY3RfcGFpcnNfaG9vaz1PcmRlcmVkRGljdCkKICAgIHZlcnNpb24gPSBqYlsndmVyc2lvbiddCiAgICBkZXNjMSA9ICdUdWxpcCAnICsgdmVyc2lvbgogICAgcmIgPSBqYlsicmVzdWx0cyJdCgogICAgcmVwb3J0X2h0bWxfZm4gPSBqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsicmVwb3J0X2ZpbGVuYW1lIl0KICAgIHJlcG9ydF9odG1sX2ZoID0gb3BlbihyZXBvcnRfaHRtbF9mbiwgIncrIikKCiAgICByZXBvcnRfanNvbl9mbiA9IG9zLnBhdGguc3BsaXRleHQocmVwb3J0X2h0bWxfZm4pWzBdICsgIi5qc29uIgogICAgcmVwb3J0X2pzb25fZmggPSBvcGVuKHJlcG9ydF9qc29uX2ZuLCAidysiKQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIntcbiIpCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAiY29uZmlnIjogJyArIGpzb24uZHVtcHMoamJbImNvbmZpZyJdKSArICcsXG4nKQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgImJlbmNobWFya3MiOiB7XG4nKQoKICAgIGdsb2JhbCByZXBvcnRfZG4KICAgIHJlcG9ydF9kbiA9IG9zLnBhdGguc3BsaXRleHQocmVwb3J0X2h0bWxfZm4pWzBdCiAgICB0cnk6CiAgICAgICAgb3MubWFrZWRpcnMocmVwb3J0X2RuKQogICAgZXhjZXB0OgogICAgICAgIHBhc3MKCiAgICBkZWYgb2RpcihmaWxlbmFtZSk6CiAgICAgICAgZ2xvYmFsIHJlcG9ydF9kbgogICAgICAgIHJldHVybiBvcy5wYXRoLmpvaW4ob3MuZ2V0Y3dkKCksIHJlcG9ydF9kbiwgZmlsZW5hbWUpCgogICAgZGVmIG9kaXJIdG1sKGZpbGVuYW1lKToKICAgICAgICBnbG9iYWwgcmVwb3J0X2RuCiAgICAgICAgcmV0dXJuIHJlcG9ydF9kbiArICIvIiArIGZpbGVuYW1lCgogICAgZGVmIG5hbWVfdG9faHJlZihuYW1lKToKICAgICAgICBocmVmID0gJ18nICsgcmUuc3ViKHInXFcnLCAnXycsIG5hbWUubG93ZXIoKSkKICAgICAgICBoZmlsZSA9IG9zLnBhdGguc3BsaXRleHQoY29uZmlnX2ZpbGVuYW1lMilbMF0gKyAiLmh0bWwiCiAgICAgICAgcmV0dXJuICI8YSBocmVmPSclcyMlcyc+IiUoaGZpbGUsIGhyZWYpICsgbmFtZSArICI8L2E+IgoKICAgIGlmIGxlbihjb25maWdfZmlsZW5hbWUyKSA+IDA6CiAgICAgICAgZGVzYzIgPSAiPGEgaHJlZj0nJXMnPiIlKG9zLnBhdGguc3BsaXRleHQoY29uZmlnX2ZpbGVuYW1lMilbMF0gKyAiLmh0bWwiKQogICAgZWxzZToKICAgICAgICBkZXNjMiA9ICIiCgogICAgaWYgbGVuKGNvbmZpZ19maWxlbmFtZTIpID4gMDoKICAgICAgICBkZXNjMiArPSBqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsiZGVzY3JpcHRpb24iXSArICI8L2E+IC8gIiArIGpiWyJ0aW1lc3RhbXAiXVs6LTNdCiAgICBlbHNlOgogICAgICAgIGRlc2MyICs9IGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJkZXNjcmlwdGlvbiJdICsgIiAvICIgKyBqYlsidGltZXN0YW1wIl1bOi0zXQoKICAgIHByaW50KCJSZXBvcnQgZmlsZW5hbWUgPSAiICsgcmVwb3J0X2h0bWxfZm4pCgogICAgZGVmIHByaW50ZihzKToKICAgICAgICByZXBvcnRfaHRtbF9maC53cml0ZShzKQoKICAgIGRlZiBhY3Rpb25OYW1lKHMpOgogICAgICAgIHJldHVybiBzLnNwbGl0KCIsIilbMF0uc3RyaXAoKQoKICAgIGRlZiBhY3Rpb25EZXNjKHMpOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHMuc3BsaXQoIiwiKVsxXS5zdHJpcCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICByZXR1cm4gIiIKCiAgICBkZWYgc3RyX2Zyb21fY3B1X3RpbWVfbnModl9ucyk6CiAgICAgICAgciA9IHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz12X25zLzEwMDAwMDAwMDAuMCkpICAjWzotNV0KICAgICAgICBpZiAnLicgaW4gcjoKICAgICAgICAgICAgciA9IHJbOi01XQogICAgICAgIHJldHVybiByCgogICAgZGVmIHByaW50X2dsb2JhbF9zdW1tYXJ5KCk6CiAgICAgICAgZ2xvYmFsIG5hbWUycwogICAgICAgIGdsb2JhbCBuYW1lMnNfbGlzdAogICAgICAgIGdsb2JhbCBiZW5jaG1hcmtfaWQKCiAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbS5uYW1lIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIHNtLm51bV9hY3Rpb25zL3NtLmR1cmF0aW9uCiAgICAgICAgaWYgc20ubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06CiAgICAgICAgICAgIGNwdV90ID0gIjA6MDA6MDAiCiAgICAgICAgICAgIHNtLmNwdSA9IDAuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoc20uY3B1X3RpbWVfbnMpCgogICAgICAgIHN0YXRzRmlsZW5hbWUgPSAnJXNfJWQuaHRtbCclKG9kaXIocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQogICAgICAgIHN0YXRzRmlsZW5hbWVIdG1sID0gJyVzXyVkLmh0bWwnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgdGV4dCA9ICI8YSBocmVmPSclcyc+JXM8L2E+IiUoc3RhdHNGaWxlbmFtZUh0bWwsIltTdW1tYXJ5XSIpCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbShzdGF0c0ZpbGVuYW1lKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KHN1bW1hcnlfaHRtbF8xKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsnKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgICAgIC8vIENvbm5lY3QgdGhlIGNob29zZSBmaWxlcyBidXR0b246JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgiICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVGaWxlU2VsZWN0LCBmYWxzZSk7IikKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgICAgICAvLyBMb2FkIHNvbWUgc3RhdGljIGV4YW1wbGUgZGF0YTonKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIGlkeCA9IDAKICAgICAgICBhY3Rpb25zU3RyaW5nID0gIiIKICAgICAgICBoaXN0b3NTdHJpbmcgPSAiIgogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgaWR4ICs9IDEKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgaWYgbGVuKGFjdGlvbnNTdHJpbmcpID4gMDoKICAgICAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJwogICAgICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICcsICcKICAgICAgICAgICAgYWN0aW9uc1N0cmluZyArPSAiJ0ElcyciJShrZXkpCiAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAiZGF0YSVkU3RyIiUoaWR4KQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBkYXRhJWRTdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYjZGF0YV8lZCIpLmlubmVySFRNTC50cmltKCk7JyUoaWR4LGlkeCkpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIGlmIGlkeCA+IDE6CiAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJyArICInUyciCiAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAnLCAnICsgImRhdGElZFN0ciIlKDApCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGRhdGElZFN0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXyVkIikuaW5uZXJIVE1MLnRyaW0oKTsnJSgwLDApKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBoaXN0b3MgPSBbJXNdOyclKGhpc3Rvc1N0cmluZykpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgbmFtZXMgPSBbJXNdOyclKGFjdGlvbnNTdHJpbmcpKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQoKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsnKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZHJhd0NoYXJ0KCk7JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIH0nKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHRDaGFydEZpbGVuYW1lID0gJyVzXyVkX3QuanMnJShvZGlyKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkKICAgICAgICB0Q2hhcnRGaWxlbmFtZUh0bWwgPSAnJXNfJWRfdC5qcyclKG9kaXJIdG1sKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkKICAgICAgICBwQ2hhcnRGaWxlbmFtZSA9ICclc18lZF9wLmpzJyUob2RpcihyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgcENoYXJ0RmlsZW5hbWVIdG1sID0gJyVzXyVkX3AuanMnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoCiAgICAgICAgICAgIHN1bW1hcnlfaHRtbF8yCiAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19DSEFSVFNfVEVYVF9fIiwKICAgICAgICAgICAgICAgICAgICBjaGFydHNfaHRtbAogICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIl9fSlNfVF9DSEFSVF9fIixvcy5wYXRoLmJhc2VuYW1lKHRDaGFydEZpbGVuYW1lSHRtbCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19KU19QX0NIQVJUX18iLG9zLnBhdGguYmFzZW5hbWUocENoYXJ0RmlsZW5hbWVIdG1sKSkpCiAgICAgICAgICAgICAgICApCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCgogICAgICAgIGlkeCA9IDAKICAgICAgICBmb3Iga2V5IGluIGpzcy5rZXlzKCk6CiAgICAgICAgICAgIGlkeCArPSAxCiAgICAgICAgICAgIHNteCA9IGpzc1trZXldCiAgICAgICAgICAgIGpoeCA9IGpoaFtrZXldCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8ZGl2IGlkPSJkYXRhXyVkIiBjbGFzcz0iaGlzdG8iPiclKGlkeCkpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgICAgICBqaHgub3V0cHV0UGVyY2VudGlsZURpc3RyaWJ1dGlvbihwcmludFN0cmVhbSwgMTAwMC4wKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPC9kaXY+JykKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCgogICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8ZGl2IGlkPSJkYXRhXzAiIGNsYXNzPSJoaXN0byI+JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBqaC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzwvZGl2PicpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCgogICAgICAgIHByaW50U3RyZWFtLnByaW50KHN1bW1hcnlfaHRtbF90YWJsZV8xKQogICAgICAgIHByaW50X3BlcmNlbnRpbGVfdGFibGUocHJpbnRTdHJlYW0samgpCgogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLmZsdXNoKCkKICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpCgogICAgICAgICMgQWN0aW9ucy9zIGNoYXJ0CiAgICAgICAgI2NoYXJ0X3RfbGlzdCA9IFsKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0MDozMy4xMDAnLCAxMTAwLCAwXSwKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0MDo1My4yMDAnLCAxMDAyLCAwXSwKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0MTowMy4zMDAnLCAxMTA0LCAwXSwKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0NDowMy40MDAnLCAxMjA1LjUsIDBdLAogICAgICAgICMgICAgWycyMDE4LTA0LTEwVDIwOjQ1OjAzLjUwMCcsIDEzMDYsIDBdCiAgICAgICAgI10KICAgICAgICBjaGFydF9wX2xpc3QgPSBbCiAgICAgICAgICAgIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMCBdLAogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDA6NTNaJywgMiwgNiwgMTUsIDI1LCAzMCwgMzVdLAogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDE6MDNaJywgMiwgNSwgMjAsIDMwLCAzNSwgNDBdLAogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDQ6MDNaJywgMywgNywgMTIsIDIyLCAzMCwgMzJdLAogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDU6MDNaJywgMiwgMTAsIDEzLCAyMywgMzAsIDMzXQogICAgICAgIF0KICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHRDaGFydEZpbGVuYW1lKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KGNoYXJ0X3RfaHRtbC5yZXBsYWNlKCJfX0RBVEFfXyIsKCIlcyIlKHNtLmNoYXJ0X3RfbGlzdCkpLnJlcGxhY2UoInUnIiwiJyIpKSkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQoKICAgICAgICAjIFJlc3BvbnNlIFRpbWUgKG1zKSBjaGFydAogICAgICAgIHByaW50U3RyZWFtID0gUHJpbnRTdHJlYW0ocENoYXJ0RmlsZW5hbWUpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoY2hhcnRfcF9odG1sLnJlcGxhY2UoIl9fREFUQV9fIiwoIiVzIiUoc20uY2hhcnRfcF9saXN0KSkucmVwbGFjZSgidSciLCInIikpKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLmZsdXNoKCkKICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpCgogICAgICAgIGlmIFRydWU6CiAgICAgICAgICAgIHJkID0ge30KICAgICAgICAgICAgcmRbIm51bV9hY3Rpb25zIl0gPSBzbS5udW1fYWN0aW9ucwogICAgICAgICAgICByZFsibnVtX2ZhaWxlZCJdID0gc20ubnVtX2ZhaWxlZAogICAgICAgICAgICByZFsiZHVyYXRpb24iXSA9IHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSkKICAgICAgICAgICAgcmRbImFwcyJdID0gYXZnX2FwcwogICAgICAgICAgICByZFsiYXBzX3RhcmdldF9yYXRlIl0gPSBzbS5hcHNfdGFyZ2V0X3N1bSAvIHNtLmFwc19jb3VudAogICAgICAgICAgICByZFsiYXZnX3J0Il0gPSBqaC5nZXRNZWFuKCkvMTAwMC4wCiAgICAgICAgICAgIHJkWyJzdGRfZGV2Il0gPSBqaC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAKICAgICAgICAgICAgcmRbIm1pbl9ydCJdID0gc20ubWluX3J0CiAgICAgICAgICAgIHJkWyJwOTBfcnQiXSA9IGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMAogICAgICAgICAgICByZFsicDk5X3J0Il0gPSBqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjAKICAgICAgICAgICAgcmRbIm1heF9ydCJdID0gc20ubWF4X3J0CiAgICAgICAgICAgIHJkWyJtYXhfcnR0Il0gPSBzbS5tYXhfcnRfdHMucmVwbGFjZSgiXyIsIlQiKQogICAgICAgICAgICByZFsiQVFTIl0gPSBzbS5hdmdfcXMKICAgICAgICAgICAgcmRbIk1RUyJdID0gc20ubWF4X3FzCiAgICAgICAgICAgIHJkWyJBV1QiXSA9IHNtLm1heF9hd3QKICAgICAgICAgICAgcmRbIk1XVCJdID0gc20ubWF4X3d0CiAgICAgICAgICAgIHJkWyJDUFVfVCJdID0gY3B1X3QKICAgICAgICAgICAgcmRbIkNQVSJdID0gc20uY3B1CiAgICAgICAgICAgIHJkWyJNRU0iXSA9IHNtLm1lbQoKICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICAgLCJzdW1tYXJ5IjogJXNcbiclKGpzb24uZHVtcHMocmQpKSkKCiAgICAgICAgaHRtbCA9IGJlbmNobWFya19zdW1tYXJ5X3JvdyUoCiAgICAgICAgICAgIG5hbWUycywKICAgICAgICAgICAgdGV4dCwKICAgICAgICAgICAgc20ubnVtX2FjdGlvbnMsCiAgICAgICAgICAgIHNtLm51bV9mYWlsZWQsCiAgICAgICAgICAgIHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksCiAgICAgICAgICAgIGF2Z19hcHMsCiAgICAgICAgICAgIGpoLmdldE1lYW4oKS8xMDAwLjAsCiAgICAgICAgICAgIGpoLmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCwKICAgICAgICAgICAgc20ubWluX3J0LAogICAgICAgICAgICBqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjAsCiAgICAgICAgICAgIGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCwKICAgICAgICAgICAgc20ubWF4X3J0LAogICAgICAgICAgICBzbS5tYXhfcnRfdHNbODpdLAogICAgICAgICAgICBzbS5hdmdfcXMsCiAgICAgICAgICAgIHNtLm1heF9xcywKICAgICAgICAgICAgc20ubWF4X2F3dCwKICAgICAgICAgICAgc20ubWF4X3d0LAogICAgICAgICAgICBjcHVfdCwKICAgICAgICAgICAgc20uY3B1LAogICAgICAgICAgICBzbS5tZW0pCiAgICAgICAgaWYgbm90IHByaW50X2RldGFpbF9yb3dzOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L2I+IiwiIikKICAgICAgICAjIFZhbGlkYXRpb246ICNGCiAgICAgICAgaWYgc20ubnVtX2ZhaWxlZCA+IDA6CiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcxPiIsIjxtYXJrPiIpCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMT4iLCI8L21hcms+IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCIiKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzE+IiwiIikKICAgICAgICAjIFZhbGlkYXRpb246IEF2Z19BUFMKICAgICAgICAjcHJpbnQoc20ubmFtZSkKICAgICAgICB0YXJnZXRfYXBzID0gcmRbImFwc190YXJnZXRfcmF0ZSJdCiAgICAgICAgaWYgdGFyZ2V0X2FwcyA+IDAuMDoKICAgICAgICAgICAgZGVsdGFfcGVyY2VudGFnZV9hcHMgPSAxMDAuMCphYnModGFyZ2V0X2Fwcy1hdmdfYXBzKS90YXJnZXRfYXBzCiAgICAgICAgICAgIGlmIGRlbHRhX3BlcmNlbnRhZ2VfYXBzID4gMS41OgogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiPG1hcms+IikKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMj4iLCI8L21hcms+IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIiIpCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzI+IiwiIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzI+IiwiIikKICAgICAgICBwcmludGYoaHRtbCkKICAgICAgICBpZiBsZW4obmFtZTJzX2xpc3QpID4gMDoKICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCgogICAgZGVmIHByaW50X3BlcmNlbnRpbGVfdGFibGUocHJpbnRTdHJlYW0sIGpoeCk6CiAgICAgICAgYm9zID0gQnl0ZUFycmF5T3V0cHV0U3RyZWFtKCkKICAgICAgICBveCA9IFByaW50U3RyZWFtKGJvcykKICAgICAgICBqaHgub3V0cHV0UGVyY2VudGlsZURpc3RyaWJ1dGlvbihveCwgMTAwMC4wKQogICAgICAgIG94LmZsdXNoKCkKICAgICAgICBveC5jbG9zZSgpCiAgICAgICAgcHRleHQgPSBib3MudG9TdHJpbmcoKQogICAgICAgIGxpbmVzID0gcHRleHQuc3BsaXQoJ1xuJykKICAgICAgICB0Y291bnQgPSBqaHguZ2V0VG90YWxDb3VudCgpCiAgICAgICAgaGVhZGVyID0gVHJ1ZQogICAgICAgIHJsaXN0ID0gW10KICAgICAgICBmb3IgbGluZSBpbiBsaW5lczoKICAgICAgICAgICAgaWYgbGVuKGxpbmUpID09IDA6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBsaW5lWzBdICE9ICIjIjoKICAgICAgICAgICAgICAgIGUgPSBsaW5lLnNwbGl0KCkKICAgICAgICAgICAgICAgIGlmIGhlYWRlcjoKICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8dGFibGUgc3R5bGU9IndpZHRoOjYwMHB4Ij4nKQogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPHRyPicpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVswXSkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVsxXSkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVsyXSkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVszXSkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD5BYm92ZUNvdW50PC90aD4nKQogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPC90cj4nKQogICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IEZhbHNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmIGxlbihlKSA9PSAzOgogICAgICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZCgnJykKICAgICAgICAgICAgICAgICAgICBybGlzdC5hcHBlbmQoZSkKICAgICAgICBybGlzdC5yZXZlcnNlKCkKICAgICAgICBmb3IgZSBpbiBybGlzdDoKICAgICAgICAgICAgbWFyayA9IEZhbHNlCiAgICAgICAgICAgIGlmIGVbMV0uc3RhcnRzd2l0aCgiMC45OTkwIik6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBpZiBlWzFdLnN0YXJ0c3dpdGgoIjAuOTkwIik6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBpZiBlWzFdID09ICIwLjk1MDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBpZiBlWzFdID09ICIwLjkwMDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBpZiBlWzFdID09ICIwLjgwMDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBpZiBlWzFdID09ICIwLjUwMDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDx0cj4nKQogICAgICAgICAgICBpZiBtYXJrOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD48bWFyaz4lczwvbWFyaz48L3RkPiclKGVbMF0pKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD48bWFyaz4lczwvbWFyaz48L3RkPiclKGVbMV0pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVswXSkpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzFdKSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsyXSkpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+JXM8L3RkPiclKGVbM10pKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJSh0Y291bnQtaW50KGVbMl0pKSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8L3RyPicpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC90YWJsZT4iKQoKICAgIGRlZiBwcmludF9hY3Rpb25fc3VtbWFyeSgpOgogICAgICAgIGdsb2JhbCBuYW1lMnMKICAgICAgICBnbG9iYWwgbmFtZTJzX2xpc3QKICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkCiAgICAgICAgcGFnZV9pZCA9IDAKICAgICAgICBudW1fa2V5cyA9IGxlbihqc3Mua2V5cygpKQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIHRleHQgPSAiWyVzLiVzXSIlKGtleSwgYWN0aW9uTmFtZShqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsidXNlcl9hY3Rpb25zIl1ba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0ZXh0ID0gIlslc10iJShrZXkpCiAgICAgICAgICAgIHN0YXRzRmlsZW5hbWUgPSAnJXNfJWRfJWQuaHRtbCclKG9kaXIocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkLHBhZ2VfaWQpCiAgICAgICAgICAgIHN0YXRzRmlsZW5hbWVIdG1sID0gJyVzXyVkXyVkLmh0bWwnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQscGFnZV9pZCkKICAgICAgICAgICAgc3RhdHNGaWxlbmFtZVByZXYgPSAnJXNfJWRfJWQuaHRtbCclKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLGFicyhwYWdlX2lkLTEpKQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lTmV4dCA9ICclc18lZF8lZC5odG1sJyUocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSxiZW5jaG1hcmtfaWQscGFnZV9pZCsxKQogICAgICAgICAgICB0ZXh0ID0gIjxhIGhyZWY9JyVzJz4lczwvYT4iJShzdGF0c0ZpbGVuYW1lSHRtbCx0ZXh0KQogICAgICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHN0YXRzRmlsZW5hbWUpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxodG1sIGxhbmc9XCJlblwiPiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxzdHlsZT4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ0YWJsZSwgdGgsIHRkIHsiKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7IGZvbnQtc2l6ZToxNnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigifSIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIm1hcmsgeyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIiAgYmFja2dyb3VuZC1jb2xvcjogTGlnaHRHcmF5OyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIiAgY29sb3I6IGJsYWNrOyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIn0iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L3N0eWxlPiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxib2R5PiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9Ii4uLyVzIj5VcDwvYT4nJShyZXBvcnRfaHRtbF9mbikpCiAgICAgICAgICAgIGlmIChwYWdlX2lkID09IDApIGFuZCAobnVtX2tleXMgPT0gMSk6CiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5QcmV2PC9hPicpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5OZXh0PC9hPicpCiAgICAgICAgICAgIGVsaWYgKHBhZ2VfaWQgPT0gMCkgYW5kIChudW1fa2V5cyA+IDEpOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iIyI+UHJldjwvYT4nKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPk5leHQ8L2E+JyUoc3RhdHNGaWxlbmFtZU5leHQpKQogICAgICAgICAgICBlbGlmIHBhZ2VfaWQrMSA9PSBudW1fa2V5czoKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5QcmV2PC9hPiclKHN0YXRzRmlsZW5hbWVQcmV2KSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPk5leHQ8L2E+JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5QcmV2PC9hPiclKHN0YXRzRmlsZW5hbWVQcmV2KSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5OZXh0PC9hPiclKHN0YXRzRmlsZW5hbWVOZXh0KSkKCiAgICAgICAgICAgIGlmIGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJ1c2VyX2FjdGlvbnMiXS5oYXNfa2V5KGtleSk6CiAgICAgICAgICAgICAgICBkZXNjID0gIlslcy4lc10iJShrZXksIGFjdGlvbk5hbWUoamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdW2tleV0pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGVzYyA9ICJbQSVzXSIlKGtleSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGgyPiVzIFBlcmNlbnRpbGUgUmVzcG9uc2UgVGltZSBEaXN0cmlidXRpb248L2gyPiIlKGRlc2MpKQoKICAgICAgICAgICAgI3ByaW50U3RyZWFtLnByaW50bG4oIjxwcmU+IikKICAgICAgICAgICAgI2poeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApCgogICAgICAgICAgICBwcmludF9wZXJjZW50aWxlX3RhYmxlKHByaW50U3RyZWFtLGpoeCkKCiAgICAgICAgICAgICNwcmludFN0cmVhbS5wcmludGxuKCI8L3ByZT4iKQoKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9ib2R5PiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvaHRtbD4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgICAgIHByaW50U3RyZWFtLmNsb3NlKCkKICAgICAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBzbXgubnVtX2FjdGlvbnMvc214LmR1cmF0aW9uCiAgICAgICAgICAgIGlmIHNteC5uYW1lIGluIFsib25TdGFydCIsICJvblN0b3AiXToKICAgICAgICAgICAgICAgIGNwdV90ID0gIjA6MDA6MDAiCiAgICAgICAgICAgICAgICBzbXguY3B1ID0gMC4wCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjcHVfdCA9IHN0cl9mcm9tX2NwdV90aW1lX25zKHNteC5jcHVfdGltZV9ucykKCiAgICAgICAgICAgIGlmIFRydWU6CiAgICAgICAgICAgICAgICByZCA9IHt9CiAgICAgICAgICAgICAgICByZFsibnVtX2FjdGlvbnMiXSA9IHNteC5udW1fYWN0aW9ucwogICAgICAgICAgICAgICAgcmRbIm51bV9mYWlsZWQiXSA9IHNteC5udW1fZmFpbGVkCiAgICAgICAgICAgICAgICByZFsiZHVyYXRpb24iXSA9IHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSkKICAgICAgICAgICAgICAgIHJkWyJhcHMiXSA9IGF2Z19hcHMKICAgICAgICAgICAgICAgIHJkWyJhdmdfcnQiXSA9IGpoeC5nZXRNZWFuKCkvMTAwMC4wCiAgICAgICAgICAgICAgICByZFsic3RkX2RldiJdID0gamh4LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMAogICAgICAgICAgICAgICAgcmRbIm1pbl9ydCJdID0gc214Lm1pbl9ydAogICAgICAgICAgICAgICAgcmRbInA5MF9ydCJdID0gamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMAogICAgICAgICAgICAgICAgcmRbInA5OV9ydCJdID0gamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMAogICAgICAgICAgICAgICAgcmRbIm1heF9ydCJdID0gc214Lm1heF9ydAogICAgICAgICAgICAgICAgcmRbIm1heF9ydHQiXSA9IHNteC5tYXhfcnRfdHMucmVwbGFjZSgiXyIsIlQiKQogICAgICAgICAgICAgICAgaWYgcGFnZV9pZCA9PSAwOgogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICB9XG4nKQogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAsImFjdGlvbnMiOiB7XG4nKQogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICAiJXMiOiAlc1xuJyUoa2V5LGpzb24uZHVtcHMocmQpKSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICAgLCIlcyI6ICVzXG4nJShrZXksanNvbi5kdW1wcyhyZCkpKQoKICAgICAgICAgICAgaHRtbCA9IGJlbmNobWFya19zdW1tYXJ5X3JvdyUobmFtZTJzLHRleHQsc214Lm51bV9hY3Rpb25zLHNteC5udW1fZmFpbGVkLHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksYXZnX2FwcyxqaHguZ2V0TWVhbigpLzEwMDAuMCxqaHguZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wLHNteC5taW5fcnQsamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCxqaHguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wLHNteC5tYXhfcnQsc214Lm1heF9ydF90c1s4Ol0sc214LmF2Z19xcyxzbXgubWF4X3FzLHNteC5tYXhfYXd0LHNteC5tYXhfd3QsY3B1X3Qsc214LmNwdSxzbXgubWVtKQogICAgICAgICAgICBpZiBub3QgcHJpbnRfZGV0YWlsX3Jvd3M6CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC9iPiIsIiIpCiAgICAgICAgICAgICMgUmVtb3ZlIHRhZzEKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzE+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIiIpCiAgICAgICAgICAgICMgUmVtb3ZlIHRhZzIKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCgogICAgICAgICAgICBwcmludGYoaHRtbCkKICAgICAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6CiAgICAgICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQogICAgICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCgogICAgICAgICAgICBwYWdlX2lkICs9IDEKICAgICAgICAjcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgIH1cbicpCgogICAgcHJpbnRmKGhlYWRlci5yZXBsYWNlKCJfX0RFU0MxX18iLCBkZXNjMSkucmVwbGFjZSgiX19ERVNDMl9fIiwgZGVzYzIpKQogICAganNvbl9ibV9uYW1lcyA9IHt9CiAgICBwcmV2X3Jvd19pZCA9IDAKICAgIGZvciBlIGluIHJiOgogICAgICAgIGN1cnJlbnRfcm93X2lkID0gaW50KGVbInJvd19pZCJdKQogICAgICAgIGlmIGN1cnJlbnRfcm93X2lkIDw9IHByZXZfcm93X2lkOgogICAgICAgICAgICBpZiBzbSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHByaW50X2FjdGlvbl9zdW1tYXJ5KCkKICAgICAgICAgICAgICAgIHByaW50X2dsb2JhbF9zdW1tYXJ5KCkKICAgICAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfZW1wdHlfcm93KQogICAgICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19jb2x1bW5zKQogICAgICAgICAgICBzbSA9IFN1bW1hcnkoKQogICAgICAgICAgICBzbS5uYW1lID0gZVsiYm1fbmFtZSJdCiAgICAgICAgICAgIGpoLnJlc2V0KCkKICAgICAgICAgICAgYmVuY2htYXJrX2lkICs9IDEKICAgICAgICAgICAgamhoID0ge30KICAgICAgICAgICAganNzID0ge30KICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19oZWFkZXIlKG5hbWVfdG9faHJlZihlWyJibV9uYW1lIl0pKSkKICAgICAgICAgICAgaWYgbGVuKGVbIndvcmtmbG93X25hbWUiXSkgPiAwOgogICAgICAgICAgICAgICAgbmFtZTJzX2xpc3QgPSBbInU6JWQsIHQ6JWQiJShlWyJudW1fdXNlcnMiXSxlWyJudW1fdGhyZWFkcyJdKSwgInc6JXMiJShlWyJ3b3JrZmxvd19uYW1lIl0pLCAiYzolZCIlKGVbImNvbnRleHRfaWQiXSkgLCIiXQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbmFtZTJzX2xpc3QgPSBbInU6JWQsIHQ6JWQiJShlWyJudW1fdXNlcnMiXSxlWyJudW1fdGhyZWFkcyJdKSwgImM6JWQiJShlWyJjb250ZXh0X2lkIl0pLCIiXQogICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQogICAgICAgICAgICBkZWwgbmFtZTJzX2xpc3RbMF0KICAgICAgICBodCA9IEhpc3RvZ3JhbS5mcm9tU3RyaW5nKGVbImhpc3RvZ3JhbV9ydCJdKQogICAgICAgIGpoLmFkZChodCkKICAgICAgICBwX21lbSA9IDEwMC4wICogZVsianZtX21lbW9yeV91c2VkIl0gLyBlWyJqdm1fbWVtb3J5X21heGltdW0iXQogICAgICAgIHBfY3B1ID0gZVsicHJvY2Vzc19jcHVfdXRpbGl6YXRpb24iXQogICAgICAgIGlmIGVbImJtX25hbWUiXSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06CiAgICAgICAgICAgIGNwdV90ID0gIjA6MDA6MDAiCiAgICAgICAgICAgIHBfY3B1ID0gMC4wCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3B1X3QgPSBzdHJfZnJvbV9jcHVfdGltZV9ucyhlWyJwcm9jZXNzX2NwdV90aW1lX25zIl0pCiAgICAgICAgICAgIHBfY3B1ID0gZVsicHJvY2Vzc19jcHVfdXRpbGl6YXRpb24iXQogICAgICAgIGlmIG5vdCBqc29uX2JtX25hbWVzLmhhc19rZXkoZVsiYm1fbmFtZSJdKToKICAgICAgICAgICAganNvbl9ibV9uYW1lc1tlWyJibV9uYW1lIl1dID0gMQogICAgICAgICAgICBpZiBsZW4oanNvbl9ibV9uYW1lcy5rZXlzKCkpID4gMToKICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICB9XG4nKQogICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICB9LFxuJykKICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAiJXMiOiB7XG4nJShlWyJibV9uYW1lIl0pKQogICAgICAgICAgICBjb250ZXh0ID0ge30KICAgICAgICAgICAgY29udGV4dFsibmFtZSJdID0gZVsiY29udGV4dF9uYW1lIl0KICAgICAgICAgICAgY29udGV4dFsibnVtX3VzZXJzIl0gPSBlWyJudW1fdXNlcnMiXQogICAgICAgICAgICBjb250ZXh0WyJudW1fdGhyZWFkcyJdID0gZVsibnVtX3RocmVhZHMiXQogICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgImNvbnRleHQiOiAlcywnJShqc29uLmR1bXBzKGNvbnRleHQpKSkKICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICJyZXN1bHRzIjoge1xuJykKCiAgICAgICAgaWYgVHJ1ZToKICAgICAgICAgICAgcmQgPSB7fQogICAgICAgICAgICByZFsibnVtX2FjdGlvbnMiXSA9IGVbIm51bV9hY3Rpb25zIl0KICAgICAgICAgICAgcmRbIm51bV9mYWlsZWQiXSA9IGVbIm51bV9mYWlsZWQiXQogICAgICAgICAgICByZFsiZHVyYXRpb24iXSA9IHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoZVsiZHVyYXRpb24iXSkpKQogICAgICAgICAgICByZFsiYXBzIl0gPSAwLjAgaWYgZVsiYm1fbmFtZSJdIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIGVbImF2Z19hcHMiXQogICAgICAgICAgICByZFsiYXBzX3RhcmdldF9yYXRlIl0gPSBlWyJhcHNfdGFyZ2V0X3JhdGUiXQogICAgICAgICAgICByZFsiYXZnX3J0Il0gPSBlWyJhdmdfcnQiXQogICAgICAgICAgICByZFsic3RkX2RldiJdID0gaHQuZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wCiAgICAgICAgICAgIHJkWyJtaW5fcnQiXSA9IGVbIm1pbl9ydCJdCiAgICAgICAgICAgIHJkWyJwOTBfcnQiXSA9IGVbInBlcmNlbnRpbGVzX3J0Il1bIjkwLjAiXQogICAgICAgICAgICByZFsicDk5X3J0Il0gPSBlWyJwZXJjZW50aWxlc19ydCJdWyI5OS4wIl0KICAgICAgICAgICAgcmRbIm1heF9ydCJdID0gZVsibWF4X3J0Il0KICAgICAgICAgICAgcmRbIm1heF9ydHQiXSA9IGVbIm1heF9ydF90cyJdLnJlcGxhY2UoIl8iLCJUIikKICAgICAgICAgICAgcmRbIkFRUyJdID0gZVsiYXZnX3d0aHJlYWRfcXNpemUiXQogICAgICAgICAgICByZFsiTVFTIl0gPSBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdCiAgICAgICAgICAgIHJkWyJBV1QiXSA9IGVbImF2Z193dCJdCiAgICAgICAgICAgIHJkWyJNV1QiXSA9IGVbIm1heF93dCJdCiAgICAgICAgICAgIHJkWyJDUFVfVCJdID0gY3B1X3QKICAgICAgICAgICAgcmRbIkNQVSJdID0gcF9jcHUKICAgICAgICAgICAgcmRbIk1FTSJdID0gcF9tZW0KICAgICAgICAgICAgaWYgZVsicm93X2lkIl0rMSA9PSAxOgogICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICAgICIlZCI6ICVzXG4nJShlWyJyb3dfaWQiXSsxLGpzb24uZHVtcHMocmQpKSkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICwiJWQiOiAlc1xuJyUoZVsicm93X2lkIl0rMSxqc29uLmR1bXBzKHJkKSkpCiAgICAgICAgaWYgcHJpbnRfZGV0YWlsX3Jvd3M6CiAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfZGV0YWlsX3JvdyUoIFwKICAgICAgICAgICAgICAgIG5hbWUycywKICAgICAgICAgICAgICAgIGVbInJvd19pZCJdKzEsCiAgICAgICAgICAgICAgICBlWyJudW1fYWN0aW9ucyJdLAogICAgICAgICAgICAgICAgZVsibnVtX2ZhaWxlZCJdLAogICAgICAgICAgICAgICAgc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludChlWyJkdXJhdGlvbiJdKSkpLAogICAgICAgICAgICAgICAgMC4wIGlmIGVbImJtX25hbWUiXSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBlWyJhdmdfYXBzIl0sCiAgICAgICAgICAgICAgICBlWyJhdmdfcnQiXSwKICAgICAgICAgICAgICAgIGh0LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCwKICAgICAgICAgICAgICAgIGVbIm1pbl9ydCJdLAogICAgICAgICAgICAgICAgZVsicGVyY2VudGlsZXNfcnQiXVsiOTAuMCJdLAogICAgICAgICAgICAgICAgZVsicGVyY2VudGlsZXNfcnQiXVsiOTkuMCJdLAogICAgICAgICAgICAgICAgZVsibWF4X3J0Il0sCiAgICAgICAgICAgICAgICBlWyJtYXhfcnRfdHMiXVs4Ol0sCiAgICAgICAgICAgICAgICBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdLAogICAgICAgICAgICAgICAgZVsibWF4X3d0aHJlYWRfcXNpemUiXSwKICAgICAgICAgICAgICAgIGVbImF2Z193dCJdLAogICAgICAgICAgICAgICAgZVsibWF4X3d0Il0sCiAgICAgICAgICAgICAgICBjcHVfdCwKICAgICAgICAgICAgICAgIHBfY3B1LAogICAgICAgICAgICAgICAgcF9tZW0KICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgIGlmIGxlbihuYW1lMnNfbGlzdCkgPiAwOgogICAgICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0KICAgICAgICAgICAgICAgIGRlbCBuYW1lMnNfbGlzdFswXQogICAgICAgIGlmIHNtLm1pbl9ydCA+IGVbIm1pbl9ydCJdOgogICAgICAgICAgICBzbS5taW5fcnQgPSBlWyJtaW5fcnQiXQogICAgICAgIGlmIHNtLm1heF9ydCA8IGVbIm1heF9ydCJdOgogICAgICAgICAgICBzbS5tYXhfcnQgPSBlWyJtYXhfcnQiXQogICAgICAgICAgICBzbS5tYXhfcnRfdHMgPSBlWyJtYXhfcnRfdHMiXQogICAgICAgIHNtLm51bV9hY3Rpb25zICs9IGVbIm51bV9hY3Rpb25zIl0KICAgICAgICBzbS5udW1fZmFpbGVkICs9IGVbIm51bV9mYWlsZWQiXQogICAgICAgIHNtLmR1cmF0aW9uICs9IGVbImR1cmF0aW9uIl0KICAgICAgICBpZiBzbS5hdmdfcXMgPCBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdOgogICAgICAgICAgICBzbS5hdmdfcXMgPSBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdCiAgICAgICAgaWYgc20ubWF4X3FzIDwgZVsibWF4X3d0aHJlYWRfcXNpemUiXToKICAgICAgICAgICAgc20ubWF4X3FzID0gZVsibWF4X3d0aHJlYWRfcXNpemUiXQogICAgICAgIGlmIHNtLm1heF9hd3QgPCBlWyJhdmdfd3QiXToKICAgICAgICAgICAgc20ubWF4X2F3dCA9IGVbImF2Z193dCJdCiAgICAgICAgaWYgc20ubWF4X3d0IDwgZVsibWF4X3d0Il06CiAgICAgICAgICAgIHNtLm1heF93dCA9IGVbIm1heF93dCJdCiAgICAgICAgaWYgc20ubWVtIDwgcF9tZW06CiAgICAgICAgICAgIHNtLm1lbSA9IHBfbWVtCiAgICAgICAgaWYgc20uY3B1IDwgcF9jcHU6CiAgICAgICAgICAgIHNtLmNwdSA9IHBfY3B1CiAgICAgICAgc20uY3B1X3RpbWVfbnMgKz0gZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdCiAgICAgICAgc20uYXBzX2NvdW50ICs9IDEuMAogICAgICAgIHNtLmFwc190YXJnZXRfc3VtICs9IGVbImFwc190YXJnZXRfcmF0ZSJdCgogICAgICAgIGlmIGxlbihzbS5jaGFydF90X2xpc3QpID09IC0xOgogICAgICAgICAgICBzbS5jaGFydF90X2xpc3QuYXBwZW5kKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2JlZ2luIl0ucmVwbGFjZSgiXyIsICJUIikpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfYXBzIl0pKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjNmIiUoZVsibnVtX2ZhaWxlZCJdL2VbImR1cmF0aW9uIl0pKQogICAgICAgICAgICBdKQoKICAgICAgICBzbS5jaGFydF90X2xpc3QuYXBwZW5kKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2VuZCJdLnJlcGxhY2UoIl8iLCAiVCIpKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX2FwcyJdKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4zZiIlKGVbIm51bV9mYWlsZWQiXS9lWyJkdXJhdGlvbiJdKSkKICAgICAgICAgICAgIF0pCgogICAgICAgICMgWycyMDE4LTA0LTEwVDIwOjQwOjMzWicsIDEsIDUsIDEwLCAyMCwgMjUsIDMwIF0KICAgICAgICBpZiBsZW4oc20uY2hhcnRfcF9saXN0KSA9PSAtMToKICAgICAgICAgICAgc20uY2hhcnRfcF9saXN0LmFwcGVuZCgKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2JlZ2luIl0ucmVwbGFjZSgiXyIsICJUIikpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWluX3J0Il0pKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19ydCJdKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk1LjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtYXhfcnQiXSkpCiAgICAgICAgICAgICAgICBdKQoKICAgICAgICBzbS5jaGFydF9wX2xpc3QuYXBwZW5kKAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2VuZCJdLnJlcGxhY2UoIl8iLCAiVCIpKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWluX3J0Il0pKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX3J0Il0pKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk1LjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWF4X3J0Il0pKQogICAgICAgICAgICBdKQoKICAgICAgICAjIGpoaCAuLi4KICAgICAgICBmb3Iga2V5IGluIGVbInVzZXJfYWN0aW9ucyJdLmtleXMoKToKICAgICAgICAgICAgYXIgPSBlWyJ1c2VyX2FjdGlvbnMiXVtrZXldCiAgICAgICAgICAgIGh0dCA9IEhpc3RvZ3JhbS5mcm9tU3RyaW5nKGFyWyJoaXN0b2dyYW1fcnQiXSkKICAgICAgICAgICAgI3ByaW50KGFyWyJuYW1lIl0gKyAiIC0gIiArICIlLjNmIiUoaHR0LmdldE1lYW4oKS8xMDAwLjApKQogICAgICAgICAgICBpZiBqaGguaGFzX2tleShrZXkpOgogICAgICAgICAgICAgICAgamhoW2tleV0uYWRkKGh0dCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGpoaFtrZXldID0gSGlzdG9ncmFtKDEsIDM2MDAqMTAwMCoxMDAwLCAzKQogICAgICAgICAgICAgICAgamhoW2tleV0uYWRkKGh0dCkKICAgICAgICAgICAgI3ByaW50KGFyWyJuYW1lIl0gKyAiIC0gIiArICIlLjNmIiUoamhoW2tleV0uZ2V0TWVhbigpLzEwMDAuMCkgKyAiIC0gJWQiJShqaGhba2V5XS5nZXRUb3RhbENvdW50KCkpKQoKICAgICAgICAjIGpzcyAuLi4KICAgICAgICBmb3Iga2V5IGluIGVbInVzZXJfYWN0aW9ucyJdLmtleXMoKToKICAgICAgICAgICAgYXIgPSBlWyJ1c2VyX2FjdGlvbnMiXVtrZXldCiAgICAgICAgICAgIGlmIGpzcy5oYXNfa2V5KGtleSk6CiAgICAgICAgICAgICAgICBzbXggPSBqc3Nba2V5XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgc214ID0ganNzW2tleV0gPSBTdW1tYXJ5KCkKICAgICAgICAgICAgICAgIHNteC5uYW1lID0gZVsiYm1fbmFtZSJdCgogICAgICAgICAgICBpZiBzbXgubWluX3J0ID4gYXJbIm1pbl9ydCJdOgogICAgICAgICAgICAgICAgc214Lm1pbl9ydCA9IGFyWyJtaW5fcnQiXQogICAgICAgICAgICBpZiBzbXgubWF4X3J0IDwgYXJbIm1heF9ydCJdOgogICAgICAgICAgICAgICAgc214Lm1heF9ydCA9IGFyWyJtYXhfcnQiXQogICAgICAgICAgICAgICAgc214Lm1heF9ydF90cyA9IGFyWyJtYXhfcnRfdHMiXQogICAgICAgICAgICBzbXgubnVtX2FjdGlvbnMgKz0gYXJbIm51bV9hY3Rpb25zIl0KICAgICAgICAgICAgc214Lm51bV9mYWlsZWQgKz0gYXJbIm51bV9mYWlsZWQiXQoKICAgICAgICAgICAgc214LmR1cmF0aW9uICs9IGVbImR1cmF0aW9uIl0KICAgICAgICAgICAgaWYgc214LmF2Z19xcyA8IGVbImF2Z193dGhyZWFkX3FzaXplIl06CiAgICAgICAgICAgICAgICBzbXguYXZnX3FzID0gZVsiYXZnX3d0aHJlYWRfcXNpemUiXQogICAgICAgICAgICBpZiBzbXgubWF4X3FzIDwgZVsibWF4X3d0aHJlYWRfcXNpemUiXToKICAgICAgICAgICAgICAgIHNteC5tYXhfcXMgPSBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdCiAgICAgICAgICAgIGlmIHNteC5tYXhfYXd0IDwgZVsiYXZnX3d0Il06CiAgICAgICAgICAgICAgICBzbXgubWF4X2F3dCA9IGVbImF2Z193dCJdCiAgICAgICAgICAgIGlmIHNteC5tYXhfd3QgPCBlWyJtYXhfd3QiXToKICAgICAgICAgICAgICAgIHNteC5tYXhfd3QgPSBlWyJtYXhfd3QiXQogICAgICAgICAgICBpZiBzbXgubWVtIDwgcF9tZW06CiAgICAgICAgICAgICAgICBzbXgubWVtID0gcF9tZW0KICAgICAgICAgICAgaWYgc214LmNwdSA8IHBfY3B1OgogICAgICAgICAgICAgICAgc214LmNwdSA9IHBfY3B1CiAgICAgICAgICAgIHNteC5jcHVfdGltZV9ucyArPSBlWyJwcm9jZXNzX2NwdV90aW1lX25zIl0KCiAgICBwcmludF9hY3Rpb25fc3VtbWFyeSgpCiAgICBwcmludF9nbG9iYWxfc3VtbWFyeSgpCiAgICBwcmludGYodHJhaWxlcikKCiAgICByZXBvcnRfaHRtbF9maC5jbG9zZSgpCgogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIiAgICAgIH1cbiIpCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgiICAgIH1cbiIpCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgiICB9XG4iKQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIn1cbiIpCiAgICByZXBvcnRfanNvbl9maC5jbG9zZSgpCgogICAgb3MuY2hkaXIoY3dkKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGlmIGxlbihzeXMuYXJndikgPj0gMzoKICAgICAgICBmaWxlbmFtZSA9IHN5cy5hcmd2WzFdCiAgICAgICAgY29uZmlnRmlsZW5hbWUgPSBzeXMuYXJndlsyXQogICAgICAgIGNyZWF0ZVJlcG9ydChmaWxlbmFtZSwgY29uZmlnRmlsZW5hbWUpCg==";

    /** Private constructor to prevent instantiation. */
    public report_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     */
    public static void main(String... args) {
        String mainScriptFilename = "report.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decodedBytes);
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
