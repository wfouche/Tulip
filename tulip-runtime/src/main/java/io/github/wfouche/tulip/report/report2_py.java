package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8.name());
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decompress(decodedBytes));
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
