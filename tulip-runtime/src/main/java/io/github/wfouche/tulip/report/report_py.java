package io.github.wfouche.tulip.report;

/// usr/bin/env jbang "$0" "$@" ; exit $?

// spotless:off
// DEPS com.google.code.gson:gson:2.13.1
// DEPS org.hdrhistogram:HdrHistogram:2.2.2
// DEPS org.python:jython-slim:2.7.4
// JAVA 21
// spotless:on

import java.util.Base64;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBwcmludF9mdW5jdGlvbg0KaW1wb3J0IGRhdGV0aW1lDQppbXBvcnQganNvbg0KaW1wb3J0IHJlDQppbXBvcnQgc3lzDQppbXBvcnQgb3JnLkhkckhpc3RvZ3JhbS5IaXN0b2dyYW0gYXMgSGlzdG9ncmFtDQppbXBvcnQgb3MNCmZyb20gY29sbGVjdGlvbnMgaW1wb3J0IE9yZGVyZWREaWN0DQppbXBvcnQgamF2YS5pby5QcmludFN0cmVhbSBhcyBQcmludFN0cmVhbQ0KaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGFzIEJ5dGVBcnJheU91dHB1dFN0cmVhbQ0KDQojIC8vLyBqYmFuZw0KIyByZXF1aXJlcy1qeXRob24gPSAiPT0yLjcuNCINCiMgcmVxdWlyZXMtamF2YSA9ICI+PTIxIg0KIyBkZXBlbmRlbmNpZXMgPSBbDQojICAgImNvbS5nb29nbGUuY29kZS5nc29uOmdzb246Mi4xMy4xIiwNCiMgICAib3JnLmhkcmhpc3RvZ3JhbTpIZHJIaXN0b2dyYW06Mi4yLjIiDQojIF0NCiMgW3B5dGhvbi1qdm1dDQojICAgZGVidWcgPSBmYWxzZQ0KIyAvLy8NCg0Kc3VtbWFyeV9odG1sXzEgPSAnJyc8IURPQ1RZUEUgaHRtbD4NCjxodG1sIGxhbmc9ImVuIj4NCjxoZWFkPg0KPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCiAgICBkaXYuaGlzdG8gew0KICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW4NCiAgICB9DQo8L3N0eWxlPg0KDQo8IS0tTG9hZCB0aGUgQUpBWCBBUEktLT4NCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vanNhcGkiPjwvc2NyaXB0Pg0KDQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoNCiAgICBpZiAod2luZG93LkZpbGUgJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGVMaXN0ICYmIHdpbmRvdy5CbG9iKSB7DQogICAgICAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuDQogICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ1RoZSBGaWxlIEFQSXMgYXJlIG5vdCBmdWxseSBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLicpOw0KICAgIH0NCg0KICAgIC8vIExvYWQgdGhlIFZpc3VhbGl6YXRpb24gQVBJIGFuZCB0aGUgY29yZWNoYXJ0IHBhY2thZ2UuDQogICAgZ29vZ2xlLmxvYWQoJ3Zpc3VhbGl6YXRpb24nLCAnMS4wJywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOw0KDQogICAgLy8gU2V0IGEgY2FsbGJhY2sgdG8gcnVuIHdoZW4gdGhlIEdvb2dsZSBWaXN1YWxpemF0aW9uIEFQSSBpcyBsb2FkZWQuDQogICAgZ29vZ2xlLnNldE9uTG9hZENhbGxiYWNrKGRyYXdJbml0aWFsQ2hhcnQpOw0KDQogICAgdmFyIGNoYXJ0RGF0YSA9IG51bGw7DQogICAgdmFyIGNoYXJ0ID0gbnVsbDsNCg0KICAgIGZ1bmN0aW9uIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKSB7DQogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPCBoaXN0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICBuYW1lcy5wdXNoKCdVbmtub3duJyk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc2VyaWVzID0gW107DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdG9zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBzZXJpZXMgPSBhcHBlbmREYXRhU2VyaWVzKGhpc3Rvc1tpXSwgbmFtZXNbaV0sIHNlcmllcyk7DQogICAgICAgIH0NCg0KICAgICAgICBjaGFydERhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHNlcmllcyk7DQogICAgfQ0KDQonJycNCg0KdGV4dF9ibG9ja18xID0gJycnDQogICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsNCiAgICAgICAgLy8gQ29ubmVjdCB0aGUgY2hvb3NlIGZpbGVzIGJ1dHRvbjoNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVNlbGVjdCwgZmFsc2UpOw0KDQogICAgICAgIC8vIExvYWQgc29tZSBzdGF0aWMgZXhhbXBsZSBkYXRhOg0KICAgICAgICB2YXIgZGF0YTFTdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYjZGF0YV8xIikuaW5uZXJIVE1MLnRyaW0oKTsNCiAgICAgICAgdmFyIGRhdGEyU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMiIpLmlubmVySFRNTC50cmltKCk7DQogICAgICAgIHZhciBkYXRhM1N0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXzMiKS5pbm5lckhUTUwudHJpbSgpOw0KICAgICAgICB2YXIgaGlzdG9zID0gW2RhdGEzU3RyLCBkYXRhMlN0ciwgZGF0YTFTdHJdOw0KICAgICAgICB2YXIgbmFtZXMgPSBbJ0EnLCAnQicsICdDJ107DQoNCiAgICAgICAgc2V0Q2hhcnREYXRhKG5hbWVzLCBoaXN0b3MpOw0KICAgICAgICBkcmF3Q2hhcnQoKTsNCiAgICB9DQonJycNCg0Kc3VtbWFyeV9odG1sXzIgPSAnJycNCiAgICB2YXIgbWF4UGVyY2VudGlsZSA9IDEwMDAwMDA7DQoNCiAgICBmdW5jdGlvbiBkcmF3Q2hhcnQoKSB7DQoNCiAgICAgICAgdmFyIHRpY2tzID0NCiAgICAgICAgICAgICAgICBbe3Y6MSxmOicwJSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMCxmOic5MCUnfSwNCiAgICAgICAgICAgICAgICAgICAge3Y6MTAwLGY6Jzk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwLGY6Jzk5LjklJ30sDQogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwLGY6Jzk5Ljk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAsZjonOTkuOTk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwLGY6Jzk5Ljk5OTklJ30sDQogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwMDAwLGY6Jzk5Ljk5OTk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMDAsZjonOTkuOTk5OTk5JSd9XTsNCg0KICAgICAgICB2YXIgdW5pdFNlbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0aW1lVW5pdFNlbGVjdGlvbiIpOw0KICAgICAgICB2YXIgdW5pdFNlbEluZGV4ID0gdW5pdFNlbGVjdGlvbi5zZWxlY3RlZEluZGV4Ow0KICAgICAgICB2YXIgdW5pdFRleHQgPSB1bml0U2VsZWN0aW9uLm9wdGlvbnNbdW5pdFNlbEluZGV4XS5pbm5lckhUTUw7DQoNCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7DQovLyAgICAgICAgICAgIHRpdGxlOiAnUGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbicsDQogICAgICAgICAgICBoZWlnaHQ6IDQ4MCwNCi8vICAgICAgICAgICAgaEF4aXM6IHt0aXRsZTogJ1BlcmNlbnRpbGUnLCBtaW5WYWx1ZTogMCwgbG9nU2NhbGU6IHRydWUsIHRpY2tzOnRpY2tzIH0sDQogICAgICAgICAgICBoQXhpczogew0KICAgICAgICAgICAgICAgIHRpdGxlOiAiUGVyY2VudGlsZSIsDQogICAgICAgICAgICAgICAgbWluVmFsdWU6IDEsIGxvZ1NjYWxlOiB0cnVlLCB0aWNrczp0aWNrcywNCiAgICAgICAgICAgICAgICB2aWV3V2luZG93TW9kZTonZXhwbGljaXQnLA0KICAgICAgICAgICAgICAgIHZpZXdXaW5kb3c6ew0KICAgICAgICAgICAgICAgICAgICBtYXg6bWF4UGVyY2VudGlsZSwNCiAgICAgICAgICAgICAgICAgICAgbWluOjENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdkF4aXM6IHt0aXRsZTogJ0xhdGVuY3kgKCcgKyB1bml0VGV4dCArICcpJywgbWluVmFsdWU6IDAgfSwNCiAgICAgICAgICAgIGxlZ2VuZDoge3Bvc2l0aW9uOiAnYm90dG9tJ30NCiAgICAgICAgfTsNCg0KDQogICAgICAgIC8vIGFkZCB0b29sdGlwcyB3aXRoIGNvcnJlY3QgcGVyY2VudGlsZSB0ZXh0IHRvIGRhdGE6DQogICAgICAgIHZhciBjb2x1bW5zID0gWzBdOw0KICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNoYXJ0RGF0YS5nZXROdW1iZXJPZkNvbHVtbnMoKTsgaSsrKSB7DQogICAgICAgICAgICBjb2x1bW5zLnB1c2goaSk7DQogICAgICAgICAgICBjb2x1bW5zLnB1c2goew0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLA0KICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3Rvb2x0aXAnDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjYWxjOiAoZnVuY3Rpb24gKGopIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkdCwgcm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGlsZSA9IDEwMC4wIC0gKDEwMC4wL2R0LmdldFZhbHVlKHJvdywgMCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LmdldENvbHVtbkxhYmVsKGopICsgJzogJyArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRpbGUudG9QcmVjaXNpb24oNykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCVcXCdpbGUgPSAnICsgZHQuZ2V0VmFsdWUocm93LCBqKSArICcgJyArIHVuaXRUZXh0DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KShpKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHZpZXcgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uRGF0YVZpZXcoY2hhcnREYXRhKTsNCiAgICAgICAgdmlldy5zZXRDb2x1bW5zKGNvbHVtbnMpOw0KDQogICAgICAgIGNoYXJ0ID0gbmV3IGdvb2dsZS52aXN1YWxpemF0aW9uLkxpbmVDaGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnRfZGl2JykpOw0KICAgICAgICBjaGFydC5kcmF3KHZpZXcsIG9wdGlvbnMpOw0KDQogICAgICAgIGdvb2dsZS52aXN1YWxpemF0aW9uLmV2ZW50cy5hZGRMaXN0ZW5lcihjaGFydCwgJ3JlYWR5JywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY2hhcnRfZGl2LmlubmVySFRNTCA9ICc8aW1nIHNyYz0iJyArIGNoYXJ0LmdldEltYWdlVVJJKCkgKyAnIj4nOw0KICAgICAgICB9KTsNCg0KICAgIH0NCjwvc2NyaXB0Pg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIGZ1bmN0aW9uIGFwcGVuZERhdGFTZXJpZXMoaGlzdG8sIG5hbWUsIGRhdGFTZXJpZXMpIHsNCiAgICAgICAgdmFyIHNlcmllczsNCiAgICAgICAgdmFyIHNlcmllc0NvdW50Ow0KICAgICAgICBpZiAoZGF0YVNlcmllcy5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgc2VyaWVzID0gWyBbJ1gnLCBuYW1lXSBdOw0KICAgICAgICAgICAgc2VyaWVzQ291bnQgPSAxOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2VyaWVzID0gZGF0YVNlcmllczsNCiAgICAgICAgICAgIHNlcmllc1swXS5wdXNoKG5hbWUpOw0KICAgICAgICAgICAgc2VyaWVzQ291bnQgPSBzZXJpZXNbMF0ubGVuZ3RoIC0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBsaW5lcyA9IGhpc3RvLnNwbGl0KCJcXG4iKTsNCg0KICAgICAgICB2YXIgc2VyaWVzSW5kZXggPSAxOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBsaW5lLnRyaW0oKS5zcGxpdCgvWyBdKy8pOw0KDQogICAgICAgICAgICBpZiAobGluZVswXSAhPSAnIycgJiYgdmFsdWVzLmxlbmd0aCA9PSA0KSB7DQoNCiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTsNCiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodmFsdWVzWzNdKTsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNOYU4oeCkgJiYgIWlzTmFOKHkpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllc0luZGV4ID49IHNlcmllcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wdXNoKFt4XSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc2VyaWVzW3Nlcmllc0luZGV4XS5sZW5ndGggPCBzZXJpZXNDb3VudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKHkpOw0KICAgICAgICAgICAgICAgICAgICBzZXJpZXNJbmRleCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHdoaWxlIChzZXJpZXNJbmRleCA8IHNlcmllcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIHNlcmllc1tzZXJpZXNJbmRleF0ucHVzaChudWxsKTsNCiAgICAgICAgICAgIHNlcmllc0luZGV4Kys7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gc2VyaWVzOw0KICAgIH0NCjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgICBmdW5jdGlvbiB0aW1lVW5pdHNTZWxlY3RlZChldnQpIHsNCiAgICAgICAgZHJhd0NoYXJ0KCk7DQogICAgICAgIHJldHVybiB7dHlwZWQ6ICcnfTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBkb0V4cG9ydChldmVudCkgew0KICAgICAgICBzYXZlU3ZnQXNQbmcoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJyksICdIaXN0b2dyYW0nLCAyLjApOw0KICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307DQogICAgfQ0KPC9zY3JpcHQ+DQoNCjxzY3JpcHQ+DQogICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHsNCiAgICAgICAgdmFyIGZpbGVzID0gZXZ0LnRhcmdldC5maWxlczsgLy8gRmlsZUxpc3Qgb2JqZWN0DQogICAgICAgIHZhciBmaWxlRGlzcGxheUFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZURpc3BsYXlBcmVhJyk7DQoNCiAgICAgICAgdmFyIG5hbWVzID0gW107DQogICAgICAgIHZhciBoaXN0b3MgPSBbXTsNCg0KICAgICAgICBmaWxlRGlzcGxheUFyZWEuaW5uZXJUZXh0ID0gImZpbGUgc2VsZWN0ZWQuLi5cXG4iOw0KDQogICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRmlsZUxpc3QgYW5kIHJlbmRlciBpbWFnZSBmaWxlcyBhcyB0aHVtYm5haWxzLg0KICAgICAgICBmb3IgKHZhciBpID0gMCwgZjsgZiA9IGZpbGVzW2ldOyBpKyspIHsNCiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KDQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGZ1bmN0aW9uKHRoZUZpbGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgICAgICBoaXN0b3MucHVzaChlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGVzY2FwZSh0aGVGaWxlLm5hbWUpKTsNCiAgICAgICAgICAgICAgICAgICAgZmlsZURpc3BsYXlBcmVhLmlubmVyVGV4dCA9ICIgUGxvdHRpbmcgaW5wdXQgZnJvbTogIiArIG5hbWVzICsgIlxcbiI7DQogICAgICAgICAgICAgICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsNCiAgICAgICAgICAgICAgICAgICAgZHJhd0NoYXJ0KCk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pKGYpOw0KDQogICAgICAgICAgICAvLyBSZWFkIGluIHRoZSBpbWFnZSBmaWxlIGFzIGEgZGF0YSBVUkwuDQogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmKTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQo8L3NjcmlwdD4NCg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIChmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIG91dCQgPSB0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiBleHBvcnRzIHx8IHRoaXM7DQoNCiAgICAgICAgdmFyIGRvY3R5cGUgPSAnPD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+JzsNCg0KICAgICAgICBmdW5jdGlvbiBpbmxpbmVJbWFnZXMoY2FsbGJhY2spIHsNCiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdmcgaW1hZ2UnKTsNCiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1hZ2VzLmxlbmd0aDsNCiAgICAgICAgICAgIGlmIChsZWZ0ID09IDApIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAoZnVuY3Rpb24oaW1hZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eaHR0cC8udGVzdChocmVmKSAmJiAhKG5ldyBSZWdFeHAoJ14nICsgd2luZG93LmxvY2F0aW9uLmhvc3QpLnRlc3QoaHJlZikpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVuZGVyIGVtYmVkZGVkIGltYWdlcyBsaW5raW5nIHRvIGV4dGVybmFsIGhvc3RzLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKTsNCiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVmdCA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pKGltYWdlc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzdHlsZXMoZG9tKSB7DQogICAgICAgICAgICB2YXIgY3NzID0gIiI7DQogICAgICAgICAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChzaGVldHNbaV0uaGFzT3duUHJvcGVydHkoJ2Nzc1J1bGVzJykpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzID0gc2hlZXRzW2ldLmNzc1J1bGVzOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihydWxlLnN0eWxlKSAhPSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArPSBydWxlLnNlbGVjdG9yVGV4dCArICIgeyAiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgIiB9XFxuIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTsNCiAgICAgICAgICAgIHMuaW5uZXJIVE1MID0gIjwhW0NEQVRBW1xcbiIgKyBjc3MgKyAiXFxuXV0+IjsNCg0KICAgICAgICAgICAgdmFyIGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZWZzJyk7DQogICAgICAgICAgICBkZWZzLmFwcGVuZENoaWxkKHMpOw0KICAgICAgICAgICAgcmV0dXJuIGRlZnM7DQogICAgICAgIH0NCg0KICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaSA9IGZ1bmN0aW9uKGVsLCBzY2FsZUZhY3RvciwgY2IpIHsNCiAgICAgICAgICAgIHNjYWxlRmFjdG9yID0gc2NhbGVGYWN0b3IgfHwgMTsNCg0KICAgICAgICAgICAgaW5saW5lSW1hZ2VzKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IGVsLmNsb25lTm9kZSh0cnVlKTsNCiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmdldEF0dHJpYnV0ZSgnd2lkdGgnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfHwgY2xvbmUuc3R5bGUud2lkdGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IG91dCQuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IHBhcnNlSW50KA0KICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfHwgY2xvbmUuc3R5bGUuaGVpZ2h0DQogICAgICAgICAgICAgICAgICAgICAgICB8fCBvdXQkLmdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpDQogICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgIHZhciB4bWxucyA9ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zLyI7DQoNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCAiMS4xIik7DQogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlTlMoeG1sbnMsICJ4bWxucyIsICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIpOw0KICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnM6eGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOw0KICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgid2lkdGgiLCB3aWR0aCAqIHNjYWxlRmFjdG9yKTsNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIGhlaWdodCAqIHNjYWxlRmFjdG9yKTsNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwICIgKyB3aWR0aCArICIgIiArIGhlaWdodCk7DQogICAgICAgICAgICAgICAgb3V0ZXIuYXBwZW5kQ2hpbGQoY2xvbmUpOw0KDQogICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKHN0eWxlcyhjbG9uZSksIGNsb25lLmZpcnN0Q2hpbGQpOw0KDQogICAgICAgICAgICAgICAgdmFyIHN2ZyA9IGRvY3R5cGUgKyBvdXRlci5pbm5lckhUTUw7DQogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcgKyB3aW5kb3cuYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ZnKSkpOw0KICAgICAgICAgICAgICAgIGlmIChjYikgew0KICAgICAgICAgICAgICAgICAgICBjYih1cmkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgb3V0JC5zYXZlU3ZnQXNQbmcgPSBmdW5jdGlvbihlbCwgbmFtZSwgc2NhbGVGYWN0b3IpIHsNCiAgICAgICAgICAgIG91dCQuc3ZnQXNEYXRhVXJpKGVsLCBzY2FsZUZhY3RvciwgZnVuY3Rpb24odXJpKSB7DQogICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gdXJpOw0KICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfSkoKTsNCjwvc2NyaXB0Pg0KDQo8c3R5bGU+DQogICAgLnNsaWRlci13aWR0aDUwMA0KICAgIHsNCiAgICAgICAgd2lkdGg6IDUwMHB4Ow0KICAgIH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCg0KPGJvZHk+DQoNCl9fQ0hBUlRTX1RFWFRfXw0KDQo8aDI+UGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+DQoNCjxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZmlsZXMiIG5hbWU9ImZpbGVzW10iIG11bHRpcGxlIC8+DQoNCjxwcmUgaWQ9ImZpbGVEaXNwbGF5QXJlYSI+UGxlYXNlIHNlbGVjdCBmaWxlKHMpIGFib3ZlLjwvcHJlPg0KDQo8IS0tRGl2IHRoYXQgd2lsbCBob2xkIHRoZSBjaGFydC0tPg0KPGRpdiBpZD0iY2hhcnRfZGl2Ij5Ob25lIExvYWRlZDwvZGl2Pg0KDQpMYXRlbmN5IHRpbWUgdW5pdHM6DQo8c2VsZWN0IG5hbWU9InVuaXRzIiBzaXplPSIxIiBpZD0idGltZVVuaXRTZWxlY3Rpb24iIG9uQ2hhbmdlPSJ0aW1lVW5pdHNTZWxlY3RlZCgpIj4NCiAgICA8b3B0aW9uIHZhbHVlPSJMYXRlbmN5IChzZWNvbmRzKSI+c2Vjb25kczwvb3B0aW9uPg0KICAgIDxvcHRpb24gc2VsZWN0ZWQgdmFsdWU9IkxhdGVuY3kgKG1pbGxpc2Vjb25kcykiPm1pbGxpc2Vjb25kczwvb3B0aW9uPg0KICAgIDxvcHRpb24gdmFsdWU9IkxhdGVuY3kgKHFzKSI+bWljcm9zZWNvbmRzPC9vcHRpb24+DQogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAobmFub3NlY29uZHMpIj5uYW5vc2Vjb25kczwvb3B0aW9uPg0KPC9zZWxlY3Q+DQo8YnV0dG9uIHR5cGU9J2J1dHRvbicgb25jbGljaz0nZG9FeHBvcnQoZXZlbnQpJz5FeHBvcnQgSW1hZ2U8L2J1dHRvbj4NCg0KJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7DQo8cD4NClBlcmNlbnRpbGUgcmFuZ2U6DQoNCjxpbnB1dCB0eXBlPSJyYW5nZSIgY2xhc3M9InNsaWRlci13aWR0aDUwMCINCiAgICAgICBtaW49IjEiIG1heD0iOCIgdmFsdWU9IjciIHN0ZXA9IjEiDQogICAgICAgd2lkdGg9IjMwMHB4Ig0KICAgICAgIG9uY2hhbmdlPSJzaG93VmFsdWUodGhpcy52YWx1ZSkiIC8+DQo8c3BhbiBpZD0icGVyY2VudGlsZVJhbmdlIj45OS45OTk5OSU8L3NwYW4+DQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgZnVuY3Rpb24gc2hvd1ZhbHVlKG5ld1ZhbHVlKSB7DQogICAgICAgIHZhciB4ID0gTWF0aC5wb3coMTAsIG5ld1ZhbHVlKTsNCiAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMCAvIHgpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVyY2VudGlsZVJhbmdlIikuaW5uZXJIVE1MPXBlcmNlbnRpbGUgKyAiJSI7DQogICAgICAgIG1heFBlcmNlbnRpbGUgPSB4Ow0KICAgICAgICBkcmF3Q2hhcnQoKTsNCiAgICAgICAgcmV0dXJuIHt0eXBlZDogJyd9Ow0KICAgIH0NCjwvc2NyaXB0Pg0KPC9wPg0KJycnDQoNCnN1bW1hcnlfaHRtbF8zID0gJycnPC9ib2R5Pg0KPC9odG1sPg0KJycnDQoNCiMgPGgyPjxhIGhyZWY9Imh0dHBzOi8vd2ZvdWNoZS5naXRodWIuaW8vVHVsaXAtZG9jcyI+X19ERVNDMV9fPC9hPiAvIF9fREVTQzJfXzwvaDI+DQojIDxoMj5fX0RFU0MxX18gLyBfX0RFU0MyX188L2gyPg0KDQpoZWFkZXIgPSAnJyc8IURPQ1RZUEUgaHRtbD4NCjxodG1sIGxhbmc9ImVuIj4NCg0KPHN0eWxlPg0KdGFibGUsIHRoLCB0ZCB7DQogIGJvcmRlcjoxcHggc29saWQgYmxhY2s7IGZvbnQtc2l6ZToxNnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQp0aDpudGgtY2hpbGQobisxNCkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNFNUU0RTI7DQp9DQp0ZDpudGgtY2hpbGQobisxNCkgew0KICAgIGJhY2tncm91bmQtY29sb3I6ICNFNUU0RTI7DQp9DQo8L3N0eWxlPg0KDQo8Ym9keT4NCg0KPGgyPjxhIGhyZWY9Imh0dHBzOi8vd2ZvdWNoZS5naXRodWIuaW8vVHVsaXAtZG9jcyI+X19ERVNDMV9fPC9hPiAvIF9fREVTQzJfXzwvaDI+DQoNCjx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJSI+DQogIDx0cj4NCiAgICA8dGg+QmVuY2htYXJrPC90aD4NCiAgICA8dGg+UnVuIElkPC90aD4NCiAgICA8dGg+I048L3RoPg0KICAgIDx0aD4jRjwvdGg+DQogICAgPHRoPkR1cmF0aW9uPC90aD4NCiAgICA8dGg+QXBzPC90aD4NCiAgICA8dGg+QXZnX1J0PC90aD4NCiAgICA8dGg+U3RkZXY8L3RoPg0KICAgIDx0aD5NaW5fUnQ8L3RoPg0KICAgIDx0aD5wOTBfUnQ8L3RoPg0KICAgIDx0aD5wOTlfUnQ8L3RoPg0KICAgIDx0aD5NYXhfUnQ8L3RoPg0KICAgIDx0aD5NYXhfUnR0PC90aD4NCiAgICA8dGg+QVFTPC90aD4NCiAgICA8dGg+TVFTPC90aD4NCiAgICA8dGg+QVdUPC90aD4NCiAgICA8dGg+TVdUPC90aD4NCiAgICA8dGg+Q1BVX1Q8L3RoPg0KICAgIDx0aD5DUFU8L3RoPg0KICAgIDx0aD5NRU08L3RoPg0KICA8L3RyPg0KJycnDQoNCmJlbmNobWFya19jb2x1bW5zID0gJycnDQogIDx0cj4NCiAgICA8dGg+QmVuY2htYXJrPC90aD4NCiAgICA8dGg+UnVuIElkPC90aD4NCiAgICA8dGg+I048L3RoPg0KICAgIDx0aD4jRjwvdGg+DQogICAgPHRoPkR1cmF0aW9uPC90aD4NCiAgICA8dGg+QXBzPC90aD4NCiAgICA8dGg+QXZnX1J0PC90aD4NCiAgICA8dGg+U3RkZXY8L3RoPg0KICAgIDx0aD5NaW5fUnQ8L3RoPg0KICAgIDx0aD5wOTBfUnQ8L3RoPg0KICAgIDx0aD5wOTlfUnQ8L3RoPg0KICAgIDx0aD5NYXhfUnQ8L3RoPg0KICAgIDx0aD5NYXhfUnR0PC90aD4NCiAgICA8dGg+QVFTPC90aD4NCiAgICA8dGg+TVFTPC90aD4NCiAgICA8dGg+QVdUPC90aD4NCiAgICA8dGg+TVdUPC90aD4NCiAgICA8dGg+Q1BVX1Q8L3RoPg0KICAgIDx0aD5DUFU8L3RoPg0KICAgIDx0aD5NRU08L3RoPg0KICA8L3RyPg0KJycnDQoNCmJlbmNobWFya19oZWFkZXIgPSAnJycNCiAgPHRyPg0KICAgIDx0ZD4lczwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogICAgPHRkPjwvdGQ+DQogIDwvdHI+DQonJycNCg0KYmVuY2htYXJrX2VtcHR5X3JvdyA9ICcnJw0KICA8dHI+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogICAgPHRkPiZuYnNwOzwvdGQ+DQogIDwvdHI+DQonJycNCg0KYmVuY2htYXJrX2RldGFpbF9yb3cgPSAnJycNCiAgPHRyPg0KICAgIDx0ZD4lczwvdGQ+DQogICAgPHRkPiVkPC90ZD4NCiAgICA8dGQ+JWQ8L3RkPg0KICAgIDx0ZD4lZDwvdGQ+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+JS4zZjwvdGQ+DQogICAgPHRkPiUuM2YgbXM8L3RkPg0KICAgIDx0ZD4lLjFmIG1zPC90ZD4NCiAgICA8dGQ+JS4xZiBtczwvdGQ+DQogICAgPHRkPiUuMWYgbXM8L3RkPg0KICAgIDx0ZD4lLjFmIG1zPC90ZD4NCiAgICA8dGQ+JS4xZiBtczwvdGQ+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+JS4xZjwvdGQ+DQogICAgPHRkPiVkPC90ZD4NCiAgICA8dGQ+JS4xZjwvdGQ+DQogICAgPHRkPiUuMWY8L3RkPg0KICAgIDx0ZD4lczwvdGQ+DQogICAgPHRkPiUuMWY8L3RkPg0KICAgIDx0ZD4lLjFmPC90ZD4NCiAgPC90cj4NCicnJw0KDQpiZW5jaG1hcmtfc3VtbWFyeV9yb3cgPSAnJycNCiAgPHRyPg0KICAgIDx0ZD4lczwvdGQ+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4NCiAgICA8dGQ+PGI+PHRhZzE+JWQ8L3RhZzE+PC9iPjwvdGQ+DQogICAgPHRkPjxiPiVzPC9iPjwvdGQ+DQogICAgPHRkPjxiPjx0YWcyPiUuM2Y8L3RhZzI+PC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuM2YgbXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+DQogICAgPHRkPjxiPiVzPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+DQogICAgPHRkPjxiPiVzPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPg0KICA8L3RyPg0KJycnDQoNCnRyYWlsZXIgPSAnJycNCjwvdGFibGU+DQo8L2JvZHk+DQo8L2h0bWw+DQonJycNCg0KY2hhcnRzX2h0bWwgPSAnJycNCjxoMj5BY3Rpb25zIHBlciBTZWNvbmQ8L2gyPg0KICA8ZGl2IGlkPSJtYWluIiBzdHlsZT0id2lkdGg6IDEwMCU7aGVpZ2h0OjQwMHB4OyI+PC9kaXY+DQogIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9lY2hhcnRzLzYuMC4wL2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Il9fSlNfVF9DSEFSVF9fIj48L3NjcmlwdD4NCjxoMj5SZXNwb25zZSBUaW1lcyAobXMpPC9oMj4NCiAgPGRpdiBpZD0ibWFpbl9wIiBzdHlsZT0id2lkdGg6IDEwMCU7aGVpZ2h0OjQwMHB4OyI+PC9kaXY+DQogIDxzY3JpcHQgc3JjPSJfX0pTX1BfQ0hBUlRfXyI+PC9zY3JpcHQ+DQonJycNCg0KY2hhcnRfdF9odG1sID0gJycnDQp2YXIgbXlDaGFydDEgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKSk7DQoNCnZhciBkYXRhID0gIF9fREFUQV9fOw0KDQp2YXIgb3B0aW9uID0gew0KICBsZWdlbmQ6IHt9LA0KICB0b29sdGlwOiB7DQogICAgdHJpZ2dlcjogJ2F4aXMnLA0KICB9LA0KICBkYXRhc2V0OiB7DQogICAgc291cmNlOmRhdGEsDQogICAgZGltZW5zaW9uczogWyd0aW1lc3RhbXAnLCAnc2Vuc29yMScsICdzZW5zb3IyJ10sDQogIH0sDQogIHhBeGlzOiB7IHR5cGU6ICd0aW1lJyB9LA0KICB5QXhpczogeyB9LA0KICBzZXJpZXM6IFsNCiAgew0KICAgICBuYW1lOiAnQWN0aW9ucy9zJywNCiAgICAgdHlwZTogJ2xpbmUnLA0KICAgICBzbW9vdGg6IHRydWUsDQogICAgIGVuY29kZTogew0KICAgICAgIHg6ICd0aW1lc3RhbXAnLA0KICAgICAgIHk6ICdzZW5zb3IxJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZSANCiAgICAgfQ0KICB9LHsNCiAgICAgbmFtZTogJ0ZhaWx1cmVzL3MnLA0KICAgICB0eXBlOiAnbGluZScsDQogICAgIHNtb290aDogdHJ1ZSwNCiAgICAgZW5jb2RlOiB7DQogICAgICAgeDogJ3RpbWVzdGFtcCcsDQogICAgICAgeTogJ3NlbnNvcjInDQogIH0NCn1dDQp9Ow0KbXlDaGFydDEuc2V0T3B0aW9uKG9wdGlvbik7DQonJycNCg0KY2hhcnRfcF9odG1sID0gJycnDQp2YXIgbXlDaGFydDIgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5fcCcpKTsNCg0KdmFyIGRhdGEgPSAgX19EQVRBX187DQoNCnZhciBvcHRpb24gPSB7DQogIGxlZ2VuZDoge30sDQogIHRvb2x0aXA6IHsNCiAgICB0cmlnZ2VyOiAnYXhpcycsDQogIH0sDQogIGRhdGFzZXQ6IHsNCiAgICBzb3VyY2U6ZGF0YSwNCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInLCAnc2Vuc29yMycsICdzZW5zb3I0JywgJ3NlbnNvcjUnLCAnc2Vuc29yNiddLA0KICB9LA0KICB4QXhpczogeyB0eXBlOiAndGltZScgfSwNCiAgeUF4aXM6IHsgfSwNCiAgc2VyaWVzOiBbDQogIHsNCiAgICAgbmFtZTogJ01heCcsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yNicgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUNCiAgICAgfQ0KICB9LHsNCiAgICAgbmFtZTogJ3A5OScsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yNScgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUNCiAgICAgfQ0KICB9LHsNCiAgICAgbmFtZTogJ3A5NScsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yNCcgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUNCiAgICAgfQ0KDQogIH0sew0KICAgICBuYW1lOiAncDkwJywNCiAgICAgdHlwZTogJ2xpbmUnLA0KICAgICBzbW9vdGg6IHRydWUsDQogICAgIGVuY29kZTogew0KICAgICAgIHg6ICd0aW1lc3RhbXAnLA0KICAgICAgIHk6ICdzZW5zb3IzJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQ0KICAgICB9DQoNCiAgfSx7DQogICAgIG5hbWU6ICdBdmcnLA0KICAgICB0eXBlOiAnbGluZScsDQogICAgIHNtb290aDogdHJ1ZSwNCiAgICAgZW5jb2RlOiB7DQogICAgICAgeDogJ3RpbWVzdGFtcCcsDQogICAgICAgeTogJ3NlbnNvcjInDQogICAgIH0NCiAgfSx7DQogICAgIG5hbWU6ICdNaW4nLA0KICAgICB0eXBlOiAnbGluZScsDQogICAgIHNtb290aDogdHJ1ZSwNCiAgICAgZW5jb2RlOiB7DQogICAgICAgeDogJ3RpbWVzdGFtcCcsDQogICAgICAgeTogJ3NlbnNvcjEnDQogIH0NCn1dDQp9Ow0KbXlDaGFydDIuc2V0T3B0aW9uKG9wdGlvbik7DQoNCndpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkgew0KICBteUNoYXJ0MS5yZXNpemUoKTsNCiAgbXlDaGFydDIucmVzaXplKCk7DQp9Ow0KJycnDQoNCmNsYXNzIFN1bW1hcnk6DQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLm51bV9hY3Rpb25zID0gMA0KICAgICAgICBzZWxmLm51bV9mYWlsZWQgPSAwDQogICAgICAgIHNlbGYuZHVyYXRpb24gPSAwLjANCiAgICAgICAgc2VsZi5taW5fcnQgPSAxMDAwMDAwMDAwLjANCiAgICAgICAgc2VsZi5tYXhfcnQgPSAwLjANCiAgICAgICAgc2VsZi5tYXhfcnRfdHMgPSAiIg0KICAgICAgICBzZWxmLm1lbSA9IDAuMA0KICAgICAgICBzZWxmLmNwdSA9IDAuMA0KICAgICAgICBzZWxmLm1heF9hd3QgPSAwLjANCiAgICAgICAgc2VsZi5tYXhfd3QgPSAwLjANCiAgICAgICAgc2VsZi5hdmdfcXMgPSAwLjANCiAgICAgICAgc2VsZi5tYXhfcXMgPSAwDQogICAgICAgIHNlbGYubmFtZSA9ICIiDQogICAgICAgIHNlbGYuY3B1X3RpbWVfbnMgPSAwDQogICAgICAgIHNlbGYuY2hhcnRfdF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozMy4xMDAnLCAxMTAwLCAwXQ0KICAgICAgICBzZWxmLmNoYXJ0X3BfbGlzdCA9IFtdICAgIyBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzBdDQogICAgICAgIHNlbGYuYXBzX2NvdW50ID0gMC4wDQogICAgICAgIHNlbGYuYXBzX3RhcmdldF9zdW0gPSAwLjANCg0KZGVmIGNyZWF0ZVJlcG9ydChmaWxlbmFtZSwgdGV4dCk6DQoNCiAgICBjd2QgPSBvcy5nZXRjd2QoKQ0KICAgIGlmIG9zLnBhdGguaXNkaXIoImJ1aWxkL3JlcG9ydHMvdHVsaXAiKToNCiAgICAgICAgb3MuY2hkaXIoImJ1aWxkL3JlcG9ydHMvdHVsaXAiKQ0KDQogICAgcHJpbnQoIlxuT3V0cHV0IGZpbGVuYW1lID0gIiArIGZpbGVuYW1lKQ0KDQogICAgaWYgdGV4dFswXSA9PSAneyc6DQogICAgICAgIGNvbmZpZ19maWxlbmFtZSA9ICIiDQogICAgICAgIGNvbmZpZ19maWxlbmFtZTIgPSAiIg0KICAgIGVsc2U6DQogICAgICAgIGNvbmZpZ19maWxlbmFtZSA9IHRleHQNCiAgICAgICAgY29uZmlnX2ZpbGVuYW1lMiA9IG9zLnBhdGguYmFzZW5hbWUoY29uZmlnX2ZpbGVuYW1lKQ0KDQogICAgamhoID0ge30NCiAgICBqc3MgPSB7fQ0KDQogICAgcHJpbnRfZGV0YWlsX3Jvd3MgPSBUcnVlDQoNCiAgICBnbG9iYWwgbmFtZTJzDQogICAgZ2xvYmFsIG5hbWUyc19saXN0DQogICAgZ2xvYmFsIGJlbmNobWFya19pZA0KICAgIG5hbWUycyA9ICIiDQogICAgbmFtZTJzX2xpc3QgPSBbXQ0KICAgIGJlbmNobWFya19pZCA9IDANCg0KICAgIHNtID0gTm9uZQ0KICAgIGpoID0gSGlzdG9ncmFtKDEsIDM2MDAqMTAwMCoxMDAwLCAzKQ0KICAgIGZpbGVPYmogPSBvcGVuKGZpbGVuYW1lKQ0KICAgIGpiID0ganNvbi5sb2FkKGZpbGVPYmosIG9iamVjdF9wYWlyc19ob29rPU9yZGVyZWREaWN0KQ0KICAgIHZlcnNpb24gPSBqYlsndmVyc2lvbiddDQogICAgZGVzYzEgPSAnVHVsaXAgJyArIHZlcnNpb24NCiAgICByYiA9IGpiWyJyZXN1bHRzIl0NCg0KICAgIHJlcG9ydF9odG1sX2ZuID0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInJlcG9ydF9maWxlbmFtZSJdDQogICAgcmVwb3J0X2h0bWxfZmggPSBvcGVuKHJlcG9ydF9odG1sX2ZuLCAidysiKQ0KDQogICAgcmVwb3J0X2pzb25fZm4gPSBvcy5wYXRoLnNwbGl0ZXh0KHJlcG9ydF9odG1sX2ZuKVswXSArICIuanNvbiINCiAgICByZXBvcnRfanNvbl9maCA9IG9wZW4ocmVwb3J0X2pzb25fZm4sICJ3KyIpDQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIntcbiIpDQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgImNvbmZpZyI6ICcgKyBqc29uLmR1bXBzKGpiWyJjb25maWciXSkgKyAnLFxuJykNCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAiYmVuY2htYXJrcyI6IHtcbicpDQoNCiAgICBnbG9iYWwgcmVwb3J0X2RuDQogICAgcmVwb3J0X2RuID0gb3MucGF0aC5zcGxpdGV4dChyZXBvcnRfaHRtbF9mbilbMF0NCiAgICB0cnk6DQogICAgICAgIG9zLm1ha2VkaXJzKHJlcG9ydF9kbikNCiAgICBleGNlcHQ6DQogICAgICAgIHBhc3MNCg0KICAgIGRlZiBvZGlyKGZpbGVuYW1lKToNCiAgICAgICAgZ2xvYmFsIHJlcG9ydF9kbg0KICAgICAgICByZXR1cm4gb3MucGF0aC5qb2luKG9zLmdldGN3ZCgpLCByZXBvcnRfZG4sIGZpbGVuYW1lKQ0KDQogICAgZGVmIG9kaXJIdG1sKGZpbGVuYW1lKToNCiAgICAgICAgZ2xvYmFsIHJlcG9ydF9kbg0KICAgICAgICByZXR1cm4gcmVwb3J0X2RuICsgIi8iICsgZmlsZW5hbWUNCg0KICAgIGRlZiBuYW1lX3RvX2hyZWYobmFtZSk6DQogICAgICAgIGhyZWYgPSAnXycgKyByZS5zdWIocidcVycsICdfJywgbmFtZS5sb3dlcigpKQ0KICAgICAgICBoZmlsZSA9IG9zLnBhdGguc3BsaXRleHQoY29uZmlnX2ZpbGVuYW1lMilbMF0gKyAiLmh0bWwiDQogICAgICAgIHJldHVybiAiPGEgaHJlZj0nJXMjJXMnPiIlKGhmaWxlLCBocmVmKSArIG5hbWUgKyAiPC9hPiINCg0KICAgIGlmIGxlbihjb25maWdfZmlsZW5hbWUyKSA+IDA6DQogICAgICAgIGRlc2MyID0gIjxhIGhyZWY9JyVzJz4iJShvcy5wYXRoLnNwbGl0ZXh0KGNvbmZpZ19maWxlbmFtZTIpWzBdICsgIi5odG1sIikNCiAgICBlbHNlOg0KICAgICAgICBkZXNjMiA9ICIiDQoNCiAgICBpZiBsZW4oY29uZmlnX2ZpbGVuYW1lMikgPiAwOg0KICAgICAgICBkZXNjMiArPSBqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsiZGVzY3JpcHRpb24iXSArICI8L2E+IC8gIiArIGpiWyJ0aW1lc3RhbXAiXVs6LTNdDQogICAgZWxzZToNCiAgICAgICAgZGVzYzIgKz0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bImRlc2NyaXB0aW9uIl0gKyAiIC8gIiArIGpiWyJ0aW1lc3RhbXAiXVs6LTNdDQoNCiAgICBwcmludCgiUmVwb3J0IGZpbGVuYW1lID0gIiArIHJlcG9ydF9odG1sX2ZuKQ0KDQogICAgZGVmIHByaW50ZihzKToNCiAgICAgICAgcmVwb3J0X2h0bWxfZmgud3JpdGUocykNCg0KICAgIGRlZiBhY3Rpb25OYW1lKHMpOg0KICAgICAgICByZXR1cm4gcy5zcGxpdCgiLCIpWzBdLnN0cmlwKCkNCg0KICAgIGRlZiBhY3Rpb25EZXNjKHMpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICByZXR1cm4gcy5zcGxpdCgiLCIpWzFdLnN0cmlwKCkNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcmV0dXJuICIiDQoNCiAgICBkZWYgc3RyX2Zyb21fY3B1X3RpbWVfbnModl9ucyk6DQogICAgICAgIHIgPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9dl9ucy8xMDAwMDAwMDAwLjApKSAgI1s6LTVdDQogICAgICAgIGlmICcuJyBpbiByOg0KICAgICAgICAgICAgciA9IHJbOi01XQ0KICAgICAgICByZXR1cm4gcg0KDQogICAgZGVmIHByaW50X2dsb2JhbF9zdW1tYXJ5KCk6DQogICAgICAgIGdsb2JhbCBuYW1lMnMNCiAgICAgICAgZ2xvYmFsIG5hbWUyc19saXN0DQogICAgICAgIGdsb2JhbCBiZW5jaG1hcmtfaWQNCg0KICAgICAgICBhdmdfYXBzID0gMC4wIGlmIHNtLm5hbWUgaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdIGVsc2Ugc20ubnVtX2FjdGlvbnMvc20uZHVyYXRpb24NCiAgICAgICAgaWYgc20ubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06DQogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIg0KICAgICAgICAgICAgc20uY3B1ID0gMC4wDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBjcHVfdCA9IHN0cl9mcm9tX2NwdV90aW1lX25zKHNtLmNwdV90aW1lX25zKQ0KDQogICAgICAgIHN0YXRzRmlsZW5hbWUgPSAnJXNfJWQuaHRtbCclKG9kaXIocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQ0KICAgICAgICBzdGF0c0ZpbGVuYW1lSHRtbCA9ICclc18lZC5odG1sJyUob2Rpckh0bWwocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQ0KICAgICAgICB0ZXh0ID0gIjxhIGhyZWY9JyVzJz4lczwvYT4iJShzdGF0c0ZpbGVuYW1lSHRtbCwiW1N1bW1hcnldIikNCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbShzdGF0c0ZpbGVuYW1lKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludChzdW1tYXJ5X2h0bWxfMSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsnKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICAgICAgLy8gQ29ubmVjdCB0aGUgY2hvb3NlIGZpbGVzIGJ1dHRvbjonKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoIiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVNlbGVjdCwgZmFsc2UpOyIpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICAgICAgLy8gTG9hZCBzb21lIHN0YXRpYyBleGFtcGxlIGRhdGE6JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIGlkeCA9IDANCiAgICAgICAgYWN0aW9uc1N0cmluZyA9ICIiDQogICAgICAgIGhpc3Rvc1N0cmluZyA9ICIiDQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToNCiAgICAgICAgICAgIGlkeCArPSAxDQogICAgICAgICAgICBzbXggPSBqc3Nba2V5XQ0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0NCiAgICAgICAgICAgIGlmIGxlbihhY3Rpb25zU3RyaW5nKSA+IDA6DQogICAgICAgICAgICAgICAgYWN0aW9uc1N0cmluZyArPSAnLCAnDQogICAgICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICcsICcNCiAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gIidBJXMnIiUoa2V5KQ0KICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICJkYXRhJWRTdHIiJShpZHgpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBkYXRhJWRTdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYjZGF0YV8lZCIpLmlubmVySFRNTC50cmltKCk7JyUoaWR4LGlkeCkpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgaWYgaWR4ID4gMToNCiAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJyArICInUyciDQogICAgICAgICAgICBoaXN0b3NTdHJpbmcgKz0gJywgJyArICJkYXRhJWRTdHIiJSgwKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgZGF0YSVkU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfJWQiKS5pbm5lckhUTUwudHJpbSgpOyclKDAsMCkpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgaGlzdG9zID0gWyVzXTsnJShoaXN0b3NTdHJpbmcpKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgbmFtZXMgPSBbJXNdOyclKGFjdGlvbnNTdHJpbmcpKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCg0KICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsnKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICBkcmF3Q2hhcnQoKTsnKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB9JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHRDaGFydEZpbGVuYW1lID0gJyVzXyVkX3QuanMnJShvZGlyKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkNCiAgICAgICAgdENoYXJ0RmlsZW5hbWVIdG1sID0gJyVzXyVkX3QuanMnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpDQogICAgICAgIHBDaGFydEZpbGVuYW1lID0gJyVzXyVkX3AuanMnJShvZGlyKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkNCiAgICAgICAgcENoYXJ0RmlsZW5hbWVIdG1sID0gJyVzXyVkX3AuanMnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KA0KICAgICAgICAgICAgc3VtbWFyeV9odG1sXzINCiAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19DSEFSVFNfVEVYVF9fIiwNCiAgICAgICAgICAgICAgICAgICAgY2hhcnRzX2h0bWwNCiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19KU19UX0NIQVJUX18iLG9zLnBhdGguYmFzZW5hbWUodENoYXJ0RmlsZW5hbWVIdG1sKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19KU19QX0NIQVJUX18iLG9zLnBhdGguYmFzZW5hbWUocENoYXJ0RmlsZW5hbWVIdG1sKSkpDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCg0KICAgICAgICBpZHggPSAwDQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToNCiAgICAgICAgICAgIGlkeCArPSAxDQogICAgICAgICAgICBzbXggPSBqc3Nba2V5XQ0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0NCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8ZGl2IGlkPSJkYXRhXyVkIiBjbGFzcz0iaGlzdG8iPiclKGlkeCkpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgICAgIGpoeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPC9kaXY+JykNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8ZGl2IGlkPSJkYXRhXzAiIGNsYXNzPSJoaXN0byI+JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIGpoLm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ocHJpbnRTdHJlYW0sIDEwMDAuMCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzwvZGl2PicpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KHN1bW1hcnlfaHRtbF8zKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQ0KICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpDQoNCiAgICAgICAgIyBBY3Rpb25zL3MgY2hhcnQNCiAgICAgICAgI2NoYXJ0X3RfbGlzdCA9IFsNCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzMuMTAwJywgMTEwMCwgMF0sDQogICAgICAgICMgICAgWycyMDE4LTA0LTEwVDIwOjQwOjUzLjIwMCcsIDEwMDIsIDBdLA0KICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0MTowMy4zMDAnLCAxMTA0LCAwXSwNCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDQ6MDMuNDAwJywgMTIwNS41LCAwXSwNCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDU6MDMuNTAwJywgMTMwNiwgMF0NCiAgICAgICAgI10NCiAgICAgICAgY2hhcnRfcF9saXN0ID0gWw0KICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQwOjMzWicsIDEsIDUsIDEwLCAyMCwgMjUsIDMwIF0sDQogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDA6NTNaJywgMiwgNiwgMTUsIDI1LCAzMCwgMzVdLA0KICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQxOjAzWicsIDIsIDUsIDIwLCAzMCwgMzUsIDQwXSwNCiAgICAgICAgICAgIFsnMjAxOC0wNC0xMFQyMDo0NDowM1onLCAzLCA3LCAxMiwgMjIsIDMwLCAzMl0sDQogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDU6MDNaJywgMiwgMTAsIDEzLCAyMywgMzAsIDMzXQ0KICAgICAgICBdDQogICAgICAgIHByaW50U3RyZWFtID0gUHJpbnRTdHJlYW0odENoYXJ0RmlsZW5hbWUpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KGNoYXJ0X3RfaHRtbC5yZXBsYWNlKCJfX0RBVEFfXyIsKCIlcyIlKHNtLmNoYXJ0X3RfbGlzdCkpLnJlcGxhY2UoInUnIiwiJyIpKSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLmZsdXNoKCkNCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQ0KDQogICAgICAgICMgUmVzcG9uc2UgVGltZSAobXMpIGNoYXJ0DQogICAgICAgIHByaW50U3RyZWFtID0gUHJpbnRTdHJlYW0ocENoYXJ0RmlsZW5hbWUpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KGNoYXJ0X3BfaHRtbC5yZXBsYWNlKCJfX0RBVEFfXyIsKCIlcyIlKHNtLmNoYXJ0X3BfbGlzdCkpLnJlcGxhY2UoInUnIiwiJyIpKSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLmZsdXNoKCkNCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQ0KDQogICAgICAgIGlmIFRydWU6DQogICAgICAgICAgICByZCA9IHt9DQogICAgICAgICAgICByZFsibnVtX2FjdGlvbnMiXSA9IHNtLm51bV9hY3Rpb25zDQogICAgICAgICAgICByZFsibnVtX2ZhaWxlZCJdID0gc20ubnVtX2ZhaWxlZA0KICAgICAgICAgICAgcmRbImR1cmF0aW9uIl0gPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpDQogICAgICAgICAgICByZFsiYXBzIl0gPSBhdmdfYXBzDQogICAgICAgICAgICByZFsiYXBzX3RhcmdldF9yYXRlIl0gPSBzbS5hcHNfdGFyZ2V0X3N1bSAvIHNtLmFwc19jb3VudA0KICAgICAgICAgICAgcmRbImF2Z19ydCJdID0gamguZ2V0TWVhbigpLzEwMDAuMA0KICAgICAgICAgICAgcmRbInN0ZGV2Il0gPSBqaC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjANCiAgICAgICAgICAgIHJkWyJtaW5fcnQiXSA9IHNtLm1pbl9ydA0KICAgICAgICAgICAgcmRbInA5MF9ydCJdID0gamguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wDQogICAgICAgICAgICByZFsicDk5X3J0Il0gPSBqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjANCiAgICAgICAgICAgIHJkWyJtYXhfcnQiXSA9IHNtLm1heF9ydA0KICAgICAgICAgICAgcmRbIm1heF9ydHQiXSA9IHNtLm1heF9ydF90cy5yZXBsYWNlKCJfIiwiVCIpDQogICAgICAgICAgICByZFsiQVFTIl0gPSBzbS5hdmdfcXMNCiAgICAgICAgICAgIHJkWyJNUVMiXSA9IHNtLm1heF9xcw0KICAgICAgICAgICAgcmRbIkFXVCJdID0gc20ubWF4X2F3dA0KICAgICAgICAgICAgcmRbIk1XVCJdID0gc20ubWF4X3d0DQogICAgICAgICAgICByZFsiQ1BVX1QiXSA9IGNwdV90DQogICAgICAgICAgICByZFsiQ1BVIl0gPSBzbS5jcHUNCiAgICAgICAgICAgIHJkWyJNRU0iXSA9IHNtLm1lbQ0KDQogICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgICAsInN1bW1hcnkiOiAlc1xuJyUoanNvbi5kdW1wcyhyZCkpKQ0KDQogICAgICAgIGh0bWwgPSBiZW5jaG1hcmtfc3VtbWFyeV9yb3clKA0KICAgICAgICAgICAgbmFtZTJzLA0KICAgICAgICAgICAgdGV4dCwNCiAgICAgICAgICAgIHNtLm51bV9hY3Rpb25zLA0KICAgICAgICAgICAgc20ubnVtX2ZhaWxlZCwNCiAgICAgICAgICAgIHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksDQogICAgICAgICAgICBhdmdfYXBzLA0KICAgICAgICAgICAgamguZ2V0TWVhbigpLzEwMDAuMCwNCiAgICAgICAgICAgIGpoLmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCwNCiAgICAgICAgICAgIHNtLm1pbl9ydCwNCiAgICAgICAgICAgIGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCwNCiAgICAgICAgICAgIGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCwNCiAgICAgICAgICAgIHNtLm1heF9ydCwNCiAgICAgICAgICAgIHNtLm1heF9ydF90c1s4Ol0sDQogICAgICAgICAgICBzbS5hdmdfcXMsDQogICAgICAgICAgICBzbS5tYXhfcXMsDQogICAgICAgICAgICBzbS5tYXhfYXd0LA0KICAgICAgICAgICAgc20ubWF4X3d0LA0KICAgICAgICAgICAgY3B1X3QsDQogICAgICAgICAgICBzbS5jcHUsDQogICAgICAgICAgICBzbS5tZW0pDQogICAgICAgIGlmIG5vdCBwcmludF9kZXRhaWxfcm93czoNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjxiPiIsIiIpDQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L2I+IiwiIikNCiAgICAgICAgIyBWYWxpZGF0aW9uOiAjRg0KICAgICAgICBpZiBzbS5udW1fZmFpbGVkID4gMDoNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcxPiIsIjxtYXJrPiIpDQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzE+IiwiPC9tYXJrPiIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCIiKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIiIpDQogICAgICAgICMgVmFsaWRhdGlvbjogQXZnX0FQUw0KICAgICAgICAjcHJpbnQoc20ubmFtZSkNCiAgICAgICAgaWYgImFwc19yYXRlIiBpbiBqYlsiY29uZmlnIl1bImJlbmNobWFya3MiXVtzbS5uYW1lXS5rZXlzKCk6DQogICAgICAgICAgICB0YXJnZXRfYXBzID0gamJbImNvbmZpZyJdWyJiZW5jaG1hcmtzIl1bc20ubmFtZV1bImFwc19yYXRlIl0NCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHRhcmdldF9hcHMgPSAwLjANCiAgICAgICAgYXBzX3JhdGVfc3RlcF9jaGFuZ2UgPSAwLjANCiAgICAgICAgaWYgImFwc19yYXRlX3N0ZXBfY2hhbmdlIiBpbiBqYlsiY29uZmlnIl1bImJlbmNobWFya3MiXVtzbS5uYW1lXS5rZXlzKCk6DQogICAgICAgICAgICBhcHNfcmF0ZV9zdGVwX2NoYW5nZSA9IGpiWyJjb25maWciXVsiYmVuY2htYXJrcyJdW3NtLm5hbWVdWyJhcHNfcmF0ZV9zdGVwX2NoYW5nZSJdDQogICAgICAgIGlmIGFwc19yYXRlX3N0ZXBfY2hhbmdlID09IDAuMCBhbmQgdGFyZ2V0X2FwcyA+IDAuMDoNCiAgICAgICAgICAgIGRlbHRhX3BlcmNlbnRhZ2VfYXBzID0gMTAwLjAqYWJzKHRhcmdldF9hcHMtYXZnX2FwcykvdGFyZ2V0X2Fwcw0KICAgICAgICAgICAgaWYgZGVsdGFfcGVyY2VudGFnZV9hcHMgPiAxLjU6DQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiPG1hcms+IikNCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzI+IiwiPC9tYXJrPiIpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIiIpDQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpDQogICAgICAgIHByaW50ZihodG1sKQ0KICAgICAgICBpZiBsZW4obmFtZTJzX2xpc3QpID4gMDoNCiAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdDQogICAgICAgICAgICBkZWwgbmFtZTJzX2xpc3RbMF0NCg0KICAgIGRlZiBwcmludF9hY3Rpb25fc3VtbWFyeSgpOg0KICAgICAgICBnbG9iYWwgbmFtZTJzDQogICAgICAgIGdsb2JhbCBuYW1lMnNfbGlzdA0KICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkDQogICAgICAgIHBhZ2VfaWQgPSAwDQogICAgICAgIG51bV9rZXlzID0gbGVuKGpzcy5rZXlzKCkpDQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToNCiAgICAgICAgICAgIHNteCA9IGpzc1trZXldDQogICAgICAgICAgICBqaHggPSBqaGhba2V5XQ0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToNCiAgICAgICAgICAgICAgICB0ZXh0ID0gIlslcy4lc10iJShrZXksIGFjdGlvbk5hbWUoamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdW2tleV0pKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICB0ZXh0ID0gIlslc10iJShrZXkpDQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lID0gJyVzXyVkXyVkLmh0bWwnJShvZGlyKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCxwYWdlX2lkKQ0KICAgICAgICAgICAgc3RhdHNGaWxlbmFtZUh0bWwgPSAnJXNfJWRfJWQuaHRtbCclKG9kaXJIdG1sKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCxwYWdlX2lkKQ0KICAgICAgICAgICAgc3RhdHNGaWxlbmFtZVByZXYgPSAnJXNfJWRfJWQuaHRtbCclKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLGFicyhwYWdlX2lkLTEpKQ0KICAgICAgICAgICAgc3RhdHNGaWxlbmFtZU5leHQgPSAnJXNfJWRfJWQuaHRtbCclKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLHBhZ2VfaWQrMSkNCiAgICAgICAgICAgIHRleHQgPSAiPGEgaHJlZj0nJXMnPiVzPC9hPiIlKHN0YXRzRmlsZW5hbWVIdG1sLHRleHQpDQogICAgICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHN0YXRzRmlsZW5hbWUpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8aHRtbCBsYW5nPVwiZW5cIj4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPHN0eWxlPiIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ0YWJsZSwgdGgsIHRkIHsiKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBmb250LXNpemU6MTZweDsgdGV4dC1hbGlnbjogY2VudGVyOyIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ9IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIm1hcmsgeyIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGJhY2tncm91bmQtY29sb3I6IExpZ2h0R3JheTsiKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiICBjb2xvcjogYmxhY2s7IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIn0iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9zdHlsZT4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGJvZHk+IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9Ii4uLyVzIj5VcDwvYT4nJShyZXBvcnRfaHRtbF9mbikpDQogICAgICAgICAgICBpZiAocGFnZV9pZCA9PSAwKSBhbmQgKG51bV9rZXlzID09IDEpOg0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPlByZXY8L2E+JykNCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5OZXh0PC9hPicpDQogICAgICAgICAgICBlbGlmIChwYWdlX2lkID09IDApIGFuZCAobnVtX2tleXMgPiAxKToNCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5QcmV2PC9hPicpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPk5leHQ8L2E+JyUoc3RhdHNGaWxlbmFtZU5leHQpKQ0KICAgICAgICAgICAgZWxpZiBwYWdlX2lkKzEgPT0gbnVtX2tleXM6DQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQ0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPk5leHQ8L2E+JykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQ0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5OZXh0PC9hPiclKHN0YXRzRmlsZW5hbWVOZXh0KSkNCg0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToNCiAgICAgICAgICAgICAgICBkZXNjID0gIlslcy4lc10iJShrZXksIGFjdGlvbk5hbWUoamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdW2tleV0pKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkZXNjID0gIltBJXNdIiUoa2V5KQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGgyPiVzIFBlcmNlbnRpbGUgUmVzcG9uc2UgVGltZSBEaXN0cmlidXRpb248L2gyPiIlKGRlc2MpKQ0KDQogICAgICAgICAgICAjcHJpbnRTdHJlYW0ucHJpbnRsbigiPHByZT4iKQ0KICAgICAgICAgICAgI2poeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApDQoNCiAgICAgICAgICAgIGJvcyA9IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpDQogICAgICAgICAgICBveCA9IFByaW50U3RyZWFtKGJvcykNCiAgICAgICAgICAgIGpoeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKG94LCAxMDAwLjApDQogICAgICAgICAgICBveC5mbHVzaCgpDQogICAgICAgICAgICBveC5jbG9zZSgpDQogICAgICAgICAgICBwdGV4dCA9IGJvcy50b1N0cmluZygpDQogICAgICAgICAgICBsaW5lcyA9IHB0ZXh0LnNwbGl0KCdcbicpDQogICAgICAgICAgICB0Y291bnQgPSBqaHguZ2V0VG90YWxDb3VudCgpDQogICAgICAgICAgICBoZWFkZXIgPSBUcnVlDQogICAgICAgICAgICBybGlzdCA9IFtdDQogICAgICAgICAgICBmb3IgbGluZSBpbiBsaW5lczoNCiAgICAgICAgICAgICAgaWYgbGVuKGxpbmUpID09IDA6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgaWYgbGluZVswXSAhPSAiIyI6DQogICAgICAgICAgICAgICAgZSA9IGxpbmUuc3BsaXQoKQ0KICAgICAgICAgICAgICAgIGlmIGhlYWRlcjoNCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzx0YWJsZSBzdHlsZT0id2lkdGg6NjAwcHgiPicpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDx0cj4nKQ0KICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVswXSkpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPiVzPC90aD4nJShlWzFdKSkNCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+JXM8L3RoPiclKGVbMl0pKQ0KICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVszXSkpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPkFib3ZlQ291bnQ8L3RoPicpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDwvdHI+JykNCiAgICAgICAgICAgICAgICAgIGhlYWRlciA9IEZhbHNlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgIGlmIGxlbihlKSA9PSAzOg0KICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZCgnJykNCiAgICAgICAgICAgICAgICAgIHJsaXN0LmFwcGVuZChlKQ0KICAgICAgICAgICAgcmxpc3QucmV2ZXJzZSgpDQogICAgICAgICAgICBmb3IgZSBpbiBybGlzdDoNCiAgICAgICAgICAgICAgICBtYXJrID0gRmFsc2UNCiAgICAgICAgICAgICAgICBpZiBlWzFdLnN0YXJ0c3dpdGgoIjAuOTk5MCIpOg0KICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGlmIGVbMV0uc3RhcnRzd2l0aCgiMC45OTAiKToNCiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUNCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjk1MDAwMDAwMDAwMCI6DQogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlDQogICAgICAgICAgICAgICAgaWYgZVsxXSA9PSAiMC45MDAwMDAwMDAwMDAiOg0KICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGlmIGVbMV0gPT0gIjAuODAwMDAwMDAwMDAwIjoNCiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUNCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjUwMDAwMDAwMDAwMCI6DQogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8dHI+JykNCiAgICAgICAgICAgICAgICBpZiBtYXJrOg0KICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPjxtYXJrPiVzPC9tYXJrPjwvdGQ+JyUoZVswXSkpDQogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+PG1hcms+JXM8L21hcms+PC90ZD4nJShlWzFdKSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzBdKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsxXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsyXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVszXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUodGNvdW50LWludChlWzJdKSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8L3RyPicpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L3RhYmxlPiIpDQoNCiAgICAgICAgICAgICNwcmludFN0cmVhbS5wcmludGxuKCI8L3ByZT4iKQ0KDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L2JvZHk+IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvaHRtbD4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQ0KICAgICAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBzbXgubnVtX2FjdGlvbnMvc214LmR1cmF0aW9uDQogICAgICAgICAgICBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06DQogICAgICAgICAgICAgICAgY3B1X3QgPSAiMDowMDowMCINCiAgICAgICAgICAgICAgICBzbXguY3B1ID0gMC4wDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoc214LmNwdV90aW1lX25zKQ0KDQogICAgICAgICAgICBpZiBUcnVlOg0KICAgICAgICAgICAgICAgIHJkID0ge30NCiAgICAgICAgICAgICAgICByZFsibnVtX2FjdGlvbnMiXSA9IHNteC5udW1fYWN0aW9ucw0KICAgICAgICAgICAgICAgIHJkWyJudW1fZmFpbGVkIl0gPSBzbXgubnVtX2ZhaWxlZA0KICAgICAgICAgICAgICAgIHJkWyJkdXJhdGlvbiJdID0gc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludChzbS5kdXJhdGlvbikpKQ0KICAgICAgICAgICAgICAgIHJkWyJhcHMiXSA9IGF2Z19hcHMNCiAgICAgICAgICAgICAgICByZFsiYXZnX3J0Il0gPSBqaHguZ2V0TWVhbigpLzEwMDAuMA0KICAgICAgICAgICAgICAgIHJkWyJzdGRldiJdID0gamh4LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMA0KICAgICAgICAgICAgICAgIHJkWyJtaW5fcnQiXSA9IHNteC5taW5fcnQNCiAgICAgICAgICAgICAgICByZFsicDkwX3J0Il0gPSBqaHguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wDQogICAgICAgICAgICAgICAgcmRbInA5OV9ydCJdID0gamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMA0KICAgICAgICAgICAgICAgIHJkWyJtYXhfcnQiXSA9IHNteC5tYXhfcnQNCiAgICAgICAgICAgICAgICByZFsibWF4X3J0dCJdID0gc214Lm1heF9ydF90cy5yZXBsYWNlKCJfIiwiVCIpDQogICAgICAgICAgICAgICAgaWYgcGFnZV9pZCA9PSAwOg0KICAgICAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgfVxuJykNCiAgICAgICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICwiYWN0aW9ucyI6IHtcbicpDQogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICAiJXMiOiAlc1xuJyUoa2V5LGpzb24uZHVtcHMocmQpKSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgICAsIiVzIjogJXNcbiclKGtleSxqc29uLmR1bXBzKHJkKSkpDQoNCiAgICAgICAgICAgIGh0bWwgPSBiZW5jaG1hcmtfc3VtbWFyeV9yb3clKG5hbWUycyx0ZXh0LHNteC5udW1fYWN0aW9ucyxzbXgubnVtX2ZhaWxlZCxzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpLGF2Z19hcHMsamh4LmdldE1lYW4oKS8xMDAwLjAsamh4LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCxzbXgubWluX3J0LGpoeC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjAsamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCxzbXgubWF4X3J0LHNteC5tYXhfcnRfdHNbODpdLHNteC5hdmdfcXMsc214Lm1heF9xcyxzbXgubWF4X2F3dCxzbXgubWF4X3d0LGNwdV90LHNteC5jcHUsc214Lm1lbSkNCiAgICAgICAgICAgIGlmIG5vdCBwcmludF9kZXRhaWxfcm93czoNCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQ0KICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvYj4iLCIiKQ0KICAgICAgICAgICAgIyBSZW1vdmUgdGFnMQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzE+IiwiIikNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMT4iLCIiKQ0KICAgICAgICAgICAgIyBSZW1vdmUgdGFnMg0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMj4iLCIiKQ0KDQogICAgICAgICAgICBwcmludGYoaHRtbCkNCiAgICAgICAgICAgIGlmIGxlbihuYW1lMnNfbGlzdCkgPiAwOg0KICAgICAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdDQogICAgICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdDQoNCiAgICAgICAgICAgIHBhZ2VfaWQgKz0gMQ0KICAgICAgICAjcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgIH1cbicpDQoNCiAgICBwcmludGYoaGVhZGVyLnJlcGxhY2UoIl9fREVTQzFfXyIsIGRlc2MxKS5yZXBsYWNlKCJfX0RFU0MyX18iLCBkZXNjMikpDQogICAganNvbl9ibV9uYW1lcyA9IHt9DQogICAgcHJldl9yb3dfaWQgPSAwDQogICAgZm9yIGUgaW4gcmI6DQogICAgICAgIGN1cnJlbnRfcm93X2lkID0gaW50KGVbInJvd19pZCJdKQ0KICAgICAgICBpZiBjdXJyZW50X3Jvd19pZCA8PSBwcmV2X3Jvd19pZDoNCiAgICAgICAgICAgIGlmIHNtIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIHByaW50X2FjdGlvbl9zdW1tYXJ5KCkNCiAgICAgICAgICAgICAgICBwcmludF9nbG9iYWxfc3VtbWFyeSgpDQogICAgICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19lbXB0eV9yb3cpDQogICAgICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19jb2x1bW5zKQ0KICAgICAgICAgICAgc20gPSBTdW1tYXJ5KCkNCiAgICAgICAgICAgIHNtLm5hbWUgPSBlWyJibV9uYW1lIl0NCiAgICAgICAgICAgIGpoLnJlc2V0KCkNCiAgICAgICAgICAgIGJlbmNobWFya19pZCArPSAxDQogICAgICAgICAgICBqaGggPSB7fQ0KICAgICAgICAgICAganNzID0ge30NCiAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfaGVhZGVyJShuYW1lX3RvX2hyZWYoZVsiYm1fbmFtZSJdKSkpDQogICAgICAgICAgICBpZiBsZW4oZVsid29ya2Zsb3dfbmFtZSJdKSA+IDA6DQogICAgICAgICAgICAgICAgbmFtZTJzX2xpc3QgPSBbInU6JWQsIHQ6JWQiJShlWyJudW1fdXNlcnMiXSxlWyJudW1fdGhyZWFkcyJdKSwgInc6JXMiJShlWyJ3b3JrZmxvd19uYW1lIl0pLCAiYzolZCIlKGVbImNvbnRleHRfaWQiXSkgLCIiXQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBuYW1lMnNfbGlzdCA9IFsidTolZCwgdDolZCIlKGVbIm51bV91c2VycyJdLGVbIm51bV90aHJlYWRzIl0pLCAiYzolZCIlKGVbImNvbnRleHRfaWQiXSksIiJdDQogICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQ0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdDQogICAgICAgIGh0ID0gSGlzdG9ncmFtLmZyb21TdHJpbmcoZVsiaGlzdG9ncmFtX3J0Il0pDQogICAgICAgIGpoLmFkZChodCkNCiAgICAgICAgcF9tZW0gPSAxMDAuMCAqIGVbImp2bV9tZW1vcnlfdXNlZCJdIC8gZVsianZtX21lbW9yeV9tYXhpbXVtIl0NCiAgICAgICAgcF9jcHUgPSBlWyJwcm9jZXNzX2NwdV91dGlsaXphdGlvbiJdDQogICAgICAgIGlmIGVbImJtX25hbWUiXSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06DQogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIg0KICAgICAgICAgICAgcF9jcHUgPSAwLjANCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdKQ0KICAgICAgICAgICAgcF9jcHUgPSBlWyJwcm9jZXNzX2NwdV91dGlsaXphdGlvbiJdDQogICAgICAgIGlmIG5vdCBqc29uX2JtX25hbWVzLmhhc19rZXkoZVsiYm1fbmFtZSJdKToNCiAgICAgICAgICAgIGpzb25fYm1fbmFtZXNbZVsiYm1fbmFtZSJdXSA9IDENCiAgICAgICAgICAgIGlmIGxlbihqc29uX2JtX25hbWVzLmtleXMoKSkgPiAxOg0KICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICB9XG4nKQ0KICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgfSxcbicpDQogICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICIlcyI6IHtcbiclKGVbImJtX25hbWUiXSkpDQogICAgICAgICAgICBjb250ZXh0ID0ge30NCiAgICAgICAgICAgIGNvbnRleHRbIm5hbWUiXSA9IGVbImNvbnRleHRfbmFtZSJdDQogICAgICAgICAgICBjb250ZXh0WyJudW1fdXNlcnMiXSA9IGVbIm51bV91c2VycyJdDQogICAgICAgICAgICBjb250ZXh0WyJudW1fdGhyZWFkcyJdID0gZVsibnVtX3RocmVhZHMiXQ0KICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICJjb250ZXh0IjogJXMsJyUoanNvbi5kdW1wcyhjb250ZXh0KSkpDQogICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgInJlc3VsdHMiOiB7XG4nKQ0KDQogICAgICAgIGlmIFRydWU6DQogICAgICAgICAgICByZCA9IHt9DQogICAgICAgICAgICByZFsibnVtX2FjdGlvbnMiXSA9IGVbIm51bV9hY3Rpb25zIl0NCiAgICAgICAgICAgIHJkWyJudW1fZmFpbGVkIl0gPSBlWyJudW1fZmFpbGVkIl0NCiAgICAgICAgICAgIHJkWyJkdXJhdGlvbiJdID0gc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludChlWyJkdXJhdGlvbiJdKSkpDQogICAgICAgICAgICByZFsiYXBzIl0gPSAwLjAgaWYgZVsiYm1fbmFtZSJdIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIGVbImF2Z19hcHMiXQ0KICAgICAgICAgICAgcmRbImFwc190YXJnZXRfcmF0ZSJdID0gZVsiYXBzX3RhcmdldF9yYXRlIl0NCiAgICAgICAgICAgIHJkWyJhdmdfcnQiXSA9IGVbImF2Z19ydCJdDQogICAgICAgICAgICByZFsic3RkZXYiXSA9IGh0LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMA0KICAgICAgICAgICAgcmRbIm1pbl9ydCJdID0gZVsibWluX3J0Il0NCiAgICAgICAgICAgIHJkWyJwOTBfcnQiXSA9IGVbInBlcmNlbnRpbGVzX3J0Il1bIjkwLjAiXQ0KICAgICAgICAgICAgcmRbInA5OV9ydCJdID0gZVsicGVyY2VudGlsZXNfcnQiXVsiOTkuMCJdDQogICAgICAgICAgICByZFsibWF4X3J0Il0gPSBlWyJtYXhfcnQiXQ0KICAgICAgICAgICAgcmRbIm1heF9ydHQiXSA9IGVbIm1heF9ydF90cyJdLnJlcGxhY2UoIl8iLCJUIikNCiAgICAgICAgICAgIHJkWyJBUVMiXSA9IGVbImF2Z193dGhyZWFkX3FzaXplIl0NCiAgICAgICAgICAgIHJkWyJNUVMiXSA9IGVbIm1heF93dGhyZWFkX3FzaXplIl0NCiAgICAgICAgICAgIHJkWyJBV1QiXSA9IGVbImF2Z193dCJdDQogICAgICAgICAgICByZFsiTVdUIl0gPSBlWyJtYXhfd3QiXQ0KICAgICAgICAgICAgcmRbIkNQVV9UIl0gPSBjcHVfdA0KICAgICAgICAgICAgcmRbIkNQVSJdID0gcF9jcHUNCiAgICAgICAgICAgIHJkWyJNRU0iXSA9IHBfbWVtDQogICAgICAgICAgICBpZiBlWyJyb3dfaWQiXSsxID09IDE6DQogICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICAgICIlZCI6ICVzXG4nJShlWyJyb3dfaWQiXSsxLGpzb24uZHVtcHMocmQpKSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICAgLCIlZCI6ICVzXG4nJShlWyJyb3dfaWQiXSsxLGpzb24uZHVtcHMocmQpKSkNCiAgICAgICAgaWYgcHJpbnRfZGV0YWlsX3Jvd3M6DQogICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2RldGFpbF9yb3clKCBcDQogICAgICAgICAgICAgICAgbmFtZTJzLA0KICAgICAgICAgICAgICAgIGVbInJvd19pZCJdKzEsDQogICAgICAgICAgICAgICAgZVsibnVtX2FjdGlvbnMiXSwNCiAgICAgICAgICAgICAgICBlWyJudW1fZmFpbGVkIl0sDQogICAgICAgICAgICAgICAgc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPWludChlWyJkdXJhdGlvbiJdKSkpLA0KICAgICAgICAgICAgICAgIDAuMCBpZiBlWyJibV9uYW1lIl0gaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdIGVsc2UgZVsiYXZnX2FwcyJdLA0KICAgICAgICAgICAgICAgIGVbImF2Z19ydCJdLA0KICAgICAgICAgICAgICAgIGh0LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCwNCiAgICAgICAgICAgICAgICBlWyJtaW5fcnQiXSwNCiAgICAgICAgICAgICAgICBlWyJwZXJjZW50aWxlc19ydCJdWyI5MC4wIl0sDQogICAgICAgICAgICAgICAgZVsicGVyY2VudGlsZXNfcnQiXVsiOTkuMCJdLA0KICAgICAgICAgICAgICAgIGVbIm1heF9ydCJdLA0KICAgICAgICAgICAgICAgIGVbIm1heF9ydF90cyJdWzg6XSwNCiAgICAgICAgICAgICAgICBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdLA0KICAgICAgICAgICAgICAgIGVbIm1heF93dGhyZWFkX3FzaXplIl0sDQogICAgICAgICAgICAgICAgZVsiYXZnX3d0Il0sDQogICAgICAgICAgICAgICAgZVsibWF4X3d0Il0sDQogICAgICAgICAgICAgICAgY3B1X3QsDQogICAgICAgICAgICAgICAgcF9jcHUsDQogICAgICAgICAgICAgICAgcF9tZW0NCiAgICAgICAgICAgICAgICApKQ0KICAgICAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6DQogICAgICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0NCiAgICAgICAgICAgICAgICBkZWwgbmFtZTJzX2xpc3RbMF0NCiAgICAgICAgaWYgc20ubWluX3J0ID4gZVsibWluX3J0Il06DQogICAgICAgICAgICBzbS5taW5fcnQgPSBlWyJtaW5fcnQiXQ0KICAgICAgICBpZiBzbS5tYXhfcnQgPCBlWyJtYXhfcnQiXToNCiAgICAgICAgICAgIHNtLm1heF9ydCA9IGVbIm1heF9ydCJdDQogICAgICAgICAgICBzbS5tYXhfcnRfdHMgPSBlWyJtYXhfcnRfdHMiXQ0KICAgICAgICBzbS5udW1fYWN0aW9ucyArPSBlWyJudW1fYWN0aW9ucyJdDQogICAgICAgIHNtLm51bV9mYWlsZWQgKz0gZVsibnVtX2ZhaWxlZCJdDQogICAgICAgIHNtLmR1cmF0aW9uICs9IGVbImR1cmF0aW9uIl0NCiAgICAgICAgaWYgc20uYXZnX3FzIDwgZVsiYXZnX3d0aHJlYWRfcXNpemUiXToNCiAgICAgICAgICAgIHNtLmF2Z19xcyA9IGVbImF2Z193dGhyZWFkX3FzaXplIl0NCiAgICAgICAgaWYgc20ubWF4X3FzIDwgZVsibWF4X3d0aHJlYWRfcXNpemUiXToNCiAgICAgICAgICAgIHNtLm1heF9xcyA9IGVbIm1heF93dGhyZWFkX3FzaXplIl0NCiAgICAgICAgaWYgc20ubWF4X2F3dCA8IGVbImF2Z193dCJdOg0KICAgICAgICAgICAgc20ubWF4X2F3dCA9IGVbImF2Z193dCJdDQogICAgICAgIGlmIHNtLm1heF93dCA8IGVbIm1heF93dCJdOg0KICAgICAgICAgICAgc20ubWF4X3d0ID0gZVsibWF4X3d0Il0NCiAgICAgICAgaWYgc20ubWVtIDwgcF9tZW06DQogICAgICAgICAgICBzbS5tZW0gPSBwX21lbQ0KICAgICAgICBpZiBzbS5jcHUgPCBwX2NwdToNCiAgICAgICAgICAgIHNtLmNwdSA9IHBfY3B1DQogICAgICAgIHNtLmNwdV90aW1lX25zICs9IGVbInByb2Nlc3NfY3B1X3RpbWVfbnMiXQ0KICAgICAgICBzbS5hcHNfY291bnQgKz0gMS4wDQogICAgICAgIHNtLmFwc190YXJnZXRfc3VtICs9IGVbImFwc190YXJnZXRfcmF0ZSJdDQoNCiAgICAgICAgaWYgbGVuKHNtLmNoYXJ0X3RfbGlzdCkgPT0gLTE6DQogICAgICAgICAgICBzbS5jaGFydF90X2xpc3QuYXBwZW5kKA0KICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfYmVnaW4iXS5yZXBsYWNlKCJfIiwgIlQiKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfYXBzIl0pKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4zZiIlKGVbIm51bV9mYWlsZWQiXS9lWyJkdXJhdGlvbiJdKSkNCiAgICAgICAgICAgIF0pDQoNCiAgICAgICAgc20uY2hhcnRfdF9saXN0LmFwcGVuZCgNCiAgICAgICAgICAgIFsNCiAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2VuZCJdLnJlcGxhY2UoIl8iLCAiVCIpKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19hcHMiXSkpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjNmIiUoZVsibnVtX2ZhaWxlZCJdL2VbImR1cmF0aW9uIl0pKQ0KICAgICAgICAgICAgIF0pDQoNCiAgICAgICAgIyBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzAgXQ0KICAgICAgICBpZiBsZW4oc20uY2hhcnRfcF9saXN0KSA9PSAtMToNCiAgICAgICAgICAgIHNtLmNoYXJ0X3BfbGlzdC5hcHBlbmQoDQogICAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICAgICAnJXMnJShlWyJ0ZXN0X2JlZ2luIl0ucmVwbGFjZSgiXyIsICJUIikpLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1pbl9ydCJdKSksDQogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX3J0Il0pKSwNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjApKSwNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5NS4wKS8xMDAwLjApKSwNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjApKSwNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtYXhfcnQiXSkpDQogICAgICAgICAgICAgICAgXSkNCg0KICAgICAgICBzbS5jaGFydF9wX2xpc3QuYXBwZW5kKA0KICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfZW5kIl0ucmVwbGFjZSgiXyIsICJUIikpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWluX3J0Il0pKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19ydCJdKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjApKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk1LjApLzEwMDAuMCkpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtYXhfcnQiXSkpDQogICAgICAgICAgICBdKQ0KDQogICAgICAgICMgamhoIC4uLg0KICAgICAgICBmb3Iga2V5IGluIGVbInVzZXJfYWN0aW9ucyJdLmtleXMoKToNCiAgICAgICAgICAgIGFyID0gZVsidXNlcl9hY3Rpb25zIl1ba2V5XQ0KICAgICAgICAgICAgaHR0ID0gSGlzdG9ncmFtLmZyb21TdHJpbmcoYXJbImhpc3RvZ3JhbV9ydCJdKQ0KICAgICAgICAgICAgI3ByaW50KGFyWyJuYW1lIl0gKyAiIC0gIiArICIlLjNmIiUoaHR0LmdldE1lYW4oKS8xMDAwLjApKQ0KICAgICAgICAgICAgaWYgamhoLmhhc19rZXkoa2V5KToNCiAgICAgICAgICAgICAgICBqaGhba2V5XS5hZGQoaHR0KQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBqaGhba2V5XSA9IEhpc3RvZ3JhbSgxLCAzNjAwKjEwMDAqMTAwMCwgMykNCiAgICAgICAgICAgICAgICBqaGhba2V5XS5hZGQoaHR0KQ0KICAgICAgICAgICAgI3ByaW50KGFyWyJuYW1lIl0gKyAiIC0gIiArICIlLjNmIiUoamhoW2tleV0uZ2V0TWVhbigpLzEwMDAuMCkgKyAiIC0gJWQiJShqaGhba2V5XS5nZXRUb3RhbENvdW50KCkpKQ0KDQogICAgICAgICMganNzIC4uLg0KICAgICAgICBmb3Iga2V5IGluIGVbInVzZXJfYWN0aW9ucyJdLmtleXMoKToNCiAgICAgICAgICAgIGFyID0gZVsidXNlcl9hY3Rpb25zIl1ba2V5XQ0KICAgICAgICAgICAgaWYganNzLmhhc19rZXkoa2V5KToNCiAgICAgICAgICAgICAgICBzbXggPSBqc3Nba2V5XQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBzbXggPSBqc3Nba2V5XSA9IFN1bW1hcnkoKQ0KICAgICAgICAgICAgICAgIHNteC5uYW1lID0gZVsiYm1fbmFtZSJdDQoNCiAgICAgICAgICAgIGlmIHNteC5taW5fcnQgPiBhclsibWluX3J0Il06DQogICAgICAgICAgICAgICAgc214Lm1pbl9ydCA9IGFyWyJtaW5fcnQiXQ0KICAgICAgICAgICAgaWYgc214Lm1heF9ydCA8IGFyWyJtYXhfcnQiXToNCiAgICAgICAgICAgICAgICBzbXgubWF4X3J0ID0gYXJbIm1heF9ydCJdDQogICAgICAgICAgICAgICAgc214Lm1heF9ydF90cyA9IGFyWyJtYXhfcnRfdHMiXQ0KICAgICAgICAgICAgc214Lm51bV9hY3Rpb25zICs9IGFyWyJudW1fYWN0aW9ucyJdDQogICAgICAgICAgICBzbXgubnVtX2ZhaWxlZCArPSBhclsibnVtX2ZhaWxlZCJdDQoNCiAgICAgICAgICAgIHNteC5kdXJhdGlvbiArPSBlWyJkdXJhdGlvbiJdDQogICAgICAgICAgICBpZiBzbXguYXZnX3FzIDwgZVsiYXZnX3d0aHJlYWRfcXNpemUiXToNCiAgICAgICAgICAgICAgICBzbXguYXZnX3FzID0gZVsiYXZnX3d0aHJlYWRfcXNpemUiXQ0KICAgICAgICAgICAgaWYgc214Lm1heF9xcyA8IGVbIm1heF93dGhyZWFkX3FzaXplIl06DQogICAgICAgICAgICAgICAgc214Lm1heF9xcyA9IGVbIm1heF93dGhyZWFkX3FzaXplIl0NCiAgICAgICAgICAgIGlmIHNteC5tYXhfYXd0IDwgZVsiYXZnX3d0Il06DQogICAgICAgICAgICAgICAgc214Lm1heF9hd3QgPSBlWyJhdmdfd3QiXQ0KICAgICAgICAgICAgaWYgc214Lm1heF93dCA8IGVbIm1heF93dCJdOg0KICAgICAgICAgICAgICAgIHNteC5tYXhfd3QgPSBlWyJtYXhfd3QiXQ0KICAgICAgICAgICAgaWYgc214Lm1lbSA8IHBfbWVtOg0KICAgICAgICAgICAgICAgIHNteC5tZW0gPSBwX21lbQ0KICAgICAgICAgICAgaWYgc214LmNwdSA8IHBfY3B1Og0KICAgICAgICAgICAgICAgIHNteC5jcHUgPSBwX2NwdQ0KICAgICAgICAgICAgc214LmNwdV90aW1lX25zICs9IGVbInByb2Nlc3NfY3B1X3RpbWVfbnMiXQ0KDQogICAgcHJpbnRfYWN0aW9uX3N1bW1hcnkoKQ0KICAgIHByaW50X2dsb2JhbF9zdW1tYXJ5KCkNCiAgICBwcmludGYodHJhaWxlcikNCg0KICAgIHJlcG9ydF9odG1sX2ZoLmNsb3NlKCkNCg0KICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCIgICAgICB9XG4iKQ0KICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCIgICAgfVxuIikNCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgiICB9XG4iKQ0KICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCJ9XG4iKQ0KICAgIHJlcG9ydF9qc29uX2ZoLmNsb3NlKCkNCg0KICAgIG9zLmNoZGlyKGN3ZCkNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBpZiBsZW4oc3lzLmFyZ3YpID49IDM6DQogICAgICAgIGZpbGVuYW1lID0gc3lzLmFyZ3ZbMV0NCiAgICAgICAgY29uZmlnRmlsZW5hbWUgPSBzeXMuYXJndlsyXQ0KICAgICAgICBjcmVhdGVSZXBvcnQoZmlsZW5hbWUsIGNvbmZpZ0ZpbGVuYW1lKQ0K";

    /** Private constructor to prevent instantiation. */
    public report_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     */
    public static void main(String... args) {
        String mainScriptFilename = "report.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decodedBytes);
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
