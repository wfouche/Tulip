package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8.name());
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decompress(decodedBytes));
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
