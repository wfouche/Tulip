package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8.name());
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decompress(decodedBytes));
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
