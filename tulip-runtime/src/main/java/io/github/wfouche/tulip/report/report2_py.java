package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8.name());
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decompress(decodedBytes));
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
