package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8);
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        StringBuilder pythonArgsScript = new StringBuilder();
        for (String arg : args) {
            if (pythonArgsScript.isEmpty()) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript.append("'").append(mainScriptFilename).append("', ");
                }
            } else {
                pythonArgsScript.append(", ");
            }
            pythonArgsScript.append("'").append(arg).append("'");
        }
        if (pythonArgsScript.isEmpty()) {
            pythonArgsScript = new StringBuilder("'" + mainScriptFilename + "'");
        }
        pythonArgsScript = new StringBuilder("import sys; sys.argv = [" + pythonArgsScript + "]");
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            mainScript = decompress(decodedBytes);
        }
        {
            // create Python interpreter object
            try (PythonInterpreter pyInterp = new PythonInterpreter()) {
                // initialize command-line args
                pyInterp.exec(pythonArgsScript.toString());
                // run script
                pyInterp.exec(mainScript);
            }
        }
    }
}
