package io.github.wfouche.tulip.report;

/// usr/bin/env jbang "$0" "$@" ; exit $?

// spotless:off
// DEPS com.google.code.gson:gson:2.13.1
// DEPS org.hdrhistogram:HdrHistogram:2.2.2
// DEPS org.python:jython-slim:2.7.4
// JAVA 21
// spotless:on

import java.util.Base64;
import org.python.util.PythonInterpreter;

public class report_py {

    public static String mainScriptTextBase64 =
            "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBwcmludF9mdW5jdGlvbgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IG9yZy5IZHJIaXN0b2dyYW0uSGlzdG9ncmFtIGFzIEhpc3RvZ3JhbQppbXBvcnQgb3MKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKaW1wb3J0IGphdmEuaW8uUHJpbnRTdHJlYW0gYXMgUHJpbnRTdHJlYW0KaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGFzIEJ5dGVBcnJheU91dHB1dFN0cmVhbQoKIyAvLy8gamJhbmcKIyByZXF1aXJlcy1qeXRob24gPSAiPT0yLjcuNCIKIyByZXF1aXJlcy1qYXZhID0gIj49MjEiCiMgZGVwZW5kZW5jaWVzID0gWwojICAgImNvbS5nb29nbGUuY29kZS5nc29uOmdzb246Mi4xMy4xIiwKIyAgICJvcmcuaGRyaGlzdG9ncmFtOkhkckhpc3RvZ3JhbToyLjIuMiIKIyBdCiMgW3B5dGhvbi1qdm1dCiMgICBkZWJ1ZyA9IGZhbHNlCiMgLy8vCgpzdW1tYXJ5X2h0bWxfMSA9ICcnJzwhRE9DVFlQRSBodG1sPgo8aHRtbD4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgIGRpdi5oaXN0byB7CiAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuCiAgICB9Cjwvc3R5bGU+Cgo8IS0tTG9hZCB0aGUgQUpBWCBBUEktLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9qc2FwaSI+PC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CgogICAgaWYgKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYikgewogICAgICAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuCiAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdUaGUgRmlsZSBBUElzIGFyZSBub3QgZnVsbHkgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci4nKTsKICAgIH0KCiAgICAvLyBMb2FkIHRoZSBWaXN1YWxpemF0aW9uIEFQSSBhbmQgdGhlIGNvcmVjaGFydCBwYWNrYWdlLgogICAgZ29vZ2xlLmxvYWQoJ3Zpc3VhbGl6YXRpb24nLCAnMS4wJywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOwoKICAgIC8vIFNldCBhIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBHb29nbGUgVmlzdWFsaXphdGlvbiBBUEkgaXMgbG9hZGVkLgogICAgZ29vZ2xlLnNldE9uTG9hZENhbGxiYWNrKGRyYXdJbml0aWFsQ2hhcnQpOwoKICAgIHZhciBjaGFydERhdGEgPSBudWxsOwogICAgdmFyIGNoYXJ0ID0gbnVsbDsKCiAgICBmdW5jdGlvbiBzZXRDaGFydERhdGEobmFtZXMsIGhpc3RvcykgewogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPCBoaXN0b3MubGVuZ3RoKSB7CiAgICAgICAgICAgIG5hbWVzLnB1c2goJ1Vua25vd24nKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZXJpZXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3Rvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzZXJpZXMgPSBhcHBlbmREYXRhU2VyaWVzKGhpc3Rvc1tpXSwgbmFtZXNbaV0sIHNlcmllcyk7CiAgICAgICAgfQoKICAgICAgICBjaGFydERhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHNlcmllcyk7CiAgICB9CgonJycKCnRleHRfYmxvY2tfMSA9ICcnJwogICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsKICAgICAgICAvLyBDb25uZWN0IHRoZSBjaG9vc2UgZmlsZXMgYnV0dG9uOgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsKCiAgICAgICAgLy8gTG9hZCBzb21lIHN0YXRpYyBleGFtcGxlIGRhdGE6CiAgICAgICAgdmFyIGRhdGExU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMSIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEyU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMiIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEzU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMyIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGhpc3RvcyA9IFtkYXRhM1N0ciwgZGF0YTJTdHIsIGRhdGExU3RyXTsKICAgICAgICB2YXIgbmFtZXMgPSBbJ0EnLCAnQicsICdDJ107CgogICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgIH0KJycnCgpzdW1tYXJ5X2h0bWxfMiA9ICcnJwogICAgdmFyIG1heFBlcmNlbnRpbGUgPSAxMDAwMDAwOwoKICAgIGZ1bmN0aW9uIGRyYXdDaGFydCgpIHsKCiAgICAgICAgdmFyIHRpY2tzID0KICAgICAgICAgICAgICAgIFt7djoxLGY6JzAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAsZjonOTAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAwLGY6Jzk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAsZjonOTkuOSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMCxmOic5OS45OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAsZjonOTkuOTk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwMDAsZjonOTkuOTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMCxmOic5OS45OTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMDAsZjonOTkuOTk5OTk5JSd9XTsKCiAgICAgICAgdmFyIHVuaXRTZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGltZVVuaXRTZWxlY3Rpb24iKTsKICAgICAgICB2YXIgdW5pdFNlbEluZGV4ID0gdW5pdFNlbGVjdGlvbi5zZWxlY3RlZEluZGV4OwogICAgICAgIHZhciB1bml0VGV4dCA9IHVuaXRTZWxlY3Rpb24ub3B0aW9uc1t1bml0U2VsSW5kZXhdLmlubmVySFRNTDsKCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7Ci8vICAgICAgICAgICAgdGl0bGU6ICdQZXJjZW50aWxlIFJlc3BvbnNlIFRpbWUgRGlzdHJpYnV0aW9uJywKICAgICAgICAgICAgaGVpZ2h0OiA0ODAsCi8vICAgICAgICAgICAgaEF4aXM6IHt0aXRsZTogJ1BlcmNlbnRpbGUnLCBtaW5WYWx1ZTogMCwgbG9nU2NhbGU6IHRydWUsIHRpY2tzOnRpY2tzIH0sCiAgICAgICAgICAgIGhBeGlzOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBlcmNlbnRpbGUiLAogICAgICAgICAgICAgICAgbWluVmFsdWU6IDEsIGxvZ1NjYWxlOiB0cnVlLCB0aWNrczp0aWNrcywKICAgICAgICAgICAgICAgIHZpZXdXaW5kb3dNb2RlOidleHBsaWNpdCcsCiAgICAgICAgICAgICAgICB2aWV3V2luZG93OnsKICAgICAgICAgICAgICAgICAgICBtYXg6bWF4UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgICAgICBtaW46MQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB2QXhpczoge3RpdGxlOiAnTGF0ZW5jeSAoJyArIHVuaXRUZXh0ICsgJyknLCBtaW5WYWx1ZTogMCB9LAogICAgICAgICAgICBsZWdlbmQ6IHtwb3NpdGlvbjogJ2JvdHRvbSd9CiAgICAgICAgfTsKCgogICAgICAgIC8vIGFkZCB0b29sdGlwcyB3aXRoIGNvcnJlY3QgcGVyY2VudGlsZSB0ZXh0IHRvIGRhdGE6CiAgICAgICAgdmFyIGNvbHVtbnMgPSBbMF07CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjaGFydERhdGEuZ2V0TnVtYmVyT2ZDb2x1bW5zKCk7IGkrKykgewogICAgICAgICAgICBjb2x1bW5zLnB1c2goaSk7CiAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbHRpcCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjYWxjOiAoZnVuY3Rpb24gKGopIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGR0LCByb3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMC9kdC5nZXRWYWx1ZShyb3csIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LmdldENvbHVtbkxhYmVsKGopICsgJzogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGlsZS50b1ByZWNpc2lvbig3KSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wlXFwnaWxlID0gJyArIGR0LmdldFZhbHVlKHJvdywgaikgKyAnICcgKyB1bml0VGV4dAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKGkpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgdmlldyA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5EYXRhVmlldyhjaGFydERhdGEpOwogICAgICAgIHZpZXcuc2V0Q29sdW1ucyhjb2x1bW5zKTsKCiAgICAgICAgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uTGluZUNoYXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydF9kaXYnKSk7CiAgICAgICAgY2hhcnQuZHJhdyh2aWV3LCBvcHRpb25zKTsKCiAgICAgICAgZ29vZ2xlLnZpc3VhbGl6YXRpb24uZXZlbnRzLmFkZExpc3RlbmVyKGNoYXJ0LCAncmVhZHknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNoYXJ0X2Rpdi5pbm5lckhUTUwgPSAnPGltZyBzcmM9IicgKyBjaGFydC5nZXRJbWFnZVVSSSgpICsgJyI+JzsKICAgICAgICB9KTsKCiAgICB9Cjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBhcHBlbmREYXRhU2VyaWVzKGhpc3RvLCBuYW1lLCBkYXRhU2VyaWVzKSB7CiAgICAgICAgdmFyIHNlcmllczsKICAgICAgICB2YXIgc2VyaWVzQ291bnQ7CiAgICAgICAgaWYgKGRhdGFTZXJpZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgc2VyaWVzID0gWyBbJ1gnLCBuYW1lXSBdOwogICAgICAgICAgICBzZXJpZXNDb3VudCA9IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VyaWVzID0gZGF0YVNlcmllczsKICAgICAgICAgICAgc2VyaWVzWzBdLnB1c2gobmFtZSk7CiAgICAgICAgICAgIHNlcmllc0NvdW50ID0gc2VyaWVzWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICB2YXIgbGluZXMgPSBoaXN0by5zcGxpdCgiXFxuIik7CgogICAgICAgIHZhciBzZXJpZXNJbmRleCA9IDE7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGxpbmUudHJpbSgpLnNwbGl0KC9bIF0rLyk7CgogICAgICAgICAgICBpZiAobGluZVswXSAhPSAnIycgJiYgdmFsdWVzLmxlbmd0aCA9PSA0KSB7CgogICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7CiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodmFsdWVzWzNdKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHgpICYmICFpc05hTih5KSkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzSW5kZXggPj0gc2VyaWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMucHVzaChbeF0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlcmllc1tzZXJpZXNJbmRleF0ubGVuZ3RoIDwgc2VyaWVzQ291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKHkpOwogICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdoaWxlIChzZXJpZXNJbmRleCA8IHNlcmllcy5sZW5ndGgpIHsKICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICBzZXJpZXNJbmRleCsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlcmllczsKICAgIH0KPC9zY3JpcHQ+CjxzY3JpcHQ+CiAgICBmdW5jdGlvbiB0aW1lVW5pdHNTZWxlY3RlZChldnQpIHsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9CgogICAgZnVuY3Rpb24gZG9FeHBvcnQoZXZlbnQpIHsKICAgICAgICBzYXZlU3ZnQXNQbmcoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJyksICdIaXN0b2dyYW0nLCAyLjApOwogICAgICAgIHJldHVybiB7dHlwZWQ6ICcnfTsKICAgIH0KPC9zY3JpcHQ+Cgo8c2NyaXB0PgogICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHsKICAgICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzOyAvLyBGaWxlTGlzdCBvYmplY3QKICAgICAgICB2YXIgZmlsZURpc3BsYXlBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVEaXNwbGF5QXJlYScpOwoKICAgICAgICB2YXIgbmFtZXMgPSBbXTsKICAgICAgICB2YXIgaGlzdG9zID0gW107CgogICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiZmlsZSBzZWxlY3RlZC4uLlxcbiI7CgogICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRmlsZUxpc3QgYW5kIHJlbmRlciBpbWFnZSBmaWxlcyBhcyB0aHVtYm5haWxzLgogICAgICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZXNbaV07IGkrKykgewogICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZnVuY3Rpb24odGhlRmlsZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBoaXN0b3MucHVzaChlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goZXNjYXBlKHRoZUZpbGUubmFtZSkpOwogICAgICAgICAgICAgICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiIFBsb3R0aW5nIGlucHV0IGZyb206ICIgKyBuYW1lcyArICJcXG4iOwogICAgICAgICAgICAgICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICAgICAgICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKGYpOwoKICAgICAgICAgICAgLy8gUmVhZCBpbiB0aGUgaW1hZ2UgZmlsZSBhcyBhIGRhdGEgVVJMLgogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmKTsKICAgICAgICB9CgogICAgfQoKPC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG91dCQgPSB0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiBleHBvcnRzIHx8IHRoaXM7CgogICAgICAgIHZhciBkb2N0eXBlID0gJzw/eG1sIHZlcnNpb249IjEuMCIgc3RhbmRhbG9uZT0ibm8iPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPic7CgogICAgICAgIGZ1bmN0aW9uIGlubGluZUltYWdlcyhjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3ZnIGltYWdlJyk7CiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1hZ2VzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGxlZnQgPT0gMCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgKGZ1bmN0aW9uKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmh0dHAvLnRlc3QoaHJlZikgJiYgIShuZXcgUmVnRXhwKCdeJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0KS50ZXN0KGhyZWYpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVuZGVyIGVtYmVkZGVkIGltYWdlcyBsaW5raW5nIHRvIGV4dGVybmFsIGhvc3RzLiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKTsKICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd4bGluazpocmVmJywgY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykpOwogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KShpbWFnZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdHlsZXMoZG9tKSB7CiAgICAgICAgICAgIHZhciBjc3MgPSAiIjsKICAgICAgICAgICAgdmFyIHNoZWV0cyA9IGRvY3VtZW50LnN0eWxlU2hlZXRzOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHNoZWV0c1tpXS5oYXNPd25Qcm9wZXJ0eSgnY3NzUnVsZXMnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IHNoZWV0c1tpXS5jc3NSdWxlczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbal07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArPSBydWxlLnNlbGVjdG9yVGV4dCArICIgeyAiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgIiB9XFxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwogICAgICAgICAgICBzLmlubmVySFRNTCA9ICI8IVtDREFUQVtcXG4iICsgY3NzICsgIlxcbl1dPiI7CgogICAgICAgICAgICB2YXIgZGVmcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RlZnMnKTsKICAgICAgICAgICAgZGVmcy5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgcmV0dXJuIGRlZnM7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaSA9IGZ1bmN0aW9uKGVsLCBzY2FsZUZhY3RvciwgY2IpIHsKICAgICAgICAgICAgc2NhbGVGYWN0b3IgPSBzY2FsZUZhY3RvciB8fCAxOwoKICAgICAgICAgICAgaW5saW5lSW1hZ2VzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCd3aWR0aCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNsb25lLnN0eWxlLndpZHRoCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IG91dCQuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgICAgICAgICB8fCBjbG9uZS5zdHlsZS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfHwgb3V0JC5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICB2YXIgeG1sbnMgPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy8iOwoKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsICIxLjEiKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnMiLCAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnM6eGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIHdpZHRoICogc2NhbGVGYWN0b3IpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCBoZWlnaHQgKiBzY2FsZUZhY3Rvcik7CiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwICIgKyB3aWR0aCArICIgIiArIGhlaWdodCk7CiAgICAgICAgICAgICAgICBvdXRlci5hcHBlbmRDaGlsZChjbG9uZSk7CgogICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKHN0eWxlcyhjbG9uZSksIGNsb25lLmZpcnN0Q2hpbGQpOwoKICAgICAgICAgICAgICAgIHZhciBzdmcgPSBkb2N0eXBlICsgb3V0ZXIuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcgKyB3aW5kb3cuYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ZnKSkpOwogICAgICAgICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgICAgICAgICAgY2IodXJpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnNhdmVTdmdBc1BuZyA9IGZ1bmN0aW9uKGVsLCBuYW1lLCBzY2FsZUZhY3RvcikgewogICAgICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaShlbCwgc2NhbGVGYWN0b3IsIGZ1bmN0aW9uKHVyaSkgewogICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmk7CiAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pKCk7Cjwvc2NyaXB0PgoKPHN0eWxlPgogICAgLnNsaWRlci13aWR0aDUwMAogICAgewogICAgICAgIHdpZHRoOiA1MDBweDsKICAgIH0KPC9zdHlsZT4KCjwvaGVhZD4KCjxib2R5PgoKX19DSEFSVFNfVEVYVF9fCgo8aDI+UGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+Cgo8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVzIiBuYW1lPSJmaWxlc1tdIiBtdWx0aXBsZSAvPgoKPHByZSBpZD0iZmlsZURpc3BsYXlBcmVhIj5QbGVhc2Ugc2VsZWN0IGZpbGUocykgYWJvdmUuPC9wcmU+Cgo8IS0tRGl2IHRoYXQgd2lsbCBob2xkIHRoZSBjaGFydC0tPgo8ZGl2IGlkPSJjaGFydF9kaXYiPk5vbmUgTG9hZGVkPC9kaXY+CgpMYXRlbmN5IHRpbWUgdW5pdHM6CjxzZWxlY3QgbmFtZT0idW5pdHMiIHNpemU9IjEiIGlkPSJ0aW1lVW5pdFNlbGVjdGlvbiIgb25DaGFuZ2U9InRpbWVVbml0c1NlbGVjdGVkKCkiPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAoc2Vjb25kcykiPnNlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gc2VsZWN0ZWQgdmFsdWU9IkxhdGVuY3kgKG1pbGxpc2Vjb25kcykiPm1pbGxpc2Vjb25kczwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAocXMpIj5taWNyb3NlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IkxhdGVuY3kgKG5hbm9zZWNvbmRzKSI+bmFub3NlY29uZHM8L29wdGlvbj4KPC9zZWxlY3Q+CjxidXR0b24gdHlwZT0nYnV0dG9uJyBvbmNsaWNrPSdkb0V4cG9ydChldmVudCknPkV4cG9ydCBJbWFnZTwvYnV0dG9uPgoKJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7CjxwPgpQZXJjZW50aWxlIHJhbmdlOgoKPGlucHV0IHR5cGU9InJhbmdlIiBjbGFzcz0ic2xpZGVyLXdpZHRoNTAwIgogICAgICAgbWluPSIxIiBtYXg9IjgiIHZhbHVlPSI3IiBzdGVwPSIxIgogICAgICAgd2lkdGg9IjMwMHB4IgogICAgICAgb25jaGFuZ2U9InNob3dWYWx1ZSh0aGlzLnZhbHVlKSIgLz4KPHNwYW4gaWQ9InBlcmNlbnRpbGVSYW5nZSI+OTkuOTk5OTklPC9zcGFuPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBzaG93VmFsdWUobmV3VmFsdWUpIHsKICAgICAgICB2YXIgeCA9IE1hdGgucG93KDEwLCBuZXdWYWx1ZSk7CiAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMCAvIHgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZXJjZW50aWxlUmFuZ2UiKS5pbm5lckhUTUw9cGVyY2VudGlsZSArICIlIjsKICAgICAgICBtYXhQZXJjZW50aWxlID0geDsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9Cjwvc2NyaXB0Pgo8L3A+CjxwPgogICAgPGJyPgoqKiogTm90ZTogSW5wdXQgZmlsZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGluIHRoZSAuaGdybSBmb3JtYXQgcHJvZHVjZWQgYnkKSGlzdG9ncmFtTG9nUHJvY2Vzc29yLCBvciB0aGUgcGVyY2VudGlsZSBvdXRwdXQgZm9ybWF0IGZvciBIZHJIaXN0b2dyYW0uClNlZSBleGFtcGxlIGZpbGUgZm9ybWF0CiAgICA8YSBocmVmPSJodHRwczovL2dpdGh1Yi5jb20vSGRySGlzdG9ncmFtL0hkckhpc3RvZ3JhbS9ibG9iL21hc3Rlci9Hb29nbGVDaGFydHNFeGFtcGxlL2V4YW1wbGUxLnR4dCI+aGVyZTwvYT4KPC9wPgo8IS0tPGg0PkV4cGVjdGVkIFNlcnZpY2UgTGV2ZWw6PC9oND4tLT4KPCEtLTxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iRVNMIiB2YWx1ZT0iRVNMIj5QbG90IEV4cGVjdGVkIFNlcnZpY2UgTGV2ZWw8YnI+LS0+CjwhLS1QZXJjZW50aWxlOi0tPgo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMCIgbmFtZT0iRVNMUGVyY2VudGlsZTAiIHNpemU9IjYiIHZhbHVlID0gOTAgLz4tLT4KPCEtLSUgJm5ic3AgJm5ic3AgJm5ic3AgTGltaXQ6LS0+CjwhLS08aW5wdXQgdHlwZT0idGV4dCIgaWQ9IkVTTExpbWl0MCIgbmFtZT0iRVNMTGltaXQwIiBzaXplPSIxMiIvPi0tPgo8IS0tPGJyPi0tPgo8IS0tUGVyY2VudGlsZTotLT4KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMUGVyY2VudGlsZTEiIG5hbWU9IkVTTFBlcmNlbnRpbGUxIiBzaXplPSI2IiB2YWx1ZSA9IDk5IC8+LS0+CjwhLS0lICZuYnNwICZuYnNwICZuYnNwIExpbWl0Oi0tPgo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xMaW1pdDEiIG5hbWU9IkVTTExpbWl0MSIgc2l6ZT0iMTIiLz4tLT4KPCEtLTxicj4tLT4KPCEtLVBlcmNlbnRpbGU6LS0+CjwhLS08aW5wdXQgdHlwZT0idGV4dCIgaWQ9IkVTTFBlcmNlbnRpbGUyIiBuYW1lPSJFU0xQZXJjZW50aWxlMiIgc2l6ZT0iNiIgdmFsdWUgPSA5OS45OSAvPi0tPgo8IS0tJSAmbmJzcCAmbmJzcCAmbmJzcCBMaW1pdDotLT4KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMTGltaXQyIiBuYW1lPSJFU0xMaW1pdDIiIHNpemU9IjEyIi8+LS0+CjwhLS08YnI+LS0+CjwhLS1QZXJjZW50aWxlOi0tPgo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMyIgbmFtZT0iRVNMUGVyY2VudGlsZTIiIHNpemU9IjYiIHZhbHVlPSIxMDAuMCIgcmVhZG9ubHkvPi0tPgo8IS0tJSAmbmJzcCAmbmJzcCAmbmJzcCBMaW1pdDotLT4KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMTGltaXQzIiBuYW1lPSJFU0xMaW1pdDIiIHNpemU9IjEyIi8+LS0+CgonJycKCnN1bW1hcnlfaHRtbF8zID0gJycnPC9ib2R5Pgo8L2h0bWw+CicnJwoKIyA8aDI+PGEgaHJlZj0iaHR0cHM6Ly93Zm91Y2hlLmdpdGh1Yi5pby9UdWxpcC1kb2NzIj5fX0RFU0MxX188L2E+IC8gX19ERVNDMl9fPC9oMj4KIyA8aDI+X19ERVNDMV9fIC8gX19ERVNDMl9fPC9oMj4KCmhlYWRlciA9ICcnJzwhRE9DVFlQRSBodG1sPgo8aHRtbD4KCjxzdHlsZT4KdGFibGUsIHRoLCB0ZCB7CiAgYm9yZGVyOjFweCBzb2xpZCBibGFjazsgZm9udC1zaXplOjE2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsKfQp0aDpudGgtY2hpbGQobisxNCkgewogICAgYmFja2dyb3VuZC1jb2xvcjogI0U1RTRFMjsKfQp0ZDpudGgtY2hpbGQobisxNCkgewogICAgYmFja2dyb3VuZC1jb2xvcjogI0U1RTRFMjsKfQo8L3N0eWxlPgoKPGJvZHk+Cgo8aDI+PGEgaHJlZj0iaHR0cHM6Ly93Zm91Y2hlLmdpdGh1Yi5pby9UdWxpcC1kb2NzIj5fX0RFU0MxX188L2E+IC8gX19ERVNDMl9fPC9oMj4KCjx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJSI+CiAgPHRyPgogICAgPHRoPkJlbmNobWFyazwvdGg+CiAgICA8dGg+UnVuIElkPC90aD4KICAgIDx0aD4jTjwvdGg+CiAgICA8dGg+I0Y8L3RoPgogICAgPHRoPkR1cmF0aW9uPC90aD4KICAgIDx0aD5BcHM8L3RoPgogICAgPHRoPkF2Z19SdDwvdGg+CiAgICA8dGg+U3RkZXY8L3RoPgogICAgPHRoPk1pbl9SdDwvdGg+CiAgICA8dGg+OTBwX1J0PC90aD4KICAgIDx0aD45OXBfUnQ8L3RoPgogICAgPHRoPk1heF9SdDwvdGg+CiAgICA8dGg+TWF4X1J0dDwvdGg+CiAgICA8dGg+QVFTPC90aD4KICAgIDx0aD5NUVM8L3RoPgogICAgPHRoPkFXVDwvdGg+CiAgICA8dGg+TVdUPC90aD4KICAgIDx0aD5DUFVfVDwvdGg+CiAgICA8dGg+Q1BVPC90aD4KICAgIDx0aD5NRU08L3RoPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX2NvbHVtbnMgPSAnJycKICA8dHI+CiAgICA8dGg+QmVuY2htYXJrPC90aD4KICAgIDx0aD5SdW4gSWQ8L3RoPgogICAgPHRoPiNOPC90aD4KICAgIDx0aD4jRjwvdGg+CiAgICA8dGg+RHVyYXRpb248L3RoPgogICAgPHRoPkFwczwvdGg+CiAgICA8dGg+QXZnX1J0PC90aD4KICAgIDx0aD5TdGRldjwvdGg+CiAgICA8dGg+TWluX1J0PC90aD4KICAgIDx0aD45MHBfUnQ8L3RoPgogICAgPHRoPjk5cF9SdDwvdGg+CiAgICA8dGg+TWF4X1J0PC90aD4KICAgIDx0aD5NYXhfUnR0PC90aD4KICAgIDx0aD5BUVM8L3RoPgogICAgPHRoPk1RUzwvdGg+CiAgICA8dGg+QVdUPC90aD4KICAgIDx0aD5NV1Q8L3RoPgogICAgPHRoPkNQVV9UPC90aD4KICAgIDx0aD5DUFU8L3RoPgogICAgPHRoPk1FTTwvdGg+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfaGVhZGVyID0gJycnCiAgPHRyPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX2VtcHR5X3JvdyA9ICcnJwogIDx0cj4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfZGV0YWlsX3JvdyA9ICcnJwogIDx0cj4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+JWQ8L3RkPgogICAgPHRkPiVkPC90ZD4KICAgIDx0ZD4lZDwvdGQ+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiUuM2Y8L3RkPgogICAgPHRkPiUuM2YgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiUuMWYgbXM8L3RkPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD4lLjFmPC90ZD4KICAgIDx0ZD4lZDwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiUuMWY8L3RkPgogICAgPHRkPiUuMWY8L3RkPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX3N1bW1hcnlfcm93ID0gJycnCiAgPHRyPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4KICAgIDx0ZD48Yj48dGFnMT4lZDwvdGFnMT48L2I+PC90ZD4KICAgIDx0ZD48Yj4lczwvYj48L3RkPgogICAgPHRkPjxiPjx0YWcyPiUuM2Y8L3RhZzI+PC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4zZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JWQ8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPgogICAgPHRkPjxiPiVzPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPgogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4KICA8L3RyPgonJycKCnRyYWlsZXIgPSAnJycKPC90YWJsZT4KPC9ib2R5Pgo8L2h0bWw+CicnJwoKY2hhcnRzX2h0bWwgPSAnJycKPGgyPkFjdGlvbnMgcGVyIFNlY29uZDwvaDI+CiAgPGRpdiBpZD0ibWFpbiIgc3R5bGU9IndpZHRoOiAxMDAlO2hlaWdodDo0MDBweDsiPjwvZGl2PgogIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9lY2hhcnRzLzUuNi4wL2VjaGFydHMubWluLmpzIj48L3NjcmlwdD4KICA8c2NyaXB0IHNyYz0iX19KU19UX0NIQVJUX18iPjwvc2NyaXB0Pgo8aDI+UmVzcG9uc2UgVGltZXMgKG1zKTwvaDI+CiAgPGRpdiBpZD0ibWFpbl9wIiBzdHlsZT0id2lkdGg6IDEwMCU7aGVpZ2h0OjQwMHB4OyI+PC9kaXY+CiAgPHNjcmlwdCBzcmM9Il9fSlNfUF9DSEFSVF9fIj48L3NjcmlwdD4KJycnCgpjaGFydF90X2h0bWwgPSAnJycKdmFyIG15Q2hhcnQxID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJykpOwoKdmFyIGRhdGEgPSAgX19EQVRBX187Cgp2YXIgb3B0aW9uID0gewogIGxlZ2VuZDoge30sCiAgdG9vbHRpcDogewogICAgdHJpZ2dlcjogJ2F4aXMnLAogIH0sCiAgZGF0YXNldDogewogICAgc291cmNlOmRhdGEsCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInXSwKICB9LAogIHhBeGlzOiB7IHR5cGU6ICd0aW1lJyB9LAogIHlBeGlzOiB7IH0sCiAgc2VyaWVzOiBbCiAgewogICAgIG5hbWU6ICdBY3Rpb25zL3MnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IxJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZSAKICAgICB9CiAgfSx7CiAgICAgbmFtZTogJ0ZhaWx1cmVzL3MnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IyJwogIH0KfV0KfTsKbXlDaGFydDEuc2V0T3B0aW9uKG9wdGlvbik7CicnJwoKY2hhcnRfcF9odG1sID0gJycnCnZhciBteUNoYXJ0MiA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbl9wJykpOwoKdmFyIGRhdGEgPSAgX19EQVRBX187Cgp2YXIgb3B0aW9uID0gewogIGxlZ2VuZDoge30sCiAgdG9vbHRpcDogewogICAgdHJpZ2dlcjogJ2F4aXMnLAogIH0sCiAgZGF0YXNldDogewogICAgc291cmNlOmRhdGEsCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInLCAnc2Vuc29yMycsICdzZW5zb3I0JywgJ3NlbnNvcjUnLCAnc2Vuc29yNiddLAogIH0sCiAgeEF4aXM6IHsgdHlwZTogJ3RpbWUnIH0sCiAgeUF4aXM6IHsgfSwKICBzZXJpZXM6IFsKICB7CiAgICAgbmFtZTogJ01heCcsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjYnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlCiAgICAgfQogIH0sewogICAgIG5hbWU6ICdwOTknLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3I1JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQogICAgIH0KICB9LHsKICAgICBuYW1lOiAncDk1JywKICAgICB0eXBlOiAnbGluZScsCiAgICAgc21vb3RoOiB0cnVlLAogICAgIGVuY29kZTogewogICAgICAgeDogJ3RpbWVzdGFtcCcsCiAgICAgICB5OiAnc2Vuc29yNCcgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUKICAgICB9CgogIH0sewogICAgIG5hbWU6ICdwOTAnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IzJyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQogICAgIH0KCiAgfSx7CiAgICAgbmFtZTogJ0F2ZycsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjInCiAgICAgfQogIH0sewogICAgIG5hbWU6ICdNaW4nLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3IxJwogIH0KfV0KfTsKbXlDaGFydDIuc2V0T3B0aW9uKG9wdGlvbik7Cgp3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpIHsKICBteUNoYXJ0MS5yZXNpemUoKTsKICBteUNoYXJ0Mi5yZXNpemUoKTsKfTsKJycnCgpjbGFzcyBTdW1tYXJ5OgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYubnVtX2FjdGlvbnMgPSAwCiAgICAgICAgc2VsZi5udW1fZmFpbGVkID0gMAogICAgICAgIHNlbGYuZHVyYXRpb24gPSAwLjAKICAgICAgICBzZWxmLm1pbl9ydCA9IDEwMDAwMDAwMDAuMAogICAgICAgIHNlbGYubWF4X3J0ID0gMC4wCiAgICAgICAgc2VsZi5tYXhfcnRfdHMgPSAiIgogICAgICAgIHNlbGYubWVtID0gMC4wCiAgICAgICAgc2VsZi5jcHUgPSAwLjAKICAgICAgICBzZWxmLm1heF9hd3QgPSAwLjAKICAgICAgICBzZWxmLm1heF93dCA9IDAuMAogICAgICAgIHNlbGYuYXZnX3FzID0gMC4wCiAgICAgICAgc2VsZi5tYXhfcXMgPSAwCiAgICAgICAgc2VsZi5uYW1lID0gIiIKICAgICAgICBzZWxmLmNwdV90aW1lX25zID0gMAogICAgICAgIHNlbGYuY2hhcnRfdF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozMy4xMDAnLCAxMTAwLCAwXQogICAgICAgIHNlbGYuY2hhcnRfcF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMF0KCmRlZiBjcmVhdGVSZXBvcnQoZmlsZW5hbWUsIHRleHQpOgoKICAgIGN3ZCA9IG9zLmdldGN3ZCgpCiAgICBpZiBvcy5wYXRoLmlzZGlyKCJidWlsZC9yZXBvcnRzL3R1bGlwIik6CiAgICAgICAgb3MuY2hkaXIoImJ1aWxkL3JlcG9ydHMvdHVsaXAiKQoKICAgIHByaW50KCJcbk91dHB1dCBmaWxlbmFtZSA9ICIgKyBmaWxlbmFtZSkKCiAgICBpZiB0ZXh0WzBdID09ICd7JzoKICAgICAgICBjb25maWdfZmlsZW5hbWUgPSAiIgogICAgICAgIGNvbmZpZ19maWxlbmFtZTIgPSAiIgogICAgZWxzZToKICAgICAgICBjb25maWdfZmlsZW5hbWUgPSB0ZXh0CiAgICAgICAgY29uZmlnX2ZpbGVuYW1lMiA9IG9zLnBhdGguYmFzZW5hbWUoY29uZmlnX2ZpbGVuYW1lKQoKICAgIGpoaCA9IHt9CiAgICBqc3MgPSB7fQoKICAgIHByaW50X2RldGFpbF9yb3dzID0gVHJ1ZQoKICAgIGdsb2JhbCBuYW1lMnMKICAgIGdsb2JhbCBuYW1lMnNfbGlzdAogICAgZ2xvYmFsIGJlbmNobWFya19pZAogICAgbmFtZTJzID0gIiIKICAgIG5hbWUyc19saXN0ID0gW10KICAgIGJlbmNobWFya19pZCA9IDAKCiAgICBzbSA9IE5vbmUKICAgIGpoID0gSGlzdG9ncmFtKDEsIDM2MDAqMTAwMCoxMDAwLCAzKQogICAgZmlsZU9iaiA9IG9wZW4oZmlsZW5hbWUpCiAgICBqYiA9IGpzb24ubG9hZChmaWxlT2JqLCBvYmplY3RfcGFpcnNfaG9vaz1PcmRlcmVkRGljdCkKICAgIHZlcnNpb24gPSBqYlsndmVyc2lvbiddCiAgICBkZXNjMSA9ICdUdWxpcCAnICsgdmVyc2lvbgogICAgcmIgPSBqYlsicmVzdWx0cyJdCgogICAgcmVwb3J0X2ZuID0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInJlcG9ydF9maWxlbmFtZSJdCiAgICByZXBvcnRfZmggPSBvcGVuKHJlcG9ydF9mbiwgIncrIikKCiAgICBnbG9iYWwgcmVwb3J0X2RuCiAgICByZXBvcnRfZG4gPSBvcy5wYXRoLnNwbGl0ZXh0KHJlcG9ydF9mbilbMF0KICAgIHRyeToKICAgICAgICBvcy5tYWtlZGlycyhyZXBvcnRfZG4pCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvZGlyKGZpbGVuYW1lKToKICAgICAgICBnbG9iYWwgcmVwb3J0X2RuCiAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihvcy5nZXRjd2QoKSwgcmVwb3J0X2RuLCBmaWxlbmFtZSkKCiAgICBkZWYgb2Rpckh0bWwoZmlsZW5hbWUpOgogICAgICAgIGdsb2JhbCByZXBvcnRfZG4KICAgICAgICByZXR1cm4gcmVwb3J0X2RuICsgIi8iICsgZmlsZW5hbWUKCiAgICBkZWYgbmFtZV90b19ocmVmKG5hbWUpOgogICAgICAgIGhyZWYgPSAnXycgKyByZS5zdWIocidcVycsICdfJywgbmFtZS5sb3dlcigpKQogICAgICAgIGhmaWxlID0gb3MucGF0aC5zcGxpdGV4dChjb25maWdfZmlsZW5hbWUyKVswXSArICIuaHRtbCIKICAgICAgICByZXR1cm4gIjxhIGhyZWY9JyVzIyVzJz4iJShoZmlsZSwgaHJlZikgKyBuYW1lICsgIjwvYT4iCgogICAgaWYgbGVuKGNvbmZpZ19maWxlbmFtZTIpID4gMDoKICAgICAgICBkZXNjMiA9ICI8YSBocmVmPSclcyc+IiUob3MucGF0aC5zcGxpdGV4dChjb25maWdfZmlsZW5hbWUyKVswXSArICIuaHRtbCIpCiAgICBlbHNlOgogICAgICAgIGRlc2MyID0gIiIKCiAgICBpZiBsZW4oY29uZmlnX2ZpbGVuYW1lMikgPiAwOgogICAgICAgIGRlc2MyICs9IGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJkZXNjcmlwdGlvbiJdICsgIjwvYT4gLyAiICsgamJbInRpbWVzdGFtcCJdWzotM10KICAgIGVsc2U6CiAgICAgICAgZGVzYzIgKz0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bImRlc2NyaXB0aW9uIl0gKyAiIC8gIiArIGpiWyJ0aW1lc3RhbXAiXVs6LTNdCgogICAgcHJpbnQoIlJlcG9ydCBmaWxlbmFtZSA9ICIgKyByZXBvcnRfZm4pCgogICAgZGVmIHByaW50ZihzKToKICAgICAgICByZXBvcnRfZmgud3JpdGUocykKCiAgICBkZWYgYWN0aW9uTmFtZShzKToKICAgICAgICByZXR1cm4gcy5zcGxpdCgiLCIpWzBdLnN0cmlwKCkKCiAgICBkZWYgYWN0aW9uRGVzYyhzKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBzLnNwbGl0KCIsIilbMV0uc3RyaXAoKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcmV0dXJuICIiCgogICAgZGVmIHN0cl9mcm9tX2NwdV90aW1lX25zKHZfbnMpOgogICAgICAgIHIgPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9dl9ucy8xMDAwMDAwMDAwLjApKSAgI1s6LTVdCiAgICAgICAgaWYgJy4nIGluIHI6CiAgICAgICAgICAgIHIgPSByWzotNV0KICAgICAgICByZXR1cm4gcgoKICAgIGRlZiBwcmludF9nbG9iYWxfc3VtbWFyeSgpOgogICAgICAgIGdsb2JhbCBuYW1lMnMKICAgICAgICBnbG9iYWwgbmFtZTJzX2xpc3QKICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkCgogICAgICAgIGF2Z19hcHMgPSAwLjAgaWYgc20ubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBzbS5udW1fYWN0aW9ucy9zbS5kdXJhdGlvbgogICAgICAgIGlmIHNtLm5hbWUgaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdOgogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIgogICAgICAgICAgICBzbS5jcHUgPSAwLjAKICAgICAgICBlbHNlOgogICAgICAgICAgICBjcHVfdCA9IHN0cl9mcm9tX2NwdV90aW1lX25zKHNtLmNwdV90aW1lX25zKQoKICAgICAgICBzdGF0c0ZpbGVuYW1lID0gJyVzXyVkLmh0bWwnJShvZGlyKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgc3RhdHNGaWxlbmFtZUh0bWwgPSAnJXNfJWQuaHRtbCclKG9kaXJIdG1sKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgdGV4dCA9ICI8YSBocmVmPSclcyc+JXM8L2E+IiUoc3RhdHNGaWxlbmFtZUh0bWwsIltTdW1tYXJ5XSIpCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbShzdGF0c0ZpbGVuYW1lKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KHN1bW1hcnlfaHRtbF8xKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsnKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgICAgIC8vIENvbm5lY3QgdGhlIGNob29zZSBmaWxlcyBidXR0b246JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgiICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZXMnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVGaWxlU2VsZWN0LCBmYWxzZSk7IikKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgICAgICAvLyBMb2FkIHNvbWUgc3RhdGljIGV4YW1wbGUgZGF0YTonKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIGlkeCA9IDAKICAgICAgICBhY3Rpb25zU3RyaW5nID0gIiIKICAgICAgICBoaXN0b3NTdHJpbmcgPSAiIgogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgaWR4ICs9IDEKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgaWYgbGVuKGFjdGlvbnNTdHJpbmcpID4gMDoKICAgICAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJwogICAgICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICcsICcKICAgICAgICAgICAgYWN0aW9uc1N0cmluZyArPSAiJ0ElcyciJShrZXkpCiAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAiZGF0YSVkU3RyIiUoaWR4KQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBkYXRhJWRTdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYjZGF0YV8lZCIpLmlubmVySFRNTC50cmltKCk7JyUoaWR4LGlkeCkpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIGlmIGlkeCA+IDE6CiAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJyArICInUyciCiAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAnLCAnICsgImRhdGElZFN0ciIlKDApCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGRhdGElZFN0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXyVkIikuaW5uZXJIVE1MLnRyaW0oKTsnJSgwLDApKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBoaXN0b3MgPSBbJXNdOyclKGhpc3Rvc1N0cmluZykpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgbmFtZXMgPSBbJXNdOyclKGFjdGlvbnNTdHJpbmcpKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQoKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsnKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZHJhd0NoYXJ0KCk7JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIH0nKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHRDaGFydEZpbGVuYW1lID0gJyVzXyVkX3QuanMnJShvZGlyKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgdENoYXJ0RmlsZW5hbWVIdG1sID0gJyVzXyVkX3QuanMnJShvZGlySHRtbChyZXBvcnRfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQogICAgICAgIHBDaGFydEZpbGVuYW1lID0gJyVzXyVkX3AuanMnJShvZGlyKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgcENoYXJ0RmlsZW5hbWVIdG1sID0gJyVzXyVkX3AuanMnJShvZGlySHRtbChyZXBvcnRfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KAogICAgICAgICAgICBzdW1tYXJ5X2h0bWxfMgogICAgICAgICAgICAgICAgLnJlcGxhY2UoIl9fQ0hBUlRTX1RFWFRfXyIsCiAgICAgICAgICAgICAgICAgICAgY2hhcnRzX2h0bWwKICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCJfX0pTX1RfQ0hBUlRfXyIsb3MucGF0aC5iYXNlbmFtZSh0Q2hhcnRGaWxlbmFtZUh0bWwpKQogICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIl9fSlNfUF9DSEFSVF9fIixvcy5wYXRoLmJhc2VuYW1lKHBDaGFydEZpbGVuYW1lSHRtbCkpKQogICAgICAgICAgICAgICAgKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQoKICAgICAgICBpZHggPSAwCiAgICAgICAgZm9yIGtleSBpbiBqc3Mua2V5cygpOgogICAgICAgICAgICBpZHggKz0gMQogICAgICAgICAgICBzbXggPSBqc3Nba2V5XQogICAgICAgICAgICBqaHggPSBqaGhba2V5XQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPGRpdiBpZD0iZGF0YV8lZCIgY2xhc3M9Imhpc3RvIj4nJShpZHgpKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICAgICAgamh4Lm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ocHJpbnRTdHJlYW0sIDEwMDAuMCkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzwvZGl2PicpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQoKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPGRpdiBpZD0iZGF0YV8wIiBjbGFzcz0iaGlzdG8iPicpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgamgub3V0cHV0UGVyY2VudGlsZURpc3RyaWJ1dGlvbihwcmludFN0cmVhbSwgMTAwMC4wKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8L2Rpdj4nKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQoKICAgICAgICBwcmludFN0cmVhbS5wcmludChzdW1tYXJ5X2h0bWxfMykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQoKICAgICAgICAjIEFjdGlvbnMvcyBjaGFydAogICAgICAgICNjaGFydF90X2xpc3QgPSBbCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzMuMTAwJywgMTEwMCwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6NTMuMjAwJywgMTAwMiwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDE6MDMuMzAwJywgMTEwNCwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDQ6MDMuNDAwJywgMTIwNS41LCAwXSwKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0NTowMy41MDAnLCAxMzA2LCAwXQogICAgICAgICNdCiAgICAgICAgY2hhcnRfcF9saXN0ID0gWwogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzAgXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQwOjUzWicsIDIsIDYsIDE1LCAyNSwgMzAsIDM1XSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQxOjAzWicsIDIsIDUsIDIwLCAzMCwgMzUsIDQwXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQ0OjAzWicsIDMsIDcsIDEyLCAyMiwgMzAsIDMyXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQ1OjAzWicsIDIsIDEwLCAxMywgMjMsIDMwLCAzM10KICAgICAgICBdCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbSh0Q2hhcnRGaWxlbmFtZSkKICAgICAgICBwcmludFN0cmVhbS5wcmludChjaGFydF90X2h0bWwucmVwbGFjZSgiX19EQVRBX18iLCgiJXMiJShzbS5jaGFydF90X2xpc3QpKS5yZXBsYWNlKCJ1JyIsIiciKSkpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQogICAgICAgIHByaW50U3RyZWFtLmNsb3NlKCkKCiAgICAgICAgIyBSZXNwb25zZSBUaW1lIChtcykgY2hhcnQKICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHBDaGFydEZpbGVuYW1lKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KGNoYXJ0X3BfaHRtbC5yZXBsYWNlKCJfX0RBVEFfXyIsKCIlcyIlKHNtLmNoYXJ0X3BfbGlzdCkpLnJlcGxhY2UoInUnIiwiJyIpKSkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQoKICAgICAgICBodG1sID0gYmVuY2htYXJrX3N1bW1hcnlfcm93JShuYW1lMnMsdGV4dCxzbS5udW1fYWN0aW9ucyxzbS5udW1fZmFpbGVkLHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksYXZnX2FwcyxqaC5nZXRNZWFuKCkvMTAwMC4wLGpoLmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCxzbS5taW5fcnQsamguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wLGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCxzbS5tYXhfcnQsc20ubWF4X3J0X3RzWzg6XSxzbS5hdmdfcXMsc20ubWF4X3FzLHNtLm1heF9hd3Qsc20ubWF4X3d0LGNwdV90LHNtLmNwdSxzbS5tZW0pCiAgICAgICAgaWYgbm90IHByaW50X2RldGFpbF9yb3dzOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L2I+IiwiIikKICAgICAgICAjIFZhbGlkYXRpb246ICNGCiAgICAgICAgaWYgc20ubnVtX2ZhaWxlZCA+IDA6CiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcxPiIsIjxtYXJrPiIpCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMT4iLCI8L21hcms+IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCIiKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzE+IiwiIikKICAgICAgICAjIFZhbGlkYXRpb246IEF2Z19BUFMKICAgICAgICAjcHJpbnQoc20ubmFtZSkKICAgICAgICBpZiAiYXBzX3JhdGUiIGluIGpiWyJjb25maWciXVsiYmVuY2htYXJrcyJdW3NtLm5hbWVdLmtleXMoKToKICAgICAgICAgICAgdGFyZ2V0X2FwcyA9IGpiWyJjb25maWciXVsiYmVuY2htYXJrcyJdW3NtLm5hbWVdWyJhcHNfcmF0ZSJdCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdGFyZ2V0X2FwcyA9IDAuMAogICAgICAgIGFwc19yYXRlX3N0ZXBfY2hhbmdlID0gMC4wCiAgICAgICAgaWYgImFwc19yYXRlX3N0ZXBfY2hhbmdlIiBpbiBqYlsiY29uZmlnIl1bImJlbmNobWFya3MiXVtzbS5uYW1lXS5rZXlzKCk6CiAgICAgICAgICAgIGFwc19yYXRlX3N0ZXBfY2hhbmdlID0gamJbImNvbmZpZyJdWyJiZW5jaG1hcmtzIl1bc20ubmFtZV1bImFwc19yYXRlX3N0ZXBfY2hhbmdlIl0KICAgICAgICBpZiBhcHNfcmF0ZV9zdGVwX2NoYW5nZSA9PSAwLjAgYW5kIHRhcmdldF9hcHMgPiAwLjA6CiAgICAgICAgICAgIGRlbHRhX3BlcmNlbnRhZ2VfYXBzID0gMTAwLjAqYWJzKHRhcmdldF9hcHMtYXZnX2FwcykvdGFyZ2V0X2FwcwogICAgICAgICAgICBpZiBkZWx0YV9wZXJjZW50YWdlX2FwcyA+IDEuNToKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIjxtYXJrPiIpCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzI+IiwiPC9tYXJrPiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCiAgICAgICAgcHJpbnRmKGh0bWwpCiAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6CiAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdCiAgICAgICAgICAgIGRlbCBuYW1lMnNfbGlzdFswXQoKICAgIGRlZiBwcmludF9hY3Rpb25fc3VtbWFyeSgpOgogICAgICAgIGdsb2JhbCBuYW1lMnMKICAgICAgICBnbG9iYWwgbmFtZTJzX2xpc3QKICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkCiAgICAgICAgcGFnZV9pZCA9IDAKICAgICAgICBudW1fa2V5cyA9IGxlbihqc3Mua2V5cygpKQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIHRleHQgPSAiWyVzLiVzXSIlKGtleSwgYWN0aW9uTmFtZShqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsidXNlcl9hY3Rpb25zIl1ba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0ZXh0ID0gIlslc10iJShrZXkpCiAgICAgICAgICAgIHN0YXRzRmlsZW5hbWUgPSAnJXNfJWRfJWQuaHRtbCclKG9kaXIocmVwb3J0X2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCxwYWdlX2lkKQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lSHRtbCA9ICclc18lZF8lZC5odG1sJyUob2Rpckh0bWwocmVwb3J0X2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCxwYWdlX2lkKQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lUHJldiA9ICclc18lZF8lZC5odG1sJyUocmVwb3J0X2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLGFicyhwYWdlX2lkLTEpKQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lTmV4dCA9ICclc18lZF8lZC5odG1sJyUocmVwb3J0X2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLHBhZ2VfaWQrMSkKICAgICAgICAgICAgdGV4dCA9ICI8YSBocmVmPSclcyc+JXM8L2E+IiUoc3RhdHNGaWxlbmFtZUh0bWwsdGV4dCkKICAgICAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbShzdGF0c0ZpbGVuYW1lKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8aHRtbD4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8c3R5bGU+IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigidGFibGUsIHRoLCB0ZCB7IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBmb250LXNpemU6MTZweDsgdGV4dC1hbGlnbjogY2VudGVyOyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIn0iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJtYXJrIHsiKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGJhY2tncm91bmQtY29sb3I6IExpZ2h0R3JheTsiKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGNvbG9yOiBibGFjazsiKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ9IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9zdHlsZT4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8Ym9keT4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIuLi8lcyI+VXA8L2E+JyUocmVwb3J0X2ZuKSkKICAgICAgICAgICAgaWYgKHBhZ2VfaWQgPT0gMCkgYW5kIChudW1fa2V5cyA9PSAxKToKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPlByZXY8L2E+JykKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPk5leHQ8L2E+JykKICAgICAgICAgICAgZWxpZiAocGFnZV9pZCA9PSAwKSBhbmQgKG51bV9rZXlzID4gMSk6CiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5QcmV2PC9hPicpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIlcyI+TmV4dDwvYT4nJShzdGF0c0ZpbGVuYW1lTmV4dCkpCiAgICAgICAgICAgIGVsaWYgcGFnZV9pZCsxID09IG51bV9rZXlzOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iIyI+TmV4dDwvYT4nKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPk5leHQ8L2E+JyUoc3RhdHNGaWxlbmFtZU5leHQpKQoKICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIGRlc2MgPSAiWyVzLiVzXSIlKGtleSwgYWN0aW9uTmFtZShqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsidXNlcl9hY3Rpb25zIl1ba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBkZXNjID0gIltBJXNdIiUoa2V5KQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8aDI+JXMgUGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+IiUoZGVzYykpCgogICAgICAgICAgICAjcHJpbnRTdHJlYW0ucHJpbnRsbigiPHByZT4iKQogICAgICAgICAgICAjamh4Lm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ocHJpbnRTdHJlYW0sIDEwMDAuMCkKCiAgICAgICAgICAgIGJvcyA9IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpCiAgICAgICAgICAgIG94ID0gUHJpbnRTdHJlYW0oYm9zKQogICAgICAgICAgICBqaHgub3V0cHV0UGVyY2VudGlsZURpc3RyaWJ1dGlvbihveCwgMTAwMC4wKQogICAgICAgICAgICBveC5mbHVzaCgpCiAgICAgICAgICAgIG94LmNsb3NlKCkKICAgICAgICAgICAgcHRleHQgPSBib3MudG9TdHJpbmcoKQogICAgICAgICAgICBsaW5lcyA9IHB0ZXh0LnNwbGl0KCdcbicpCiAgICAgICAgICAgIHRjb3VudCA9IGpoeC5nZXRUb3RhbENvdW50KCkKICAgICAgICAgICAgaGVhZGVyID0gVHJ1ZQogICAgICAgICAgICBybGlzdCA9IFtdCiAgICAgICAgICAgIGZvciBsaW5lIGluIGxpbmVzOgogICAgICAgICAgICAgIGlmIGxlbihsaW5lKSA9PSAwOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICBpZiBsaW5lWzBdICE9ICIjIjoKICAgICAgICAgICAgICAgIGUgPSBsaW5lLnNwbGl0KCkKICAgICAgICAgICAgICAgIGlmIGhlYWRlcjoKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPHRhYmxlIHN0eWxlPSJ3aWR0aDo2MDBweCI+JykKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8dHI+JykKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVswXSkpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+JXM8L3RoPiclKGVbMV0pKQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPiVzPC90aD4nJShlWzJdKSkKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVszXSkpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+QWJvdmVDb3VudDwvdGg+JykKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8L3RyPicpCiAgICAgICAgICAgICAgICAgIGhlYWRlciA9IEZhbHNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICBpZiBsZW4oZSkgPT0gMzoKICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZCgnJykKICAgICAgICAgICAgICAgICAgcmxpc3QuYXBwZW5kKGUpCiAgICAgICAgICAgIHJsaXN0LnJldmVyc2UoKQogICAgICAgICAgICBmb3IgZSBpbiBybGlzdDoKICAgICAgICAgICAgICAgIG1hcmsgPSBGYWxzZQogICAgICAgICAgICAgICAgaWYgZVsxXS5zdGFydHN3aXRoKCIwLjk5OTAiKToKICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgZVsxXS5zdGFydHN3aXRoKCIwLjk5MCIpOgogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjk1MDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUKICAgICAgICAgICAgICAgIGlmIGVbMV0gPT0gIjAuOTAwMDAwMDAwMDAwIjoKICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgZVsxXSA9PSAiMC44MDAwMDAwMDAwMDAiOgogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjUwMDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPHRyPicpCiAgICAgICAgICAgICAgICBpZiBtYXJrOgogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+PG1hcms+JXM8L21hcms+PC90ZD4nJShlWzBdKSkKICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPjxtYXJrPiVzPC9tYXJrPjwvdGQ+JyUoZVsxXSkpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+JXM8L3RkPiclKGVbMF0pKQogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+JXM8L3RkPiclKGVbMV0pKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsyXSkpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzNdKSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+JXM8L3RkPiclKHRjb3VudC1pbnQoZVsyXSkpKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8L3RyPicpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvdGFibGU+IikKCiAgICAgICAgICAgICNwcmludFN0cmVhbS5wcmludGxuKCI8L3ByZT4iKQoKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9ib2R5PiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvaHRtbD4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgICAgIHByaW50U3RyZWFtLmNsb3NlKCkKICAgICAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBzbXgubnVtX2FjdGlvbnMvc214LmR1cmF0aW9uCiAgICAgICAgICAgIGlmIHNteC5uYW1lIGluIFsib25TdGFydCIsICJvblN0b3AiXToKICAgICAgICAgICAgICAgIGNwdV90ID0gIjA6MDA6MDAiCiAgICAgICAgICAgICAgICBzbXguY3B1ID0gMC4wCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjcHVfdCA9IHN0cl9mcm9tX2NwdV90aW1lX25zKHNteC5jcHVfdGltZV9ucykKICAgICAgICAgICAgaHRtbCA9IGJlbmNobWFya19zdW1tYXJ5X3JvdyUobmFtZTJzLHRleHQsc214Lm51bV9hY3Rpb25zLHNteC5udW1fZmFpbGVkLHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksYXZnX2FwcyxqaHguZ2V0TWVhbigpLzEwMDAuMCxqaHguZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wLHNteC5taW5fcnQsamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCxqaHguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wLHNteC5tYXhfcnQsc214Lm1heF9ydF90c1s4Ol0sc214LmF2Z19xcyxzbXgubWF4X3FzLHNteC5tYXhfYXd0LHNteC5tYXhfd3QsY3B1X3Qsc214LmNwdSxzbXgubWVtKQogICAgICAgICAgICBpZiBub3QgcHJpbnRfZGV0YWlsX3Jvd3M6CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC9iPiIsIiIpCiAgICAgICAgICAgICMgUmVtb3ZlIHRhZzEKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzE+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIiIpCiAgICAgICAgICAgICMgUmVtb3ZlIHRhZzIKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCgogICAgICAgICAgICBwcmludGYoaHRtbCkKICAgICAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6CiAgICAgICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQogICAgICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCgogICAgICAgICAgICBwYWdlX2lkICs9IDEKCiAgICBwcmludGYoaGVhZGVyLnJlcGxhY2UoIl9fREVTQzFfXyIsIGRlc2MxKS5yZXBsYWNlKCJfX0RFU0MyX18iLCBkZXNjMikpCgogICAgcHJldl9yb3dfaWQgPSAwCiAgICBmb3IgZSBpbiByYjoKICAgICAgICBjdXJyZW50X3Jvd19pZCA9IGludChlWyJyb3dfaWQiXSkKICAgICAgICBpZiBjdXJyZW50X3Jvd19pZCA8PSBwcmV2X3Jvd19pZDoKICAgICAgICAgICAgaWYgc20gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcmludF9hY3Rpb25fc3VtbWFyeSgpCiAgICAgICAgICAgICAgICBwcmludF9nbG9iYWxfc3VtbWFyeSgpCiAgICAgICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2VtcHR5X3JvdykKICAgICAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfY29sdW1ucykKICAgICAgICAgICAgc20gPSBTdW1tYXJ5KCkKICAgICAgICAgICAgc20ubmFtZSA9IGVbImJtX25hbWUiXQogICAgICAgICAgICBqaC5yZXNldCgpCiAgICAgICAgICAgIGJlbmNobWFya19pZCArPSAxCiAgICAgICAgICAgIGpoaCA9IHt9CiAgICAgICAgICAgIGpzcyA9IHt9CiAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfaGVhZGVyJShuYW1lX3RvX2hyZWYoZVsiYm1fbmFtZSJdKSkpCiAgICAgICAgICAgIGlmIGxlbihlWyJ3b3JrZmxvd19uYW1lIl0pID4gMDoKICAgICAgICAgICAgICAgIG5hbWUyc19saXN0ID0gWyJ1OiVkLCB0OiVkIiUoZVsibnVtX3VzZXJzIl0sZVsibnVtX3RocmVhZHMiXSksICJ3OiVzIiUoZVsid29ya2Zsb3dfbmFtZSJdKSwgImM6JWQiJShlWyJjb250ZXh0X2lkIl0pICwiIl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5hbWUyc19saXN0ID0gWyJ1OiVkLCB0OiVkIiUoZVsibnVtX3VzZXJzIl0sZVsibnVtX3RocmVhZHMiXSksICJjOiVkIiUoZVsiY29udGV4dF9pZCJdKSwiIl0KICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCiAgICAgICAgaHQgPSBIaXN0b2dyYW0uZnJvbVN0cmluZyhlWyJoaXN0b2dyYW1fcnQiXSkKICAgICAgICBqaC5hZGQoaHQpCiAgICAgICAgcF9tZW0gPSAxMDAuMCAqIGVbImp2bV9tZW1vcnlfdXNlZCJdIC8gZVsianZtX21lbW9yeV9tYXhpbXVtIl0KICAgICAgICBwX2NwdSA9IGVbInByb2Nlc3NfY3B1X3V0aWxpemF0aW9uIl0KICAgICAgICBpZiBlWyJibV9uYW1lIl0gaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdOgogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIgogICAgICAgICAgICBwX2NwdSA9IDAuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdKQogICAgICAgICAgICBwX2NwdSA9IGVbInByb2Nlc3NfY3B1X3V0aWxpemF0aW9uIl0KICAgICAgICBpZiBwcmludF9kZXRhaWxfcm93czoKICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19kZXRhaWxfcm93JSggXAogICAgICAgICAgICAgICAgbmFtZTJzLAogICAgICAgICAgICAgICAgZVsicm93X2lkIl0rMSwKICAgICAgICAgICAgICAgIGVbIm51bV9hY3Rpb25zIl0sCiAgICAgICAgICAgICAgICBlWyJudW1fZmFpbGVkIl0sCiAgICAgICAgICAgICAgICBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KGVbImR1cmF0aW9uIl0pKSksCiAgICAgICAgICAgICAgICAwLjAgaWYgZVsiYm1fbmFtZSJdIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIGVbImF2Z19hcHMiXSwKICAgICAgICAgICAgICAgIGVbImF2Z19ydCJdLAogICAgICAgICAgICAgICAgaHQuZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wLAogICAgICAgICAgICAgICAgZVsibWluX3J0Il0sCiAgICAgICAgICAgICAgICBlWyJwZXJjZW50aWxlc19ydCJdWyI5MC4wIl0sCiAgICAgICAgICAgICAgICBlWyJwZXJjZW50aWxlc19ydCJdWyI5OS4wIl0sCiAgICAgICAgICAgICAgICBlWyJtYXhfcnQiXSwKICAgICAgICAgICAgICAgIGVbIm1heF9ydF90cyJdWzg6XSwKICAgICAgICAgICAgICAgIGVbImF2Z193dGhyZWFkX3FzaXplIl0sCiAgICAgICAgICAgICAgICBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdLAogICAgICAgICAgICAgICAgZVsiYXZnX3d0Il0sCiAgICAgICAgICAgICAgICBlWyJtYXhfd3QiXSwKICAgICAgICAgICAgICAgIGNwdV90LAogICAgICAgICAgICAgICAgcF9jcHUsCiAgICAgICAgICAgICAgICBwX21lbQogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6CiAgICAgICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQogICAgICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCiAgICAgICAgaWYgc20ubWluX3J0ID4gZVsibWluX3J0Il06CiAgICAgICAgICAgIHNtLm1pbl9ydCA9IGVbIm1pbl9ydCJdCiAgICAgICAgaWYgc20ubWF4X3J0IDwgZVsibWF4X3J0Il06CiAgICAgICAgICAgIHNtLm1heF9ydCA9IGVbIm1heF9ydCJdCiAgICAgICAgICAgIHNtLm1heF9ydF90cyA9IGVbIm1heF9ydF90cyJdCiAgICAgICAgc20ubnVtX2FjdGlvbnMgKz0gZVsibnVtX2FjdGlvbnMiXQogICAgICAgIHNtLm51bV9mYWlsZWQgKz0gZVsibnVtX2ZhaWxlZCJdCiAgICAgICAgc20uZHVyYXRpb24gKz0gZVsiZHVyYXRpb24iXQogICAgICAgIGlmIHNtLmF2Z19xcyA8IGVbImF2Z193dGhyZWFkX3FzaXplIl06CiAgICAgICAgICAgIHNtLmF2Z19xcyA9IGVbImF2Z193dGhyZWFkX3FzaXplIl0KICAgICAgICBpZiBzbS5tYXhfcXMgPCBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdOgogICAgICAgICAgICBzbS5tYXhfcXMgPSBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdCiAgICAgICAgaWYgc20ubWF4X2F3dCA8IGVbImF2Z193dCJdOgogICAgICAgICAgICBzbS5tYXhfYXd0ID0gZVsiYXZnX3d0Il0KICAgICAgICBpZiBzbS5tYXhfd3QgPCBlWyJtYXhfd3QiXToKICAgICAgICAgICAgc20ubWF4X3d0ID0gZVsibWF4X3d0Il0KICAgICAgICBpZiBzbS5tZW0gPCBwX21lbToKICAgICAgICAgICAgc20ubWVtID0gcF9tZW0KICAgICAgICBpZiBzbS5jcHUgPCBwX2NwdToKICAgICAgICAgICAgc20uY3B1ID0gcF9jcHUKICAgICAgICBzbS5jcHVfdGltZV9ucyArPSBlWyJwcm9jZXNzX2NwdV90aW1lX25zIl0KCiAgICAgICAgaWYgbGVuKHNtLmNoYXJ0X3RfbGlzdCkgPT0gLTE6CiAgICAgICAgICAgIHNtLmNoYXJ0X3RfbGlzdC5hcHBlbmQoCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfYmVnaW4iXS5yZXBsYWNlKCJfIiwgIlQiKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19hcHMiXSkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuM2YiJShlWyJudW1fZmFpbGVkIl0vZVsiZHVyYXRpb24iXSkpCiAgICAgICAgICAgIF0pCgogICAgICAgIHNtLmNoYXJ0X3RfbGlzdC5hcHBlbmQoCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfZW5kIl0ucmVwbGFjZSgiXyIsICJUIikpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfYXBzIl0pKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjNmIiUoZVsibnVtX2ZhaWxlZCJdL2VbImR1cmF0aW9uIl0pKQogICAgICAgICAgICAgXSkKCiAgICAgICAgIyBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzAgXQogICAgICAgIGlmIGxlbihzbS5jaGFydF9wX2xpc3QpID09IC0xOgogICAgICAgICAgICBzbS5jaGFydF9wX2xpc3QuYXBwZW5kKAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfYmVnaW4iXS5yZXBsYWNlKCJfIiwgIlQiKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtaW5fcnQiXSkpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX3J0Il0pKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTUuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1heF9ydCJdKSkKICAgICAgICAgICAgICAgIF0pCgogICAgICAgIHNtLmNoYXJ0X3BfbGlzdC5hcHBlbmQoCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfZW5kIl0ucmVwbGFjZSgiXyIsICJUIikpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtaW5fcnQiXSkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfcnQiXSkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTUuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtYXhfcnQiXSkpCiAgICAgICAgICAgIF0pCgogICAgICAgICMgamhoIC4uLgogICAgICAgIGZvciBrZXkgaW4gZVsidXNlcl9hY3Rpb25zIl0ua2V5cygpOgogICAgICAgICAgICBhciA9IGVbInVzZXJfYWN0aW9ucyJdW2tleV0KICAgICAgICAgICAgaHR0ID0gSGlzdG9ncmFtLmZyb21TdHJpbmcoYXJbImhpc3RvZ3JhbV9ydCJdKQogICAgICAgICAgICAjcHJpbnQoYXJbIm5hbWUiXSArICIgLSAiICsgIiUuM2YiJShodHQuZ2V0TWVhbigpLzEwMDAuMCkpCiAgICAgICAgICAgIGlmIGpoaC5oYXNfa2V5KGtleSk6CiAgICAgICAgICAgICAgICBqaGhba2V5XS5hZGQoaHR0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgamhoW2tleV0gPSBIaXN0b2dyYW0oMSwgMzYwMCoxMDAwKjEwMDAsIDMpCiAgICAgICAgICAgICAgICBqaGhba2V5XS5hZGQoaHR0KQogICAgICAgICAgICAjcHJpbnQoYXJbIm5hbWUiXSArICIgLSAiICsgIiUuM2YiJShqaGhba2V5XS5nZXRNZWFuKCkvMTAwMC4wKSArICIgLSAlZCIlKGpoaFtrZXldLmdldFRvdGFsQ291bnQoKSkpCgogICAgICAgICMganNzIC4uLgogICAgICAgIGZvciBrZXkgaW4gZVsidXNlcl9hY3Rpb25zIl0ua2V5cygpOgogICAgICAgICAgICBhciA9IGVbInVzZXJfYWN0aW9ucyJdW2tleV0KICAgICAgICAgICAgaWYganNzLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIHNteCA9IGpzc1trZXldCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzbXggPSBqc3Nba2V5XSA9IFN1bW1hcnkoKQogICAgICAgICAgICAgICAgc214Lm5hbWUgPSBlWyJibV9uYW1lIl0KCiAgICAgICAgICAgIGlmIHNteC5taW5fcnQgPiBhclsibWluX3J0Il06CiAgICAgICAgICAgICAgICBzbXgubWluX3J0ID0gYXJbIm1pbl9ydCJdCiAgICAgICAgICAgIGlmIHNteC5tYXhfcnQgPCBhclsibWF4X3J0Il06CiAgICAgICAgICAgICAgICBzbXgubWF4X3J0ID0gYXJbIm1heF9ydCJdCiAgICAgICAgICAgICAgICBzbXgubWF4X3J0X3RzID0gYXJbIm1heF9ydF90cyJdCiAgICAgICAgICAgIHNteC5udW1fYWN0aW9ucyArPSBhclsibnVtX2FjdGlvbnMiXQogICAgICAgICAgICBzbXgubnVtX2ZhaWxlZCArPSBhclsibnVtX2ZhaWxlZCJdCgogICAgICAgICAgICBzbXguZHVyYXRpb24gKz0gZVsiZHVyYXRpb24iXQogICAgICAgICAgICBpZiBzbXguYXZnX3FzIDwgZVsiYXZnX3d0aHJlYWRfcXNpemUiXToKICAgICAgICAgICAgICAgIHNteC5hdmdfcXMgPSBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdCiAgICAgICAgICAgIGlmIHNteC5tYXhfcXMgPCBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdOgogICAgICAgICAgICAgICAgc214Lm1heF9xcyA9IGVbIm1heF93dGhyZWFkX3FzaXplIl0KICAgICAgICAgICAgaWYgc214Lm1heF9hd3QgPCBlWyJhdmdfd3QiXToKICAgICAgICAgICAgICAgIHNteC5tYXhfYXd0ID0gZVsiYXZnX3d0Il0KICAgICAgICAgICAgaWYgc214Lm1heF93dCA8IGVbIm1heF93dCJdOgogICAgICAgICAgICAgICAgc214Lm1heF93dCA9IGVbIm1heF93dCJdCiAgICAgICAgICAgIGlmIHNteC5tZW0gPCBwX21lbToKICAgICAgICAgICAgICAgIHNteC5tZW0gPSBwX21lbQogICAgICAgICAgICBpZiBzbXguY3B1IDwgcF9jcHU6CiAgICAgICAgICAgICAgICBzbXguY3B1ID0gcF9jcHUKICAgICAgICAgICAgc214LmNwdV90aW1lX25zICs9IGVbInByb2Nlc3NfY3B1X3RpbWVfbnMiXQoKICAgIHByaW50X2FjdGlvbl9zdW1tYXJ5KCkKICAgIHByaW50X2dsb2JhbF9zdW1tYXJ5KCkKICAgIHByaW50Zih0cmFpbGVyKQoKICAgIHJlcG9ydF9maC5jbG9zZSgpCgogICAgb3MuY2hkaXIoY3dkKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGlmIGxlbihzeXMuYXJndikgPj0gMzoKICAgICAgICBmaWxlbmFtZSA9IHN5cy5hcmd2WzFdCiAgICAgICAgY29uZmlnRmlsZW5hbWUgPSBzeXMuYXJndlsyXQogICAgICAgIGNyZWF0ZVJlcG9ydChmaWxlbmFtZSwgY29uZmlnRmlsZW5hbWUpCg==";

    public static void main(String... args) {
        String mainScriptFilename = "report.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decodedBytes);
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
