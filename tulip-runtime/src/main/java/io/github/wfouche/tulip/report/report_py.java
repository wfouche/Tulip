package io.github.wfouche.tulip.report;

/// usr/bin/env jbang "$0" "$@" ; exit $?

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
//JAVA 21
// spotless:on

import java.util.Base64;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBwcmludF9mdW5jdGlvbgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGpzb24KaW1wb3J0IHJlCmltcG9ydCBzeXMKaW1wb3J0IG9yZy5IZHJIaXN0b2dyYW0uSGlzdG9ncmFtIGFzIEhpc3RvZ3JhbQppbXBvcnQgb3MKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgT3JkZXJlZERpY3QKaW1wb3J0IGphdmEuaW8uUHJpbnRTdHJlYW0gYXMgUHJpbnRTdHJlYW0KaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGFzIEJ5dGVBcnJheU91dHB1dFN0cmVhbQoKIyAvLy8gamJhbmcKIyByZXF1aXJlcy1qeXRob24gPSAiPT0yLjcuNCIKIyByZXF1aXJlcy1qYXZhID0gIj49MjEiCiMgZGVwZW5kZW5jaWVzID0gWwojICAgImNvbS5nb29nbGUuY29kZS5nc29uOmdzb246Mi4xMy4xIiwKIyAgICJvcmcuaGRyaGlzdG9ncmFtOkhkckhpc3RvZ3JhbToyLjIuMiIKIyBdCiMgW3B5dGhvbi1qdm1dCiMgICBkZWJ1ZyA9IGZhbHNlCiMgLy8vCgpzdW1tYXJ5X2h0bWxfMSA9ICcnJzwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgo8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICBkaXYuaGlzdG8gewogICAgICAgICBkaXNwbGF5OiBub25lCiAgICB9Cjwvc3R5bGU+Cgo8IS0tTG9hZCB0aGUgQUpBWCBBUEktLT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9qc2FwaSI+PC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CgogICAgaWYgKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlUmVhZGVyICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuQmxvYikgewogICAgICAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuCiAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCdUaGUgRmlsZSBBUElzIGFyZSBub3QgZnVsbHkgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci4nKTsKICAgIH0KCiAgICAvLyBMb2FkIHRoZSBWaXN1YWxpemF0aW9uIEFQSSBhbmQgdGhlIGNvcmVjaGFydCBwYWNrYWdlLgogICAgZ29vZ2xlLmxvYWQoJ3Zpc3VhbGl6YXRpb24nLCAnMS4wJywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOwoKICAgIC8vIFNldCBhIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBHb29nbGUgVmlzdWFsaXphdGlvbiBBUEkgaXMgbG9hZGVkLgogICAgZ29vZ2xlLnNldE9uTG9hZENhbGxiYWNrKGRyYXdJbml0aWFsQ2hhcnQpOwoKICAgIHZhciBjaGFydERhdGEgPSBudWxsOwogICAgdmFyIGNoYXJ0ID0gbnVsbDsKCiAgICBmdW5jdGlvbiBzZXRDaGFydERhdGEobmFtZXMsIGhpc3RvcykgewogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPCBoaXN0b3MubGVuZ3RoKSB7CiAgICAgICAgICAgIG5hbWVzLnB1c2goJ1Vua25vd24nKTsKICAgICAgICB9CgogICAgICAgIHZhciBzZXJpZXMgPSBbXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpc3Rvcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzZXJpZXMgPSBhcHBlbmREYXRhU2VyaWVzKGhpc3Rvc1tpXSwgbmFtZXNbaV0sIHNlcmllcyk7CiAgICAgICAgfQoKICAgICAgICBjaGFydERhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHNlcmllcyk7CiAgICB9CgonJycKCnRleHRfYmxvY2tfMSA9ICcnJwogICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsKICAgICAgICAvLyBDb25uZWN0IHRoZSBjaG9vc2UgZmlsZXMgYnV0dG9uOgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsKCiAgICAgICAgLy8gTG9hZCBzb21lIHN0YXRpYyBleGFtcGxlIGRhdGE6CiAgICAgICAgdmFyIGRhdGExU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMSIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEyU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMiIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGRhdGEzU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMyIpLmlubmVySFRNTC50cmltKCk7CiAgICAgICAgdmFyIGhpc3RvcyA9IFtkYXRhM1N0ciwgZGF0YTJTdHIsIGRhdGExU3RyXTsKICAgICAgICB2YXIgbmFtZXMgPSBbJ0EnLCAnQicsICdDJ107CgogICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgIH0KJycnCgpzdW1tYXJ5X2h0bWxfMiA9ICcnJwogICAgdmFyIG1heFBlcmNlbnRpbGUgPSAxMDAwMDAwOwoKICAgIGZ1bmN0aW9uIGRyYXdDaGFydCgpIHsKCiAgICAgICAgdmFyIHRpY2tzID0KICAgICAgICAgICAgICAgIFt7djoxLGY6JzAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAsZjonOTAlJ30sCiAgICAgICAgICAgICAgICAgICAge3Y6MTAwLGY6Jzk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAsZjonOTkuOSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMCxmOic5OS45OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAsZjonOTkuOTk5JSd9LAogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwMDAsZjonOTkuOTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMCxmOic5OS45OTk5OSUnfSwKICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMDAsZjonOTkuOTk5OTk5JSd9XTsKCiAgICAgICAgdmFyIHVuaXRTZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGltZVVuaXRTZWxlY3Rpb24iKTsKICAgICAgICB2YXIgdW5pdFNlbEluZGV4ID0gdW5pdFNlbGVjdGlvbi5zZWxlY3RlZEluZGV4OwogICAgICAgIHZhciB1bml0VGV4dCA9IHVuaXRTZWxlY3Rpb24ub3B0aW9uc1t1bml0U2VsSW5kZXhdLmlubmVySFRNTDsKCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7Ci8vICAgICAgICAgICAgdGl0bGU6ICdQZXJjZW50aWxlIFJlc3BvbnNlIFRpbWUgRGlzdHJpYnV0aW9uJywKICAgICAgICAgICAgaGVpZ2h0OiA0ODAsCi8vICAgICAgICAgICAgaEF4aXM6IHt0aXRsZTogJ1BlcmNlbnRpbGUnLCBtaW5WYWx1ZTogMCwgbG9nU2NhbGU6IHRydWUsIHRpY2tzOnRpY2tzIH0sCiAgICAgICAgICAgIGhBeGlzOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBlcmNlbnRpbGUiLAogICAgICAgICAgICAgICAgbWluVmFsdWU6IDEsIGxvZ1NjYWxlOiB0cnVlLCB0aWNrczp0aWNrcywKICAgICAgICAgICAgICAgIHZpZXdXaW5kb3dNb2RlOidleHBsaWNpdCcsCiAgICAgICAgICAgICAgICB2aWV3V2luZG93OnsKICAgICAgICAgICAgICAgICAgICBtYXg6bWF4UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgICAgICBtaW46MQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB2QXhpczoge3RpdGxlOiAnTGF0ZW5jeSAoJyArIHVuaXRUZXh0ICsgJyknLCBtaW5WYWx1ZTogMCB9LAogICAgICAgICAgICBsZWdlbmQ6IHtwb3NpdGlvbjogJ2JvdHRvbSd9CiAgICAgICAgfTsKCgogICAgICAgIC8vIGFkZCB0b29sdGlwcyB3aXRoIGNvcnJlY3QgcGVyY2VudGlsZSB0ZXh0IHRvIGRhdGE6CiAgICAgICAgdmFyIGNvbHVtbnMgPSBbMF07CiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjaGFydERhdGEuZ2V0TnVtYmVyT2ZDb2x1bW5zKCk7IGkrKykgewogICAgICAgICAgICBjb2x1bW5zLnB1c2goaSk7CiAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgICAgICAgICByb2xlOiAndG9vbHRpcCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjYWxjOiAoZnVuY3Rpb24gKGopIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGR0LCByb3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMC9kdC5nZXRWYWx1ZShyb3csIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LmdldENvbHVtbkxhYmVsKGopICsgJzogJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudGlsZS50b1ByZWNpc2lvbig3KSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wlXFwnaWxlID0gJyArIGR0LmdldFZhbHVlKHJvdywgaikgKyAnICcgKyB1bml0VGV4dAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKGkpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgdmlldyA9IG5ldyBnb29nbGUudmlzdWFsaXphdGlvbi5EYXRhVmlldyhjaGFydERhdGEpOwogICAgICAgIHZpZXcuc2V0Q29sdW1ucyhjb2x1bW5zKTsKCiAgICAgICAgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uTGluZUNoYXJ0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydF9kaXYnKSk7CiAgICAgICAgY2hhcnQuZHJhdyh2aWV3LCBvcHRpb25zKTsKCiAgICAgICAgZ29vZ2xlLnZpc3VhbGl6YXRpb24uZXZlbnRzLmFkZExpc3RlbmVyKGNoYXJ0LCAncmVhZHknLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNoYXJ0X2Rpdi5pbm5lckhUTUwgPSAnPGltZyBzcmM9IicgKyBjaGFydC5nZXRJbWFnZVVSSSgpICsgJyI+JzsKICAgICAgICB9KTsKCiAgICB9Cjwvc2NyaXB0Pgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBhcHBlbmREYXRhU2VyaWVzKGhpc3RvLCBuYW1lLCBkYXRhU2VyaWVzKSB7CiAgICAgICAgdmFyIHNlcmllczsKICAgICAgICB2YXIgc2VyaWVzQ291bnQ7CiAgICAgICAgaWYgKGRhdGFTZXJpZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgc2VyaWVzID0gWyBbJ1gnLCBuYW1lXSBdOwogICAgICAgICAgICBzZXJpZXNDb3VudCA9IDE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2VyaWVzID0gZGF0YVNlcmllczsKICAgICAgICAgICAgc2VyaWVzWzBdLnB1c2gobmFtZSk7CiAgICAgICAgICAgIHNlcmllc0NvdW50ID0gc2VyaWVzWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQoKICAgICAgICB2YXIgbGluZXMgPSBoaXN0by5zcGxpdCgiXFxuIik7CgogICAgICAgIHZhciBzZXJpZXNJbmRleCA9IDE7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGxpbmUudHJpbSgpLnNwbGl0KC9bIF0rLyk7CgogICAgICAgICAgICBpZiAobGluZVswXSAhPSAnIycgJiYgdmFsdWVzLmxlbmd0aCA9PSA0KSB7CgogICAgICAgICAgICAgICAgdmFyIHkgPSBwYXJzZUZsb2F0KHZhbHVlc1swXSk7CiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodmFsdWVzWzNdKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHgpICYmICFpc05hTih5KSkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoc2VyaWVzSW5kZXggPj0gc2VyaWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXMucHVzaChbeF0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNlcmllc1tzZXJpZXNJbmRleF0ubGVuZ3RoIDwgc2VyaWVzQ291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKHkpOwogICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4Kys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHdoaWxlIChzZXJpZXNJbmRleCA8IHNlcmllcy5sZW5ndGgpIHsKICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOwogICAgICAgICAgICBzZXJpZXNJbmRleCsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNlcmllczsKICAgIH0KPC9zY3JpcHQ+CjxzY3JpcHQ+CiAgICBmdW5jdGlvbiB0aW1lVW5pdHNTZWxlY3RlZChldnQpIHsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9CgogICAgZnVuY3Rpb24gZG9FeHBvcnQoZXZlbnQpIHsKICAgICAgICBzYXZlU3ZnQXNQbmcoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJyksICdIaXN0b2dyYW0nLCAyLjApOwogICAgICAgIHJldHVybiB7dHlwZWQ6ICcnfTsKICAgIH0KPC9zY3JpcHQ+Cgo8c2NyaXB0PgogICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHsKICAgICAgICB2YXIgZmlsZXMgPSBldnQudGFyZ2V0LmZpbGVzOyAvLyBGaWxlTGlzdCBvYmplY3QKICAgICAgICB2YXIgZmlsZURpc3BsYXlBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVEaXNwbGF5QXJlYScpOwoKICAgICAgICB2YXIgbmFtZXMgPSBbXTsKICAgICAgICB2YXIgaGlzdG9zID0gW107CgogICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiZmlsZSBzZWxlY3RlZC4uLlxcbiI7CgogICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRmlsZUxpc3QgYW5kIHJlbmRlciBpbWFnZSBmaWxlcyBhcyB0aHVtYm5haWxzLgogICAgICAgIGZvciAodmFyIGkgPSAwLCBmOyBmID0gZmlsZXNbaV07IGkrKykgewogICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZnVuY3Rpb24odGhlRmlsZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBoaXN0b3MucHVzaChlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goZXNjYXBlKHRoZUZpbGUubmFtZSkpOwogICAgICAgICAgICAgICAgICAgIGZpbGVEaXNwbGF5QXJlYS5pbm5lclRleHQgPSAiIFBsb3R0aW5nIGlucHV0IGZyb206ICIgKyBuYW1lcyArICJcXG4iOwogICAgICAgICAgICAgICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsKICAgICAgICAgICAgICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKGYpOwoKICAgICAgICAgICAgLy8gUmVhZCBpbiB0aGUgaW1hZ2UgZmlsZSBhcyBhIGRhdGEgVVJMLgogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmKTsKICAgICAgICB9CgogICAgfQoKPC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG91dCQgPSB0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiBleHBvcnRzIHx8IHRoaXM7CgogICAgICAgIHZhciBkb2N0eXBlID0gJzw/eG1sIHZlcnNpb249IjEuMCIgc3RhbmRhbG9uZT0ibm8iPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPic7CgogICAgICAgIGZ1bmN0aW9uIGlubGluZUltYWdlcyhjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgaW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3ZnIGltYWdlJyk7CiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1hZ2VzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGxlZnQgPT0gMCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgKGZ1bmN0aW9uKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCd4bGluazpocmVmJykudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvXmh0dHAvLnRlc3QoaHJlZikgJiYgIShuZXcgUmVnRXhwKCdeJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0KS50ZXN0KGhyZWYpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVuZGVyIGVtYmVkZGVkIGltYWdlcyBsaW5raW5nIHRvIGV4dGVybmFsIGhvc3RzLiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKTsKICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd4bGluazpocmVmJywgY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJykpOwogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0ID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KShpbWFnZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdHlsZXMoZG9tKSB7CiAgICAgICAgICAgIHZhciBjc3MgPSAiIjsKICAgICAgICAgICAgdmFyIHNoZWV0cyA9IGRvY3VtZW50LnN0eWxlU2hlZXRzOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHNoZWV0c1tpXS5oYXNPd25Qcm9wZXJ0eSgnY3NzUnVsZXMnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IHNoZWV0c1tpXS5jc3NSdWxlczsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbal07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocnVsZS5zdHlsZSkgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArPSBydWxlLnNlbGVjdG9yVGV4dCArICIgeyAiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgIiB9XFxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgICAgICBzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpOwogICAgICAgICAgICBzLmlubmVySFRNTCA9ICI8IVtDREFUQVtcXG4iICsgY3NzICsgIlxcbl1dPiI7CgogICAgICAgICAgICB2YXIgZGVmcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RlZnMnKTsKICAgICAgICAgICAgZGVmcy5hcHBlbmRDaGlsZChzKTsKICAgICAgICAgICAgcmV0dXJuIGRlZnM7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaSA9IGZ1bmN0aW9uKGVsLCBzY2FsZUZhY3RvciwgY2IpIHsKICAgICAgICAgICAgc2NhbGVGYWN0b3IgPSBzY2FsZUZhY3RvciB8fCAxOwoKICAgICAgICAgICAgaW5saW5lSW1hZ2VzKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBlbC5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCd3aWR0aCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNsb25lLnN0eWxlLndpZHRoCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IG91dCQuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBwYXJzZUludCgKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgICAgICAgICB8fCBjbG9uZS5zdHlsZS5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgfHwgb3V0JC5nZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKQogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICB2YXIgeG1sbnMgPSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy8iOwoKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgidmVyc2lvbiIsICIxLjEiKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnMiLCAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciKTsKICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnM6eGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIHdpZHRoICogc2NhbGVGYWN0b3IpOwogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCBoZWlnaHQgKiBzY2FsZUZhY3Rvcik7CiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwICIgKyB3aWR0aCArICIgIiArIGhlaWdodCk7CiAgICAgICAgICAgICAgICBvdXRlci5hcHBlbmRDaGlsZChjbG9uZSk7CgogICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKHN0eWxlcyhjbG9uZSksIGNsb25lLmZpcnN0Q2hpbGQpOwoKICAgICAgICAgICAgICAgIHZhciBzdmcgPSBkb2N0eXBlICsgb3V0ZXIuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcgKyB3aW5kb3cuYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ZnKSkpOwogICAgICAgICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgICAgICAgICAgY2IodXJpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBvdXQkLnNhdmVTdmdBc1BuZyA9IGZ1bmN0aW9uKGVsLCBuYW1lLCBzY2FsZUZhY3RvcikgewogICAgICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaShlbCwgc2NhbGVGYWN0b3IsIGZ1bmN0aW9uKHVyaSkgewogICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICBpbWFnZS5zcmMgPSB1cmk7CiAgICAgICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pKCk7Cjwvc2NyaXB0PgoKPHN0eWxlPgogICAgLnNsaWRlci13aWR0aDUwMAogICAgewogICAgICAgIHdpZHRoOiA1MDBweDsKICAgIH0KPC9zdHlsZT4KCjwvaGVhZD4KCjxib2R5PgoKX19DSEFSVFNfVEVYVF9fCgo8aDI+UGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+Cgo8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVzIiBuYW1lPSJmaWxlc1tdIiBtdWx0aXBsZSAvPgoKPHByZSBpZD0iZmlsZURpc3BsYXlBcmVhIj5QbGVhc2Ugc2VsZWN0IGZpbGUocykgYWJvdmUuPC9wcmU+Cgo8IS0tRGl2IHRoYXQgd2lsbCBob2xkIHRoZSBjaGFydC0tPgo8ZGl2IGlkPSJjaGFydF9kaXYiPk5vbmUgTG9hZGVkPC9kaXY+CgpMYXRlbmN5IHRpbWUgdW5pdHM6CjxzZWxlY3QgbmFtZT0idW5pdHMiIHNpemU9IjEiIGlkPSJ0aW1lVW5pdFNlbGVjdGlvbiIgb25DaGFuZ2U9InRpbWVVbml0c1NlbGVjdGVkKCkiPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAoc2Vjb25kcykiPnNlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gc2VsZWN0ZWQgdmFsdWU9IkxhdGVuY3kgKG1pbGxpc2Vjb25kcykiPm1pbGxpc2Vjb25kczwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAocXMpIj5taWNyb3NlY29uZHM8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9IkxhdGVuY3kgKG5hbm9zZWNvbmRzKSI+bmFub3NlY29uZHM8L29wdGlvbj4KPC9zZWxlY3Q+CjxidXR0b24gdHlwZT0nYnV0dG9uJyBvbmNsaWNrPSdkb0V4cG9ydChldmVudCknPkV4cG9ydCBJbWFnZTwvYnV0dG9uPgoKJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7CjxwPgpQZXJjZW50aWxlIHJhbmdlOgoKPGlucHV0IHR5cGU9InJhbmdlIiBjbGFzcz0ic2xpZGVyLXdpZHRoNTAwIgogICAgICAgbWluPSIxIiBtYXg9IjgiIHZhbHVlPSI3IiBzdGVwPSIxIgogICAgICAgd2lkdGg9IjMwMHB4IgogICAgICAgb25jaGFuZ2U9InNob3dWYWx1ZSh0aGlzLnZhbHVlKSIgLz4KPHNwYW4gaWQ9InBlcmNlbnRpbGVSYW5nZSI+OTkuOTk5OTklPC9zcGFuPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBzaG93VmFsdWUobmV3VmFsdWUpIHsKICAgICAgICB2YXIgeCA9IE1hdGgucG93KDEwLCBuZXdWYWx1ZSk7CiAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMCAvIHgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwZXJjZW50aWxlUmFuZ2UiKS5pbm5lckhUTUw9cGVyY2VudGlsZSArICIlIjsKICAgICAgICBtYXhQZXJjZW50aWxlID0geDsKICAgICAgICBkcmF3Q2hhcnQoKTsKICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307CiAgICB9Cjwvc2NyaXB0Pgo8L3A+CicnJwoKc3VtbWFyeV9odG1sX3RhYmxlID0gJycnCjxzdHlsZT4KdGFibGUsIHRoLCB0ZCB7CiAgYm9yZGVyOjFweCBzb2xpZCBibGFjazsgZm9udC1zaXplOjE2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsKfQptYXJrIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiBMaWdodEdyYXk7CiAgY29sb3I6IGJsYWNrOwp9Cjwvc3R5bGU+Cgo8aDI+W1RFU1RDT0RFXSBQZXJjZW50aWxlIFJlc3BvbnNlIFRpbWUgRGlzdHJpYnV0aW9uPC9oMj4KPHRhYmxlIHN0eWxlPSJ3aWR0aDo2MDBweCI+CiAgPHRyPgogICAgPHRoPlZhbHVlPC90aD4KICAgIDx0aD5QZXJjZW50aWxlPC90aD4KICAgIDx0aD5Ub3RhbENvdW50PC90aD4KICAgIDx0aD4xLygxLVBlcmNlbnRpbGUpPC90aD4KICAgIDx0aD5BYm92ZUNvdW50PC90aD4KICA8L3RyPgogIDx0cj4KICAgIDx0ZD4xMjg2LjE0MzwvdGQ+CiAgICA8dGQ+MS4wMDAwMDAwMDAwMDA8L3RkPgogICAgPHRkPjIzNjM8L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+MDwvdGQ+CiAgPC90cj4KICA8dHI+CiAgICA8dGQ+MTI4Ni4xNDM8L3RkPgogICAgPHRkPjAuOTk5NjA5Mzc1MDAwPC90ZD4KICAgIDx0ZD4yMzYzPC90ZD4KICAgIDx0ZD4yNTYwLjAwPC90ZD4KICAgIDx0ZD4wPC90ZD4KICA8L3RyPgogIDx0cj4KICAgIDx0ZD4xMjczLjg1NTwvdGQ+CiAgICA8dGQ+MC45OTk1NjA1NDY4NzU8L3RkPgogICAgPHRkPjIzNjI8L3RkPgogICAgPHRkPjIyNzUuNTY8L3RkPgogICAgPHRkPjE8L3RkPgogIDwvdHI+CiAgPHRyPgogICAgPHRkPjEyNzMuODU1PC90ZD4KICAgIDx0ZD4wLjk5OTUxMTcxODc1MDwvdGQ+CiAgICA8dGQ+MjM2MjwvdGQ+CiAgICA8dGQ+MjA0OC4wMDwvdGQ+CiAgICA8dGQ+MTwvdGQ+CiAgPC90cj4KICA8dHI+CiAgICA8dGQ+MTI3My44NTU8L3RkPgogICAgPHRkPjAuOTk5NDE0MDYyNTAwPC90ZD4KICAgIDx0ZD4yMzYyPC90ZD4KICAgIDx0ZD4xNzA2LjY3PC90ZD4KICAgIDx0ZD4xPC90ZD4KICA8L3RyPgogIDx0cj4KICAgIDx0ZD4xMjczLjg1NTwvdGQ+CiAgICA8dGQ+MC45OTkzMTY0MDYyNTA8L3RkPgogICAgPHRkPjIzNjI8L3RkPgogICAgPHRkPjE0NjIuODY8L3RkPgogICAgPHRkPjE8L3RkPgogIDwvdHI+CiAgPHRyPgogICAgPHRkPjEyNzMuODU1PC90ZD4KICAgIDx0ZD4wLjk5OTIxODc1MDAwMDwvdGQ+CiAgICA8dGQ+MjM2MjwvdGQ+CiAgICA8dGQ+MTI4MC4wMDwvdGQ+CiAgICA8dGQ+MTwvdGQ+CiAgPC90cj4KICA8dHI+CiAgICA8dGQ+MTI3My44NTU8L3RkPgogICAgPHRkPjAuOTk5MTIxMDkzNzUwPC90ZD4KICAgIDx0ZD4yMzYyPC90ZD4KICAgIDx0ZD4xMTM3Ljc4PC90ZD4KICAgIDx0ZD4xPC90ZD4KICA8L3RyPgogIDx0cj4KICAgIDx0ZD48bWFyaz4xMjczLjg1NTwvbWFyaz48L3RkPgogICAgPHRkPjxtYXJrPjAuOTk5MDIzNDM3NTAwPC9tYXJrPjwvdGQ+CiAgICA8dGQ+MjM2MjwvdGQ+CiAgICA8dGQ+MTAyNC4wMDwvdGQ+CiAgICA8dGQ+MTwvdGQ+CiAgPC90cj4KICA8dHI+CiAgICA8dGQ+MTI3My44NTU8L3RkPgogICAgPHRkPjAuOTk4ODI4MTI1MDAwPC90ZD4KICAgIDx0ZD4yMzYyPC90ZD4KICAgIDx0ZD44NTMuMzM8L3RkPgogICAgPHRkPjE8L3RkPgogIDwvdHI+CiAgPHRyPgogICAgPHRkPjEyNzEuODA3PC90ZD4KICAgIDx0ZD4wLjk5ODYzMjgxMjUwMDwvdGQ+CiAgICA8dGQ+MjM2MDwvdGQ+CiAgICA8dGQ+NzMxLjQzPC90ZD4KICAgIDx0ZD4zPC90ZD4KICA8L3RyPgogIDx0cj4KICAgIDx0ZD4xMjcxLjgwNzwvdGQ+CiAgICA8dGQ+MC45OTg0Mzc1MDAwMDA8L3RkPgogICAgPHRkPjIzNjA8L3RkPgogICAgPHRkPjY0MC4wMDwvdGQ+CiAgICA8dGQ+MzwvdGQ+CiAgPC90cj4KICA8dHI+CiAgICA8dGQ+MTI0Ny4yMzE8L3RkPgogICAgPHRkPjAuOTk4MjQyMTg3NTAwPC90ZD4KICAgIDx0ZD4yMzU5PC90ZD4KICAgIDx0ZD41NjguODk8L3RkPgogICAgPHRkPjQ8L3RkPgogIDwvdHI+CiAgPHRyPgogICAgPHRkPjEyNDcuMjMxPC90ZD4KICAgIDx0ZD4wLjk5ODA0Njg3NTAwMDwvdGQ+CiAgICA8dGQ+MjM1OTwvdGQ+CiAgICA8dGQ+NTEyLjAwPC90ZD4KICAgIDx0ZD40PC90ZD4KICA8L3RyPgo8L3RhYmxlPgonJycKCnN1bW1hcnlfaHRtbF8zID0gJycnPC9ib2R5Pgo8L2h0bWw+CicnJwoKIyA8aDI+PGEgaHJlZj0iaHR0cHM6Ly93Zm91Y2hlLmdpdGh1Yi5pby9UdWxpcC1kb2NzIj5fX0RFU0MxX188L2E+IC8gX19ERVNDMl9fPC9oMj4KIyA8aDI+X19ERVNDMV9fIC8gX19ERVNDMl9fPC9oMj4KCmhlYWRlciA9ICcnJzwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+Cgo8c3R5bGU+CnRhYmxlLCB0aCwgdGQgewogIGJvcmRlcjoxcHggc29saWQgYmxhY2s7IGZvbnQtc2l6ZToxNnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KdGg6bnRoLWNoaWxkKG4rMTQpIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNFNUU0RTI7Cn0KdGQ6bnRoLWNoaWxkKG4rMTQpIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNFNUU0RTI7Cn0KPC9zdHlsZT4KCjxib2R5PgoKPGgyPjxhIGhyZWY9Imh0dHBzOi8vd2ZvdWNoZS5naXRodWIuaW8vVHVsaXAtZG9jcyI+X19ERVNDMV9fPC9hPiAvIF9fREVTQzJfXzwvaDI+Cgo8dGFibGUgc3R5bGU9IndpZHRoOjEwMCUiPgogIDx0cj4KICAgIDx0aD5CZW5jaG1hcms8L3RoPgogICAgPHRoPlJ1biBJZDwvdGg+CiAgICA8dGg+I048L3RoPgogICAgPHRoPiNGPC90aD4KICAgIDx0aD5EdXJhdGlvbjwvdGg+CiAgICA8dGg+QXBzPC90aD4KICAgIDx0aD5BdmdfUnQ8L3RoPgogICAgPHRoPlN0ZF9EZXY8L3RoPgogICAgPHRoPk1pbl9SdDwvdGg+CiAgICA8dGg+cDkwX1J0PC90aD4KICAgIDx0aD5wOTlfUnQ8L3RoPgogICAgPHRoPk1heF9SdDwvdGg+CiAgICA8dGg+TWF4X1J0dDwvdGg+CiAgICA8dGg+QVFTPC90aD4KICAgIDx0aD5NUVM8L3RoPgogICAgPHRoPkFXVDwvdGg+CiAgICA8dGg+TVdUPC90aD4KICAgIDx0aD5DUFVfVDwvdGg+CiAgICA8dGg+Q1BVPC90aD4KICAgIDx0aD5NRU08L3RoPgogIDwvdHI+CicnJwoKYmVuY2htYXJrX2NvbHVtbnMgPSAnJycKICA8dHI+CiAgICA8dGg+QmVuY2htYXJrPC90aD4KICAgIDx0aD5SdW4gSWQ8L3RoPgogICAgPHRoPiNOPC90aD4KICAgIDx0aD4jRjwvdGg+CiAgICA8dGg+RHVyYXRpb248L3RoPgogICAgPHRoPkFwczwvdGg+CiAgICA8dGg+QXZnX1J0PC90aD4KICAgIDx0aD5TdGRfRGV2PC90aD4KICAgIDx0aD5NaW5fUnQ8L3RoPgogICAgPHRoPnA5MF9SdDwvdGg+CiAgICA8dGg+cDk5X1J0PC90aD4KICAgIDx0aD5NYXhfUnQ8L3RoPgogICAgPHRoPk1heF9SdHQ8L3RoPgogICAgPHRoPkFRUzwvdGg+CiAgICA8dGg+TVFTPC90aD4KICAgIDx0aD5BV1Q8L3RoPgogICAgPHRoPk1XVDwvdGg+CiAgICA8dGg+Q1BVX1Q8L3RoPgogICAgPHRoPkNQVTwvdGg+CiAgICA8dGg+TUVNPC90aD4KICA8L3RyPgonJycKCmJlbmNobWFya19oZWFkZXIgPSAnJycKICA8dHI+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgICA8dGQ+PC90ZD4KICAgIDx0ZD48L3RkPgogICAgPHRkPjwvdGQ+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfZW1wdHlfcm93ID0gJycnCiAgPHRyPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICAgIDx0ZD4mbmJzcDs8L3RkPgogICAgPHRkPiZuYnNwOzwvdGQ+CiAgICA8dGQ+Jm5ic3A7PC90ZD4KICA8L3RyPgonJycKCmJlbmNobWFya19kZXRhaWxfcm93ID0gJycnCiAgPHRyPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD4lZDwvdGQ+CiAgICA8dGQ+JWQ8L3RkPgogICAgPHRkPiVkPC90ZD4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+JS4zZjwvdGQ+CiAgICA8dGQ+JS4zZiBtczwvdGQ+CiAgICA8dGQ+JS4xZiBtczwvdGQ+CiAgICA8dGQ+JS4xZiBtczwvdGQ+CiAgICA8dGQ+JS4xZiBtczwvdGQ+CiAgICA8dGQ+JS4xZiBtczwvdGQ+CiAgICA8dGQ+JS4xZiBtczwvdGQ+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiUuMWY8L3RkPgogICAgPHRkPiVkPC90ZD4KICAgIDx0ZD4lLjFmPC90ZD4KICAgIDx0ZD4lLjFmPC90ZD4KICAgIDx0ZD4lczwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgICA8dGQ+JS4xZjwvdGQ+CiAgPC90cj4KJycnCgpiZW5jaG1hcmtfc3VtbWFyeV9yb3cgPSAnJycKICA8dHI+CiAgICA8dGQ+JXM8L3RkPgogICAgPHRkPiVzPC90ZD4KICAgIDx0ZD48Yj4lZDwvYj48L3RkPgogICAgPHRkPjxiPjx0YWcxPiVkPC90YWcxPjwvYj48L3RkPgogICAgPHRkPjxiPiVzPC9iPjwvdGQ+CiAgICA8dGQ+PGI+PHRhZzI+JS4zZjwvdGFnMj48L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjNmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lczwvYj48L3RkPgogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4KICAgIDx0ZD48Yj4lZDwvYj48L3RkPgogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+CiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPgogIDwvdHI+CicnJwoKdHJhaWxlciA9ICcnJwo8L3RhYmxlPgo8L2JvZHk+CjwvaHRtbD4KJycnCgpjaGFydHNfaHRtbCA9ICcnJwo8aDI+QWN0aW9ucyBwZXIgU2Vjb25kPC9oMj4KICA8ZGl2IGlkPSJtYWluIiBzdHlsZT0id2lkdGg6IDEwMCU7aGVpZ2h0OjQwMHB4OyI+PC9kaXY+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2VjaGFydHMvNi4wLjAvZWNoYXJ0cy5taW4uanMiPjwvc2NyaXB0PgogIDxzY3JpcHQgc3JjPSJfX0pTX1RfQ0hBUlRfXyI+PC9zY3JpcHQ+CjxoMj5SZXNwb25zZSBUaW1lcyAobXMpPC9oMj4KICA8ZGl2IGlkPSJtYWluX3AiIHN0eWxlPSJ3aWR0aDogMTAwJTtoZWlnaHQ6NDAwcHg7Ij48L2Rpdj4KICA8c2NyaXB0IHNyYz0iX19KU19QX0NIQVJUX18iPjwvc2NyaXB0PgonJycKCmNoYXJ0X3RfaHRtbCA9ICcnJwp2YXIgbXlDaGFydDEgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW4nKSk7Cgp2YXIgZGF0YSA9ICBfX0RBVEFfXzsKCnZhciBvcHRpb24gPSB7CiAgbGVnZW5kOiB7fSwKICB0b29sdGlwOiB7CiAgICB0cmlnZ2VyOiAnYXhpcycsCiAgfSwKICBkYXRhc2V0OiB7CiAgICBzb3VyY2U6ZGF0YSwKICAgIGRpbWVuc2lvbnM6IFsndGltZXN0YW1wJywgJ3NlbnNvcjEnLCAnc2Vuc29yMiddLAogIH0sCiAgeEF4aXM6IHsgdHlwZTogJ3RpbWUnIH0sCiAgeUF4aXM6IHsgfSwKICBzZXJpZXM6IFsKICB7CiAgICAgbmFtZTogJ0FjdGlvbnMvcycsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjEnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlIAogICAgIH0KICB9LHsKICAgICBuYW1lOiAnRmFpbHVyZXMvcycsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjInCiAgfQp9XQp9OwpteUNoYXJ0MS5zZXRPcHRpb24ob3B0aW9uKTsKJycnCgpjaGFydF9wX2h0bWwgPSAnJycKdmFyIG15Q2hhcnQyID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluX3AnKSk7Cgp2YXIgZGF0YSA9ICBfX0RBVEFfXzsKCnZhciBvcHRpb24gPSB7CiAgbGVnZW5kOiB7fSwKICB0b29sdGlwOiB7CiAgICB0cmlnZ2VyOiAnYXhpcycsCiAgfSwKICBkYXRhc2V0OiB7CiAgICBzb3VyY2U6ZGF0YSwKICAgIGRpbWVuc2lvbnM6IFsndGltZXN0YW1wJywgJ3NlbnNvcjEnLCAnc2Vuc29yMicsICdzZW5zb3IzJywgJ3NlbnNvcjQnLCAnc2Vuc29yNScsICdzZW5zb3I2J10sCiAgfSwKICB4QXhpczogeyB0eXBlOiAndGltZScgfSwKICB5QXhpczogeyB9LAogIHNlcmllczogWwogIHsKICAgICBuYW1lOiAnTWF4JywKICAgICB0eXBlOiAnbGluZScsCiAgICAgc21vb3RoOiB0cnVlLAogICAgIGVuY29kZTogewogICAgICAgeDogJ3RpbWVzdGFtcCcsCiAgICAgICB5OiAnc2Vuc29yNicgLy8gcmVmZXIgc2Vuc29yIDEgdmFsdWUKICAgICB9CiAgfSx7CiAgICAgbmFtZTogJ3A5OScsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjUnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlCiAgICAgfQogIH0sewogICAgIG5hbWU6ICdwOTUnLAogICAgIHR5cGU6ICdsaW5lJywKICAgICBzbW9vdGg6IHRydWUsCiAgICAgZW5jb2RlOiB7CiAgICAgICB4OiAndGltZXN0YW1wJywKICAgICAgIHk6ICdzZW5zb3I0JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQogICAgIH0KCiAgfSx7CiAgICAgbmFtZTogJ3A5MCcsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjMnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlCiAgICAgfQoKICB9LHsKICAgICBuYW1lOiAnQXZnJywKICAgICB0eXBlOiAnbGluZScsCiAgICAgc21vb3RoOiB0cnVlLAogICAgIGVuY29kZTogewogICAgICAgeDogJ3RpbWVzdGFtcCcsCiAgICAgICB5OiAnc2Vuc29yMicKICAgICB9CiAgfSx7CiAgICAgbmFtZTogJ01pbicsCiAgICAgdHlwZTogJ2xpbmUnLAogICAgIHNtb290aDogdHJ1ZSwKICAgICBlbmNvZGU6IHsKICAgICAgIHg6ICd0aW1lc3RhbXAnLAogICAgICAgeTogJ3NlbnNvcjEnCiAgfQp9XQp9OwpteUNoYXJ0Mi5zZXRPcHRpb24ob3B0aW9uKTsKCndpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkgewogIG15Q2hhcnQxLnJlc2l6ZSgpOwogIG15Q2hhcnQyLnJlc2l6ZSgpOwp9OwonJycKCmNsYXNzIFN1bW1hcnk6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5udW1fYWN0aW9ucyA9IDAKICAgICAgICBzZWxmLm51bV9mYWlsZWQgPSAwCiAgICAgICAgc2VsZi5kdXJhdGlvbiA9IDAuMAogICAgICAgIHNlbGYubWluX3J0ID0gMTAwMDAwMDAwMC4wCiAgICAgICAgc2VsZi5tYXhfcnQgPSAwLjAKICAgICAgICBzZWxmLm1heF9ydF90cyA9ICIiCiAgICAgICAgc2VsZi5tZW0gPSAwLjAKICAgICAgICBzZWxmLmNwdSA9IDAuMAogICAgICAgIHNlbGYubWF4X2F3dCA9IDAuMAogICAgICAgIHNlbGYubWF4X3d0ID0gMC4wCiAgICAgICAgc2VsZi5hdmdfcXMgPSAwLjAKICAgICAgICBzZWxmLm1heF9xcyA9IDAKICAgICAgICBzZWxmLm5hbWUgPSAiIgogICAgICAgIHNlbGYuY3B1X3RpbWVfbnMgPSAwCiAgICAgICAgc2VsZi5jaGFydF90X2xpc3QgPSBbXSAgICMgWycyMDE4LTA0LTEwVDIwOjQwOjMzLjEwMCcsIDExMDAsIDBdCiAgICAgICAgc2VsZi5jaGFydF9wX2xpc3QgPSBbXSAgICMgWycyMDE4LTA0LTEwVDIwOjQwOjMzWicsIDEsIDUsIDEwLCAyMCwgMjUsIDMwXQogICAgICAgIHNlbGYuYXBzX2NvdW50ID0gMC4wCiAgICAgICAgc2VsZi5hcHNfdGFyZ2V0X3N1bSA9IDAuMAoKZGVmIGNyZWF0ZVJlcG9ydChmaWxlbmFtZSwgdGV4dCk6CgogICAgY3dkID0gb3MuZ2V0Y3dkKCkKICAgIGlmIG9zLnBhdGguaXNkaXIoImJ1aWxkL3JlcG9ydHMvdHVsaXAiKToKICAgICAgICBvcy5jaGRpcigiYnVpbGQvcmVwb3J0cy90dWxpcCIpCgogICAgcHJpbnQoIlxuT3V0cHV0IGZpbGVuYW1lID0gIiArIGZpbGVuYW1lKQoKICAgIGlmIHRleHRbMF0gPT0gJ3snOgogICAgICAgIGNvbmZpZ19maWxlbmFtZSA9ICIiCiAgICAgICAgY29uZmlnX2ZpbGVuYW1lMiA9ICIiCiAgICBlbHNlOgogICAgICAgIGNvbmZpZ19maWxlbmFtZSA9IHRleHQKICAgICAgICBjb25maWdfZmlsZW5hbWUyID0gb3MucGF0aC5iYXNlbmFtZShjb25maWdfZmlsZW5hbWUpCgogICAgamhoID0ge30KICAgIGpzcyA9IHt9CgogICAgcHJpbnRfZGV0YWlsX3Jvd3MgPSBUcnVlCgogICAgZ2xvYmFsIG5hbWUycwogICAgZ2xvYmFsIG5hbWUyc19saXN0CiAgICBnbG9iYWwgYmVuY2htYXJrX2lkCiAgICBuYW1lMnMgPSAiIgogICAgbmFtZTJzX2xpc3QgPSBbXQogICAgYmVuY2htYXJrX2lkID0gMAoKICAgIHNtID0gTm9uZQogICAgamggPSBIaXN0b2dyYW0oMSwgMzYwMCoxMDAwKjEwMDAsIDMpCiAgICBmaWxlT2JqID0gb3BlbihmaWxlbmFtZSkKICAgIGpiID0ganNvbi5sb2FkKGZpbGVPYmosIG9iamVjdF9wYWlyc19ob29rPU9yZGVyZWREaWN0KQogICAgdmVyc2lvbiA9IGpiWyd2ZXJzaW9uJ10KICAgIGRlc2MxID0gJ1R1bGlwICcgKyB2ZXJzaW9uCiAgICByYiA9IGpiWyJyZXN1bHRzIl0KCiAgICByZXBvcnRfaHRtbF9mbiA9IGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJyZXBvcnRfZmlsZW5hbWUiXQogICAgcmVwb3J0X2h0bWxfZmggPSBvcGVuKHJlcG9ydF9odG1sX2ZuLCAidysiKQoKICAgIHJlcG9ydF9qc29uX2ZuID0gb3MucGF0aC5zcGxpdGV4dChyZXBvcnRfaHRtbF9mbilbMF0gKyAiLmpzb24iCiAgICByZXBvcnRfanNvbl9maCA9IG9wZW4ocmVwb3J0X2pzb25fZm4sICJ3KyIpCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgie1xuIikKICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICJjb25maWciOiAnICsganNvbi5kdW1wcyhqYlsiY29uZmlnIl0pICsgJyxcbicpCiAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAiYmVuY2htYXJrcyI6IHtcbicpCgogICAgZ2xvYmFsIHJlcG9ydF9kbgogICAgcmVwb3J0X2RuID0gb3MucGF0aC5zcGxpdGV4dChyZXBvcnRfaHRtbF9mbilbMF0KICAgIHRyeToKICAgICAgICBvcy5tYWtlZGlycyhyZXBvcnRfZG4pCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKICAgIGRlZiBvZGlyKGZpbGVuYW1lKToKICAgICAgICBnbG9iYWwgcmVwb3J0X2RuCiAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihvcy5nZXRjd2QoKSwgcmVwb3J0X2RuLCBmaWxlbmFtZSkKCiAgICBkZWYgb2Rpckh0bWwoZmlsZW5hbWUpOgogICAgICAgIGdsb2JhbCByZXBvcnRfZG4KICAgICAgICByZXR1cm4gcmVwb3J0X2RuICsgIi8iICsgZmlsZW5hbWUKCiAgICBkZWYgbmFtZV90b19ocmVmKG5hbWUpOgogICAgICAgIGhyZWYgPSAnXycgKyByZS5zdWIocidcVycsICdfJywgbmFtZS5sb3dlcigpKQogICAgICAgIGhmaWxlID0gb3MucGF0aC5zcGxpdGV4dChjb25maWdfZmlsZW5hbWUyKVswXSArICIuaHRtbCIKICAgICAgICByZXR1cm4gIjxhIGhyZWY9JyVzIyVzJz4iJShoZmlsZSwgaHJlZikgKyBuYW1lICsgIjwvYT4iCgogICAgaWYgbGVuKGNvbmZpZ19maWxlbmFtZTIpID4gMDoKICAgICAgICBkZXNjMiA9ICI8YSBocmVmPSclcyc+IiUob3MucGF0aC5zcGxpdGV4dChjb25maWdfZmlsZW5hbWUyKVswXSArICIuaHRtbCIpCiAgICBlbHNlOgogICAgICAgIGRlc2MyID0gIiIKCiAgICBpZiBsZW4oY29uZmlnX2ZpbGVuYW1lMikgPiAwOgogICAgICAgIGRlc2MyICs9IGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJkZXNjcmlwdGlvbiJdICsgIjwvYT4gLyAiICsgamJbInRpbWVzdGFtcCJdWzotM10KICAgIGVsc2U6CiAgICAgICAgZGVzYzIgKz0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bImRlc2NyaXB0aW9uIl0gKyAiIC8gIiArIGpiWyJ0aW1lc3RhbXAiXVs6LTNdCgogICAgcHJpbnQoIlJlcG9ydCBmaWxlbmFtZSA9ICIgKyByZXBvcnRfaHRtbF9mbikKCiAgICBkZWYgcHJpbnRmKHMpOgogICAgICAgIHJlcG9ydF9odG1sX2ZoLndyaXRlKHMpCgogICAgZGVmIGFjdGlvbk5hbWUocyk6CiAgICAgICAgcmV0dXJuIHMuc3BsaXQoIiwiKVswXS5zdHJpcCgpCgogICAgZGVmIGFjdGlvbkRlc2Mocyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gcy5zcGxpdCgiLCIpWzFdLnN0cmlwKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJldHVybiAiIgoKICAgIGRlZiBzdHJfZnJvbV9jcHVfdGltZV9ucyh2X25zKToKICAgICAgICByID0gc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPXZfbnMvMTAwMDAwMDAwMC4wKSkgICNbOi01XQogICAgICAgIGlmICcuJyBpbiByOgogICAgICAgICAgICByID0gcls6LTVdCiAgICAgICAgcmV0dXJuIHIKCiAgICBkZWYgcHJpbnRfZ2xvYmFsX3N1bW1hcnkoKToKICAgICAgICBnbG9iYWwgbmFtZTJzCiAgICAgICAgZ2xvYmFsIG5hbWUyc19saXN0CiAgICAgICAgZ2xvYmFsIGJlbmNobWFya19pZAoKICAgICAgICBhdmdfYXBzID0gMC4wIGlmIHNtLm5hbWUgaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdIGVsc2Ugc20ubnVtX2FjdGlvbnMvc20uZHVyYXRpb24KICAgICAgICBpZiBzbS5uYW1lIGluIFsib25TdGFydCIsICJvblN0b3AiXToKICAgICAgICAgICAgY3B1X3QgPSAiMDowMDowMCIKICAgICAgICAgICAgc20uY3B1ID0gMC4wCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3B1X3QgPSBzdHJfZnJvbV9jcHVfdGltZV9ucyhzbS5jcHVfdGltZV9ucykKCiAgICAgICAgc3RhdHNGaWxlbmFtZSA9ICclc18lZC5odG1sJyUob2RpcihyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpCiAgICAgICAgc3RhdHNGaWxlbmFtZUh0bWwgPSAnJXNfJWQuaHRtbCclKG9kaXJIdG1sKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkKICAgICAgICB0ZXh0ID0gIjxhIGhyZWY9JyVzJz4lczwvYT4iJShzdGF0c0ZpbGVuYW1lSHRtbCwiW1N1bW1hcnldIikKICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHN0YXRzRmlsZW5hbWUpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoc3VtbWFyeV9odG1sXzEpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICBmdW5jdGlvbiBkcmF3SW5pdGlhbENoYXJ0KCkgeycpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICAgICAgLy8gQ29ubmVjdCB0aGUgY2hvb3NlIGZpbGVzIGJ1dHRvbjonKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCIgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsiKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgICAgIC8vIExvYWQgc29tZSBzdGF0aWMgZXhhbXBsZSBkYXRhOicpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgaWR4ID0gMAogICAgICAgIGFjdGlvbnNTdHJpbmcgPSAiIgogICAgICAgIGhpc3Rvc1N0cmluZyA9ICIiCiAgICAgICAgZm9yIGtleSBpbiBqc3Mua2V5cygpOgogICAgICAgICAgICBpZHggKz0gMQogICAgICAgICAgICBzbXggPSBqc3Nba2V5XQogICAgICAgICAgICBqaHggPSBqaGhba2V5XQogICAgICAgICAgICBpZiBsZW4oYWN0aW9uc1N0cmluZykgPiAwOgogICAgICAgICAgICAgICAgYWN0aW9uc1N0cmluZyArPSAnLCAnCiAgICAgICAgICAgICAgICBoaXN0b3NTdHJpbmcgKz0gJywgJwogICAgICAgICAgICBhY3Rpb25zU3RyaW5nICs9ICInQSVzJyIlKGtleSkKICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICJkYXRhJWRTdHIiJShpZHgpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGRhdGElZFN0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXyVkIikuaW5uZXJIVE1MLnRyaW0oKTsnJShpZHgsaWR4KSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgaWYgaWR4ID4gMToKICAgICAgICAgICAgYWN0aW9uc1N0cmluZyArPSAnLCAnICsgIidTJyIKICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICcsICcgKyAiZGF0YSVkU3RyIiUoMCkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgZGF0YSVkU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfJWQiKS5pbm5lckhUTUwudHJpbSgpOyclKDAsMCkpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGhpc3RvcyA9IFslc107JyUoaGlzdG9zU3RyaW5nKSkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIHZhciBuYW1lcyA9IFslc107JyUoYWN0aW9uc1N0cmluZykpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCgogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgc2V0Q2hhcnREYXRhKG5hbWVzLCBoaXN0b3MpOycpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICBkcmF3Q2hhcnQoKTsnKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgfScpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgdENoYXJ0RmlsZW5hbWUgPSAnJXNfJWRfdC5qcyclKG9kaXIocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQogICAgICAgIHRDaGFydEZpbGVuYW1lSHRtbCA9ICclc18lZF90LmpzJyUob2Rpckh0bWwocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQogICAgICAgIHBDaGFydEZpbGVuYW1lID0gJyVzXyVkX3AuanMnJShvZGlyKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkKICAgICAgICBwQ2hhcnRGaWxlbmFtZUh0bWwgPSAnJXNfJWRfcC5qcyclKG9kaXJIdG1sKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0pLGJlbmNobWFya19pZCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgKICAgICAgICAgICAgc3VtbWFyeV9odG1sXzIKICAgICAgICAgICAgICAgIC5yZXBsYWNlKCJfX0NIQVJUU19URVhUX18iLAogICAgICAgICAgICAgICAgICAgIGNoYXJ0c19odG1sCiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19KU19UX0NIQVJUX18iLG9zLnBhdGguYmFzZW5hbWUodENoYXJ0RmlsZW5hbWVIdG1sKSkKICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCJfX0pTX1BfQ0hBUlRfXyIsb3MucGF0aC5iYXNlbmFtZShwQ2hhcnRGaWxlbmFtZUh0bWwpKSkKICAgICAgICAgICAgICAgICkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKCiAgICAgICAgaWR4ID0gMAogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgaWR4ICs9IDEKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzxkaXYgaWQ9ImRhdGFfJWQiIGNsYXNzPSJoaXN0byI+JyUoaWR4KSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgICAgIGpoeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8L2Rpdj4nKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzxkaXYgaWQ9ImRhdGFfMCIgY2xhc3M9Imhpc3RvIj4nKQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQogICAgICAgIGpoLm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ocHJpbnRTdHJlYW0sIDEwMDAuMCkKICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPC9kaXY+JykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoc3VtbWFyeV9odG1sX3RhYmxlKQoKICAgICAgICBwcmludFN0cmVhbS5wcmludChzdW1tYXJ5X2h0bWxfMykKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQoKICAgICAgICAjIEFjdGlvbnMvcyBjaGFydAogICAgICAgICNjaGFydF90X2xpc3QgPSBbCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzMuMTAwJywgMTEwMCwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6NTMuMjAwJywgMTAwMiwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDE6MDMuMzAwJywgMTEwNCwgMF0sCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDQ6MDMuNDAwJywgMTIwNS41LCAwXSwKICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0NTowMy41MDAnLCAxMzA2LCAwXQogICAgICAgICNdCiAgICAgICAgY2hhcnRfcF9saXN0ID0gWwogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzAgXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQwOjUzWicsIDIsIDYsIDE1LCAyNSwgMzAsIDM1XSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQxOjAzWicsIDIsIDUsIDIwLCAzMCwgMzUsIDQwXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQ0OjAzWicsIDMsIDcsIDEyLCAyMiwgMzAsIDMyXSwKICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQ1OjAzWicsIDIsIDEwLCAxMywgMjMsIDMwLCAzM10KICAgICAgICBdCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbSh0Q2hhcnRGaWxlbmFtZSkKICAgICAgICBwcmludFN0cmVhbS5wcmludChjaGFydF90X2h0bWwucmVwbGFjZSgiX19EQVRBX18iLCgiJXMiJShzbS5jaGFydF90X2xpc3QpKS5yZXBsYWNlKCJ1JyIsIiciKSkpCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpCiAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQogICAgICAgIHByaW50U3RyZWFtLmNsb3NlKCkKCiAgICAgICAgIyBSZXNwb25zZSBUaW1lIChtcykgY2hhcnQKICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHBDaGFydEZpbGVuYW1lKQogICAgICAgIHByaW50U3RyZWFtLnByaW50KGNoYXJ0X3BfaHRtbC5yZXBsYWNlKCJfX0RBVEFfXyIsKCIlcyIlKHNtLmNoYXJ0X3BfbGlzdCkpLnJlcGxhY2UoInUnIiwiJyIpKSkKICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkKICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpCiAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQoKICAgICAgICBpZiBUcnVlOgogICAgICAgICAgICByZCA9IHt9CiAgICAgICAgICAgIHJkWyJudW1fYWN0aW9ucyJdID0gc20ubnVtX2FjdGlvbnMKICAgICAgICAgICAgcmRbIm51bV9mYWlsZWQiXSA9IHNtLm51bV9mYWlsZWQKICAgICAgICAgICAgcmRbImR1cmF0aW9uIl0gPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpCiAgICAgICAgICAgIHJkWyJhcHMiXSA9IGF2Z19hcHMKICAgICAgICAgICAgcmRbImFwc190YXJnZXRfcmF0ZSJdID0gc20uYXBzX3RhcmdldF9zdW0gLyBzbS5hcHNfY291bnQKICAgICAgICAgICAgcmRbImF2Z19ydCJdID0gamguZ2V0TWVhbigpLzEwMDAuMAogICAgICAgICAgICByZFsic3RkX2RldiJdID0gamguZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wCiAgICAgICAgICAgIHJkWyJtaW5fcnQiXSA9IHNtLm1pbl9ydAogICAgICAgICAgICByZFsicDkwX3J0Il0gPSBqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjAKICAgICAgICAgICAgcmRbInA5OV9ydCJdID0gamguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wCiAgICAgICAgICAgIHJkWyJtYXhfcnQiXSA9IHNtLm1heF9ydAogICAgICAgICAgICByZFsibWF4X3J0dCJdID0gc20ubWF4X3J0X3RzLnJlcGxhY2UoIl8iLCJUIikKICAgICAgICAgICAgcmRbIkFRUyJdID0gc20uYXZnX3FzCiAgICAgICAgICAgIHJkWyJNUVMiXSA9IHNtLm1heF9xcwogICAgICAgICAgICByZFsiQVdUIl0gPSBzbS5tYXhfYXd0CiAgICAgICAgICAgIHJkWyJNV1QiXSA9IHNtLm1heF93dAogICAgICAgICAgICByZFsiQ1BVX1QiXSA9IGNwdV90CiAgICAgICAgICAgIHJkWyJDUFUiXSA9IHNtLmNwdQogICAgICAgICAgICByZFsiTUVNIl0gPSBzbS5tZW0KCiAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICwic3VtbWFyeSI6ICVzXG4nJShqc29uLmR1bXBzKHJkKSkpCgogICAgICAgIGh0bWwgPSBiZW5jaG1hcmtfc3VtbWFyeV9yb3clKAogICAgICAgICAgICBuYW1lMnMsCiAgICAgICAgICAgIHRleHQsCiAgICAgICAgICAgIHNtLm51bV9hY3Rpb25zLAogICAgICAgICAgICBzbS5udW1fZmFpbGVkLAogICAgICAgICAgICBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpLAogICAgICAgICAgICBhdmdfYXBzLAogICAgICAgICAgICBqaC5nZXRNZWFuKCkvMTAwMC4wLAogICAgICAgICAgICBqaC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAsCiAgICAgICAgICAgIHNtLm1pbl9ydCwKICAgICAgICAgICAgamguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wLAogICAgICAgICAgICBqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjAsCiAgICAgICAgICAgIHNtLm1heF9ydCwKICAgICAgICAgICAgc20ubWF4X3J0X3RzWzg6XSwKICAgICAgICAgICAgc20uYXZnX3FzLAogICAgICAgICAgICBzbS5tYXhfcXMsCiAgICAgICAgICAgIHNtLm1heF9hd3QsCiAgICAgICAgICAgIHNtLm1heF93dCwKICAgICAgICAgICAgY3B1X3QsCiAgICAgICAgICAgIHNtLmNwdSwKICAgICAgICAgICAgc20ubWVtKQogICAgICAgIGlmIG5vdCBwcmludF9kZXRhaWxfcm93czoKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPGI+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC9iPiIsIiIpCiAgICAgICAgIyBWYWxpZGF0aW9uOiAjRgogICAgICAgIGlmIHNtLm51bV9mYWlsZWQgPiAwOgogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCI8bWFyaz4iKQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzE+IiwiPC9tYXJrPiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzE+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIiIpCiAgICAgICAgIyBWYWxpZGF0aW9uOiBBdmdfQVBTCiAgICAgICAgI3ByaW50KHNtLm5hbWUpCiAgICAgICAgdGFyZ2V0X2FwcyA9IHJkWyJhcHNfdGFyZ2V0X3JhdGUiXQogICAgICAgIGlmIHRhcmdldF9hcHMgPiAwLjA6CiAgICAgICAgICAgIGRlbHRhX3BlcmNlbnRhZ2VfYXBzID0gMTAwLjAqYWJzKHRhcmdldF9hcHMtYXZnX2FwcykvdGFyZ2V0X2FwcwogICAgICAgICAgICBpZiBkZWx0YV9wZXJjZW50YWdlX2FwcyA+IDEuNToKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIjxtYXJrPiIpCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8L3RhZzI+IiwiPC9tYXJrPiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikKICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpCiAgICAgICAgcHJpbnRmKGh0bWwpCiAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6CiAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdCiAgICAgICAgICAgIGRlbCBuYW1lMnNfbGlzdFswXQoKICAgIGRlZiBwcmludF9hY3Rpb25fc3VtbWFyeSgpOgogICAgICAgIGdsb2JhbCBuYW1lMnMKICAgICAgICBnbG9iYWwgbmFtZTJzX2xpc3QKICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkCiAgICAgICAgcGFnZV9pZCA9IDAKICAgICAgICBudW1fa2V5cyA9IGxlbihqc3Mua2V5cygpKQogICAgICAgIGZvciBrZXkgaW4ganNzLmtleXMoKToKICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIHRleHQgPSAiWyVzLiVzXSIlKGtleSwgYWN0aW9uTmFtZShqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsidXNlcl9hY3Rpb25zIl1ba2V5XSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICB0ZXh0ID0gIlslc10iJShrZXkpCiAgICAgICAgICAgIHN0YXRzRmlsZW5hbWUgPSAnJXNfJWRfJWQuaHRtbCclKG9kaXIocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkLHBhZ2VfaWQpCiAgICAgICAgICAgIHN0YXRzRmlsZW5hbWVIdG1sID0gJyVzXyVkXyVkLmh0bWwnJShvZGlySHRtbChyZXBvcnRfaHRtbF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQscGFnZV9pZCkKICAgICAgICAgICAgc3RhdHNGaWxlbmFtZVByZXYgPSAnJXNfJWRfJWQuaHRtbCclKHJlcG9ydF9odG1sX2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLGFicyhwYWdlX2lkLTEpKQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lTmV4dCA9ICclc18lZF8lZC5odG1sJyUocmVwb3J0X2h0bWxfZm4uc3BsaXQoJy4nKVswXSxiZW5jaG1hcmtfaWQscGFnZV9pZCsxKQogICAgICAgICAgICB0ZXh0ID0gIjxhIGhyZWY9JyVzJz4lczwvYT4iJShzdGF0c0ZpbGVuYW1lSHRtbCx0ZXh0KQogICAgICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHN0YXRzRmlsZW5hbWUpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxodG1sIGxhbmc9XCJlblwiPiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxzdHlsZT4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ0YWJsZSwgdGgsIHRkIHsiKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7IGZvbnQtc2l6ZToxNnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigifSIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIm1hcmsgeyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIiAgYmFja2dyb3VuZC1jb2xvcjogTGlnaHRHcmF5OyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIiAgY29sb3I6IGJsYWNrOyIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIn0iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L3N0eWxlPiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjxib2R5PiIpCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9Ii4uLyVzIj5VcDwvYT4nJShyZXBvcnRfaHRtbF9mbikpCiAgICAgICAgICAgIGlmIChwYWdlX2lkID09IDApIGFuZCAobnVtX2tleXMgPT0gMSk6CiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5QcmV2PC9hPicpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5OZXh0PC9hPicpCiAgICAgICAgICAgIGVsaWYgKHBhZ2VfaWQgPT0gMCkgYW5kIChudW1fa2V5cyA+IDEpOgogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iIyI+UHJldjwvYT4nKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPk5leHQ8L2E+JyUoc3RhdHNGaWxlbmFtZU5leHQpKQogICAgICAgICAgICBlbGlmIHBhZ2VfaWQrMSA9PSBudW1fa2V5czoKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5QcmV2PC9hPiclKHN0YXRzRmlsZW5hbWVQcmV2KSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPk5leHQ8L2E+JykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5QcmV2PC9hPiclKHN0YXRzRmlsZW5hbWVQcmV2KSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5OZXh0PC9hPiclKHN0YXRzRmlsZW5hbWVOZXh0KSkKCiAgICAgICAgICAgIGlmIGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJ1c2VyX2FjdGlvbnMiXS5oYXNfa2V5KGtleSk6CiAgICAgICAgICAgICAgICBkZXNjID0gIlslcy4lc10iJShrZXksIGFjdGlvbk5hbWUoamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdW2tleV0pKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZGVzYyA9ICJbQSVzXSIlKGtleSkKICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGgyPiVzIFBlcmNlbnRpbGUgUmVzcG9uc2UgVGltZSBEaXN0cmlidXRpb248L2gyPiIlKGRlc2MpKQoKICAgICAgICAgICAgI3ByaW50U3RyZWFtLnByaW50bG4oIjxwcmU+IikKICAgICAgICAgICAgI2poeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApCgogICAgICAgICAgICBib3MgPSBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKQogICAgICAgICAgICBveCA9IFByaW50U3RyZWFtKGJvcykKICAgICAgICAgICAgamh4Lm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ob3gsIDEwMDAuMCkKICAgICAgICAgICAgb3guZmx1c2goKQogICAgICAgICAgICBveC5jbG9zZSgpCiAgICAgICAgICAgIHB0ZXh0ID0gYm9zLnRvU3RyaW5nKCkKICAgICAgICAgICAgbGluZXMgPSBwdGV4dC5zcGxpdCgnXG4nKQogICAgICAgICAgICB0Y291bnQgPSBqaHguZ2V0VG90YWxDb3VudCgpCiAgICAgICAgICAgIGhlYWRlciA9IFRydWUKICAgICAgICAgICAgcmxpc3QgPSBbXQogICAgICAgICAgICBmb3IgbGluZSBpbiBsaW5lczoKICAgICAgICAgICAgICBpZiBsZW4obGluZSkgPT0gMDoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgaWYgbGluZVswXSAhPSAiIyI6CiAgICAgICAgICAgICAgICBlID0gbGluZS5zcGxpdCgpCiAgICAgICAgICAgICAgICBpZiBoZWFkZXI6CiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzx0YWJsZSBzdHlsZT0id2lkdGg6NjAwcHgiPicpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPHRyPicpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+JXM8L3RoPiclKGVbMF0pKQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPiVzPC90aD4nJShlWzFdKSkKICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVsyXSkpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+JXM8L3RoPiclKGVbM10pKQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPkFib3ZlQ291bnQ8L3RoPicpCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPC90cj4nKQogICAgICAgICAgICAgICAgICBoZWFkZXIgPSBGYWxzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgaWYgbGVuKGUpID09IDM6CiAgICAgICAgICAgICAgICAgICAgZS5hcHBlbmQoJycpCiAgICAgICAgICAgICAgICAgIHJsaXN0LmFwcGVuZChlKQogICAgICAgICAgICBybGlzdC5yZXZlcnNlKCkKICAgICAgICAgICAgZm9yIGUgaW4gcmxpc3Q6CiAgICAgICAgICAgICAgICBtYXJrID0gRmFsc2UKICAgICAgICAgICAgICAgIGlmIGVbMV0uc3RhcnRzd2l0aCgiMC45OTkwIik6CiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUKICAgICAgICAgICAgICAgIGlmIGVbMV0uc3RhcnRzd2l0aCgiMC45OTAiKToKICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgZVsxXSA9PSAiMC45NTAwMDAwMDAwMDAiOgogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjkwMDAwMDAwMDAwMCI6CiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUKICAgICAgICAgICAgICAgIGlmIGVbMV0gPT0gIjAuODAwMDAwMDAwMDAwIjoKICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQogICAgICAgICAgICAgICAgaWYgZVsxXSA9PSAiMC41MDAwMDAwMDAwMDAiOgogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDx0cj4nKQogICAgICAgICAgICAgICAgaWYgbWFyazoKICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPjxtYXJrPiVzPC9tYXJrPjwvdGQ+JyUoZVswXSkpCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD48bWFyaz4lczwvbWFyaz48L3RkPiclKGVbMV0pKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzBdKSkKICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzFdKSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+JXM8L3RkPiclKGVbMl0pKQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVszXSkpCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJSh0Y291bnQtaW50KGVbMl0pKSkKICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgPC90cj4nKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L3RhYmxlPiIpCgogICAgICAgICAgICAjcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9wcmU+IikKCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvYm9keT4iKQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L2h0bWw+IikKICAgICAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQogICAgICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpCiAgICAgICAgICAgIGF2Z19hcHMgPSAwLjAgaWYgc214Lm5hbWUgaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdIGVsc2Ugc214Lm51bV9hY3Rpb25zL3NteC5kdXJhdGlvbgogICAgICAgICAgICBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06CiAgICAgICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIgogICAgICAgICAgICAgICAgc214LmNwdSA9IDAuMAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY3B1X3QgPSBzdHJfZnJvbV9jcHVfdGltZV9ucyhzbXguY3B1X3RpbWVfbnMpCgogICAgICAgICAgICBpZiBUcnVlOgogICAgICAgICAgICAgICAgcmQgPSB7fQogICAgICAgICAgICAgICAgcmRbIm51bV9hY3Rpb25zIl0gPSBzbXgubnVtX2FjdGlvbnMKICAgICAgICAgICAgICAgIHJkWyJudW1fZmFpbGVkIl0gPSBzbXgubnVtX2ZhaWxlZAogICAgICAgICAgICAgICAgcmRbImR1cmF0aW9uIl0gPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpCiAgICAgICAgICAgICAgICByZFsiYXBzIl0gPSBhdmdfYXBzCiAgICAgICAgICAgICAgICByZFsiYXZnX3J0Il0gPSBqaHguZ2V0TWVhbigpLzEwMDAuMAogICAgICAgICAgICAgICAgcmRbInN0ZF9kZXYiXSA9IGpoeC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAKICAgICAgICAgICAgICAgIHJkWyJtaW5fcnQiXSA9IHNteC5taW5fcnQKICAgICAgICAgICAgICAgIHJkWyJwOTBfcnQiXSA9IGpoeC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjAKICAgICAgICAgICAgICAgIHJkWyJwOTlfcnQiXSA9IGpoeC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjAKICAgICAgICAgICAgICAgIHJkWyJtYXhfcnQiXSA9IHNteC5tYXhfcnQKICAgICAgICAgICAgICAgIHJkWyJtYXhfcnR0Il0gPSBzbXgubWF4X3J0X3RzLnJlcGxhY2UoIl8iLCJUIikKICAgICAgICAgICAgICAgIGlmIHBhZ2VfaWQgPT0gMDoKICAgICAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgfVxuJykKICAgICAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgLCJhY3Rpb25zIjoge1xuJykKICAgICAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgICAgIiVzIjogJXNcbiclKGtleSxqc29uLmR1bXBzKHJkKSkpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICwiJXMiOiAlc1xuJyUoa2V5LGpzb24uZHVtcHMocmQpKSkKCiAgICAgICAgICAgIGh0bWwgPSBiZW5jaG1hcmtfc3VtbWFyeV9yb3clKG5hbWUycyx0ZXh0LHNteC5udW1fYWN0aW9ucyxzbXgubnVtX2ZhaWxlZCxzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpLGF2Z19hcHMsamh4LmdldE1lYW4oKS8xMDAwLjAsamh4LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMCxzbXgubWluX3J0LGpoeC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5MC4wKS8xMDAwLjAsamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCxzbXgubWF4X3J0LHNteC5tYXhfcnRfdHNbODpdLHNteC5hdmdfcXMsc214Lm1heF9xcyxzbXgubWF4X2F3dCxzbXgubWF4X3d0LGNwdV90LHNteC5jcHUsc214Lm1lbSkKICAgICAgICAgICAgaWYgbm90IHByaW50X2RldGFpbF9yb3dzOgogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPGI+IiwiIikKICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvYj4iLCIiKQogICAgICAgICAgICAjIFJlbW92ZSB0YWcxCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcxPiIsIiIpCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMT4iLCIiKQogICAgICAgICAgICAjIFJlbW92ZSB0YWcyCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIiIpCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMj4iLCIiKQoKICAgICAgICAgICAgcHJpbnRmKGh0bWwpCiAgICAgICAgICAgIGlmIGxlbihuYW1lMnNfbGlzdCkgPiAwOgogICAgICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0KICAgICAgICAgICAgICAgIGRlbCBuYW1lMnNfbGlzdFswXQoKICAgICAgICAgICAgcGFnZV9pZCArPSAxCiAgICAgICAgI3JlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICB9XG4nKQoKICAgIHByaW50ZihoZWFkZXIucmVwbGFjZSgiX19ERVNDMV9fIiwgZGVzYzEpLnJlcGxhY2UoIl9fREVTQzJfXyIsIGRlc2MyKSkKICAgIGpzb25fYm1fbmFtZXMgPSB7fQogICAgcHJldl9yb3dfaWQgPSAwCiAgICBmb3IgZSBpbiByYjoKICAgICAgICBjdXJyZW50X3Jvd19pZCA9IGludChlWyJyb3dfaWQiXSkKICAgICAgICBpZiBjdXJyZW50X3Jvd19pZCA8PSBwcmV2X3Jvd19pZDoKICAgICAgICAgICAgaWYgc20gaXMgbm90IE5vbmU6CiAgICAgICAgICAgICAgICBwcmludF9hY3Rpb25fc3VtbWFyeSgpCiAgICAgICAgICAgICAgICBwcmludF9nbG9iYWxfc3VtbWFyeSgpCiAgICAgICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2VtcHR5X3JvdykKICAgICAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfY29sdW1ucykKICAgICAgICAgICAgc20gPSBTdW1tYXJ5KCkKICAgICAgICAgICAgc20ubmFtZSA9IGVbImJtX25hbWUiXQogICAgICAgICAgICBqaC5yZXNldCgpCiAgICAgICAgICAgIGJlbmNobWFya19pZCArPSAxCiAgICAgICAgICAgIGpoaCA9IHt9CiAgICAgICAgICAgIGpzcyA9IHt9CiAgICAgICAgICAgIHByaW50ZihiZW5jaG1hcmtfaGVhZGVyJShuYW1lX3RvX2hyZWYoZVsiYm1fbmFtZSJdKSkpCiAgICAgICAgICAgIGlmIGxlbihlWyJ3b3JrZmxvd19uYW1lIl0pID4gMDoKICAgICAgICAgICAgICAgIG5hbWUyc19saXN0ID0gWyJ1OiVkLCB0OiVkIiUoZVsibnVtX3VzZXJzIl0sZVsibnVtX3RocmVhZHMiXSksICJ3OiVzIiUoZVsid29ya2Zsb3dfbmFtZSJdKSwgImM6JWQiJShlWyJjb250ZXh0X2lkIl0pICwiIl0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIG5hbWUyc19saXN0ID0gWyJ1OiVkLCB0OiVkIiUoZVsibnVtX3VzZXJzIl0sZVsibnVtX3RocmVhZHMiXSksICJjOiVkIiUoZVsiY29udGV4dF9pZCJdKSwiIl0KICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdCiAgICAgICAgaHQgPSBIaXN0b2dyYW0uZnJvbVN0cmluZyhlWyJoaXN0b2dyYW1fcnQiXSkKICAgICAgICBqaC5hZGQoaHQpCiAgICAgICAgcF9tZW0gPSAxMDAuMCAqIGVbImp2bV9tZW1vcnlfdXNlZCJdIC8gZVsianZtX21lbW9yeV9tYXhpbXVtIl0KICAgICAgICBwX2NwdSA9IGVbInByb2Nlc3NfY3B1X3V0aWxpemF0aW9uIl0KICAgICAgICBpZiBlWyJibV9uYW1lIl0gaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdOgogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIgogICAgICAgICAgICBwX2NwdSA9IDAuMAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdKQogICAgICAgICAgICBwX2NwdSA9IGVbInByb2Nlc3NfY3B1X3V0aWxpemF0aW9uIl0KICAgICAgICBpZiBub3QganNvbl9ibV9uYW1lcy5oYXNfa2V5KGVbImJtX25hbWUiXSk6CiAgICAgICAgICAgIGpzb25fYm1fbmFtZXNbZVsiYm1fbmFtZSJdXSA9IDEKICAgICAgICAgICAgaWYgbGVuKGpzb25fYm1fbmFtZXMua2V5cygpKSA+IDE6CiAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgfVxuJykKICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgfSxcbicpCiAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgIiVzIjoge1xuJyUoZVsiYm1fbmFtZSJdKSkKICAgICAgICAgICAgY29udGV4dCA9IHt9CiAgICAgICAgICAgIGNvbnRleHRbIm5hbWUiXSA9IGVbImNvbnRleHRfbmFtZSJdCiAgICAgICAgICAgIGNvbnRleHRbIm51bV91c2VycyJdID0gZVsibnVtX3VzZXJzIl0KICAgICAgICAgICAgY29udGV4dFsibnVtX3RocmVhZHMiXSA9IGVbIm51bV90aHJlYWRzIl0KICAgICAgICAgICAgcmVwb3J0X2pzb25fZmgud3JpdGUoJyAgICAgICJjb250ZXh0IjogJXMsJyUoanNvbi5kdW1wcyhjb250ZXh0KSkpCiAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAicmVzdWx0cyI6IHtcbicpCgogICAgICAgIGlmIFRydWU6CiAgICAgICAgICAgIHJkID0ge30KICAgICAgICAgICAgcmRbIm51bV9hY3Rpb25zIl0gPSBlWyJudW1fYWN0aW9ucyJdCiAgICAgICAgICAgIHJkWyJudW1fZmFpbGVkIl0gPSBlWyJudW1fZmFpbGVkIl0KICAgICAgICAgICAgcmRbImR1cmF0aW9uIl0gPSBzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KGVbImR1cmF0aW9uIl0pKSkKICAgICAgICAgICAgcmRbImFwcyJdID0gMC4wIGlmIGVbImJtX25hbWUiXSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBlWyJhdmdfYXBzIl0KICAgICAgICAgICAgcmRbImFwc190YXJnZXRfcmF0ZSJdID0gZVsiYXBzX3RhcmdldF9yYXRlIl0KICAgICAgICAgICAgcmRbImF2Z19ydCJdID0gZVsiYXZnX3J0Il0KICAgICAgICAgICAgcmRbInN0ZF9kZXYiXSA9IGh0LmdldFN0ZERldmlhdGlvbigpLzEwMDAuMAogICAgICAgICAgICByZFsibWluX3J0Il0gPSBlWyJtaW5fcnQiXQogICAgICAgICAgICByZFsicDkwX3J0Il0gPSBlWyJwZXJjZW50aWxlc19ydCJdWyI5MC4wIl0KICAgICAgICAgICAgcmRbInA5OV9ydCJdID0gZVsicGVyY2VudGlsZXNfcnQiXVsiOTkuMCJdCiAgICAgICAgICAgIHJkWyJtYXhfcnQiXSA9IGVbIm1heF9ydCJdCiAgICAgICAgICAgIHJkWyJtYXhfcnR0Il0gPSBlWyJtYXhfcnRfdHMiXS5yZXBsYWNlKCJfIiwiVCIpCiAgICAgICAgICAgIHJkWyJBUVMiXSA9IGVbImF2Z193dGhyZWFkX3FzaXplIl0KICAgICAgICAgICAgcmRbIk1RUyJdID0gZVsibWF4X3d0aHJlYWRfcXNpemUiXQogICAgICAgICAgICByZFsiQVdUIl0gPSBlWyJhdmdfd3QiXQogICAgICAgICAgICByZFsiTVdUIl0gPSBlWyJtYXhfd3QiXQogICAgICAgICAgICByZFsiQ1BVX1QiXSA9IGNwdV90CiAgICAgICAgICAgIHJkWyJDUFUiXSA9IHBfY3B1CiAgICAgICAgICAgIHJkWyJNRU0iXSA9IHBfbWVtCiAgICAgICAgICAgIGlmIGVbInJvd19pZCJdKzEgPT0gMToKICAgICAgICAgICAgICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCcgICAgICAgICAiJWQiOiAlc1xuJyUoZVsicm93X2lkIl0rMSxqc29uLmR1bXBzKHJkKSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByZXBvcnRfanNvbl9maC53cml0ZSgnICAgICAgICAsIiVkIjogJXNcbiclKGVbInJvd19pZCJdKzEsanNvbi5kdW1wcyhyZCkpKQogICAgICAgIGlmIHByaW50X2RldGFpbF9yb3dzOgogICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2RldGFpbF9yb3clKCBcCiAgICAgICAgICAgICAgICBuYW1lMnMsCiAgICAgICAgICAgICAgICBlWyJyb3dfaWQiXSsxLAogICAgICAgICAgICAgICAgZVsibnVtX2FjdGlvbnMiXSwKICAgICAgICAgICAgICAgIGVbIm51bV9mYWlsZWQiXSwKICAgICAgICAgICAgICAgIHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoZVsiZHVyYXRpb24iXSkpKSwKICAgICAgICAgICAgICAgIDAuMCBpZiBlWyJibV9uYW1lIl0gaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdIGVsc2UgZVsiYXZnX2FwcyJdLAogICAgICAgICAgICAgICAgZVsiYXZnX3J0Il0sCiAgICAgICAgICAgICAgICBodC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAsCiAgICAgICAgICAgICAgICBlWyJtaW5fcnQiXSwKICAgICAgICAgICAgICAgIGVbInBlcmNlbnRpbGVzX3J0Il1bIjkwLjAiXSwKICAgICAgICAgICAgICAgIGVbInBlcmNlbnRpbGVzX3J0Il1bIjk5LjAiXSwKICAgICAgICAgICAgICAgIGVbIm1heF9ydCJdLAogICAgICAgICAgICAgICAgZVsibWF4X3J0X3RzIl1bODpdLAogICAgICAgICAgICAgICAgZVsiYXZnX3d0aHJlYWRfcXNpemUiXSwKICAgICAgICAgICAgICAgIGVbIm1heF93dGhyZWFkX3FzaXplIl0sCiAgICAgICAgICAgICAgICBlWyJhdmdfd3QiXSwKICAgICAgICAgICAgICAgIGVbIm1heF93dCJdLAogICAgICAgICAgICAgICAgY3B1X3QsCiAgICAgICAgICAgICAgICBwX2NwdSwKICAgICAgICAgICAgICAgIHBfbWVtCiAgICAgICAgICAgICAgICApKQogICAgICAgICAgICBpZiBsZW4obmFtZTJzX2xpc3QpID4gMDoKICAgICAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdCiAgICAgICAgICAgICAgICBkZWwgbmFtZTJzX2xpc3RbMF0KICAgICAgICBpZiBzbS5taW5fcnQgPiBlWyJtaW5fcnQiXToKICAgICAgICAgICAgc20ubWluX3J0ID0gZVsibWluX3J0Il0KICAgICAgICBpZiBzbS5tYXhfcnQgPCBlWyJtYXhfcnQiXToKICAgICAgICAgICAgc20ubWF4X3J0ID0gZVsibWF4X3J0Il0KICAgICAgICAgICAgc20ubWF4X3J0X3RzID0gZVsibWF4X3J0X3RzIl0KICAgICAgICBzbS5udW1fYWN0aW9ucyArPSBlWyJudW1fYWN0aW9ucyJdCiAgICAgICAgc20ubnVtX2ZhaWxlZCArPSBlWyJudW1fZmFpbGVkIl0KICAgICAgICBzbS5kdXJhdGlvbiArPSBlWyJkdXJhdGlvbiJdCiAgICAgICAgaWYgc20uYXZnX3FzIDwgZVsiYXZnX3d0aHJlYWRfcXNpemUiXToKICAgICAgICAgICAgc20uYXZnX3FzID0gZVsiYXZnX3d0aHJlYWRfcXNpemUiXQogICAgICAgIGlmIHNtLm1heF9xcyA8IGVbIm1heF93dGhyZWFkX3FzaXplIl06CiAgICAgICAgICAgIHNtLm1heF9xcyA9IGVbIm1heF93dGhyZWFkX3FzaXplIl0KICAgICAgICBpZiBzbS5tYXhfYXd0IDwgZVsiYXZnX3d0Il06CiAgICAgICAgICAgIHNtLm1heF9hd3QgPSBlWyJhdmdfd3QiXQogICAgICAgIGlmIHNtLm1heF93dCA8IGVbIm1heF93dCJdOgogICAgICAgICAgICBzbS5tYXhfd3QgPSBlWyJtYXhfd3QiXQogICAgICAgIGlmIHNtLm1lbSA8IHBfbWVtOgogICAgICAgICAgICBzbS5tZW0gPSBwX21lbQogICAgICAgIGlmIHNtLmNwdSA8IHBfY3B1OgogICAgICAgICAgICBzbS5jcHUgPSBwX2NwdQogICAgICAgIHNtLmNwdV90aW1lX25zICs9IGVbInByb2Nlc3NfY3B1X3RpbWVfbnMiXQogICAgICAgIHNtLmFwc19jb3VudCArPSAxLjAKICAgICAgICBzbS5hcHNfdGFyZ2V0X3N1bSArPSBlWyJhcHNfdGFyZ2V0X3JhdGUiXQoKICAgICAgICBpZiBsZW4oc20uY2hhcnRfdF9saXN0KSA9PSAtMToKICAgICAgICAgICAgc20uY2hhcnRfdF9saXN0LmFwcGVuZCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9iZWdpbiJdLnJlcGxhY2UoIl8iLCAiVCIpKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX2FwcyJdKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4zZiIlKGVbIm51bV9mYWlsZWQiXS9lWyJkdXJhdGlvbiJdKSkKICAgICAgICAgICAgXSkKCiAgICAgICAgc20uY2hhcnRfdF9saXN0LmFwcGVuZCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9lbmQiXS5yZXBsYWNlKCJfIiwgIlQiKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19hcHMiXSkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuM2YiJShlWyJudW1fZmFpbGVkIl0vZVsiZHVyYXRpb24iXSkpCiAgICAgICAgICAgICBdKQoKICAgICAgICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMCBdCiAgICAgICAgaWYgbGVuKHNtLmNoYXJ0X3BfbGlzdCkgPT0gLTE6CiAgICAgICAgICAgIHNtLmNoYXJ0X3BfbGlzdC5hcHBlbmQoCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9iZWdpbiJdLnJlcGxhY2UoIl8iLCAiVCIpKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1pbl9ydCJdKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfcnQiXSkpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTAuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5NS4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWF4X3J0Il0pKQogICAgICAgICAgICAgICAgXSkKCiAgICAgICAgc20uY2hhcnRfcF9saXN0LmFwcGVuZCgKICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9lbmQiXS5yZXBsYWNlKCJfIiwgIlQiKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1pbl9ydCJdKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19ydCJdKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCkpLAogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5NS4wKS8xMDAwLjApKSwKICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wKSksCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1heF9ydCJdKSkKICAgICAgICAgICAgXSkKCiAgICAgICAgIyBqaGggLi4uCiAgICAgICAgZm9yIGtleSBpbiBlWyJ1c2VyX2FjdGlvbnMiXS5rZXlzKCk6CiAgICAgICAgICAgIGFyID0gZVsidXNlcl9hY3Rpb25zIl1ba2V5XQogICAgICAgICAgICBodHQgPSBIaXN0b2dyYW0uZnJvbVN0cmluZyhhclsiaGlzdG9ncmFtX3J0Il0pCiAgICAgICAgICAgICNwcmludChhclsibmFtZSJdICsgIiAtICIgKyAiJS4zZiIlKGh0dC5nZXRNZWFuKCkvMTAwMC4wKSkKICAgICAgICAgICAgaWYgamhoLmhhc19rZXkoa2V5KToKICAgICAgICAgICAgICAgIGpoaFtrZXldLmFkZChodHQpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBqaGhba2V5XSA9IEhpc3RvZ3JhbSgxLCAzNjAwKjEwMDAqMTAwMCwgMykKICAgICAgICAgICAgICAgIGpoaFtrZXldLmFkZChodHQpCiAgICAgICAgICAgICNwcmludChhclsibmFtZSJdICsgIiAtICIgKyAiJS4zZiIlKGpoaFtrZXldLmdldE1lYW4oKS8xMDAwLjApICsgIiAtICVkIiUoamhoW2tleV0uZ2V0VG90YWxDb3VudCgpKSkKCiAgICAgICAgIyBqc3MgLi4uCiAgICAgICAgZm9yIGtleSBpbiBlWyJ1c2VyX2FjdGlvbnMiXS5rZXlzKCk6CiAgICAgICAgICAgIGFyID0gZVsidXNlcl9hY3Rpb25zIl1ba2V5XQogICAgICAgICAgICBpZiBqc3MuaGFzX2tleShrZXkpOgogICAgICAgICAgICAgICAgc214ID0ganNzW2tleV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNteCA9IGpzc1trZXldID0gU3VtbWFyeSgpCiAgICAgICAgICAgICAgICBzbXgubmFtZSA9IGVbImJtX25hbWUiXQoKICAgICAgICAgICAgaWYgc214Lm1pbl9ydCA+IGFyWyJtaW5fcnQiXToKICAgICAgICAgICAgICAgIHNteC5taW5fcnQgPSBhclsibWluX3J0Il0KICAgICAgICAgICAgaWYgc214Lm1heF9ydCA8IGFyWyJtYXhfcnQiXToKICAgICAgICAgICAgICAgIHNteC5tYXhfcnQgPSBhclsibWF4X3J0Il0KICAgICAgICAgICAgICAgIHNteC5tYXhfcnRfdHMgPSBhclsibWF4X3J0X3RzIl0KICAgICAgICAgICAgc214Lm51bV9hY3Rpb25zICs9IGFyWyJudW1fYWN0aW9ucyJdCiAgICAgICAgICAgIHNteC5udW1fZmFpbGVkICs9IGFyWyJudW1fZmFpbGVkIl0KCiAgICAgICAgICAgIHNteC5kdXJhdGlvbiArPSBlWyJkdXJhdGlvbiJdCiAgICAgICAgICAgIGlmIHNteC5hdmdfcXMgPCBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdOgogICAgICAgICAgICAgICAgc214LmF2Z19xcyA9IGVbImF2Z193dGhyZWFkX3FzaXplIl0KICAgICAgICAgICAgaWYgc214Lm1heF9xcyA8IGVbIm1heF93dGhyZWFkX3FzaXplIl06CiAgICAgICAgICAgICAgICBzbXgubWF4X3FzID0gZVsibWF4X3d0aHJlYWRfcXNpemUiXQogICAgICAgICAgICBpZiBzbXgubWF4X2F3dCA8IGVbImF2Z193dCJdOgogICAgICAgICAgICAgICAgc214Lm1heF9hd3QgPSBlWyJhdmdfd3QiXQogICAgICAgICAgICBpZiBzbXgubWF4X3d0IDwgZVsibWF4X3d0Il06CiAgICAgICAgICAgICAgICBzbXgubWF4X3d0ID0gZVsibWF4X3d0Il0KICAgICAgICAgICAgaWYgc214Lm1lbSA8IHBfbWVtOgogICAgICAgICAgICAgICAgc214Lm1lbSA9IHBfbWVtCiAgICAgICAgICAgIGlmIHNteC5jcHUgPCBwX2NwdToKICAgICAgICAgICAgICAgIHNteC5jcHUgPSBwX2NwdQogICAgICAgICAgICBzbXguY3B1X3RpbWVfbnMgKz0gZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdCgogICAgcHJpbnRfYWN0aW9uX3N1bW1hcnkoKQogICAgcHJpbnRfZ2xvYmFsX3N1bW1hcnkoKQogICAgcHJpbnRmKHRyYWlsZXIpCgogICAgcmVwb3J0X2h0bWxfZmguY2xvc2UoKQoKICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCIgICAgICB9XG4iKQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIiAgICB9XG4iKQogICAgcmVwb3J0X2pzb25fZmgud3JpdGUoIiAgfVxuIikKICAgIHJlcG9ydF9qc29uX2ZoLndyaXRlKCJ9XG4iKQogICAgcmVwb3J0X2pzb25fZmguY2xvc2UoKQoKICAgIG9zLmNoZGlyKGN3ZCkKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBpZiBsZW4oc3lzLmFyZ3YpID49IDM6CiAgICAgICAgZmlsZW5hbWUgPSBzeXMuYXJndlsxXQogICAgICAgIGNvbmZpZ0ZpbGVuYW1lID0gc3lzLmFyZ3ZbMl0KICAgICAgICBjcmVhdGVSZXBvcnQoZmlsZW5hbWUsIGNvbmZpZ0ZpbGVuYW1lKQo=";

    /** Private constructor to prevent instantiation. */
    public report_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     */
    public static void main(String... args) {
        String mainScriptFilename = "report.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decodedBytes);
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
