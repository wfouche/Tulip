package io.github.wfouche.tulip.report;

// spotless:off
//DEPS com.google.code.gson:gson:2.13.1
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-slim:2.7.4
// spotless:on

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import java.util.Base64;
import java.util.zip.GZIPInputStream;
import org.python.util.PythonInterpreter;

/**
 * The class provides a main method to run a Python script embedded in a Java application.
 *
 * <p>This class is generated by JBang from a Python script.
 */
public class report2_py {

    /** The base64 encoded Python script to be executed. */
    public static String mainScriptTextBase64 =
            "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";

    /** Private constructor to prevent instantiation. */
    public report2_py() {
        // Private constructor to prevent instantiation
    }

    /**
     * Decompresses a byte array that was compressed using GZIP.
     *
     * @param compressedData The byte array containing the compressed data.
     * @return The decompressed string.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static String decompress(byte[] compressedData) throws IOException {
        ByteArrayInputStream bis = new ByteArrayInputStream(compressedData);
        GZIPInputStream gzip = new GZIPInputStream(bis);
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while ((len = gzip.read(buffer)) != -1) {
            bos.write(buffer, 0, len);
        }
        gzip.close();
        bis.close();
        bos.close();
        return bos.toString(StandardCharsets.UTF_8.name());
    }

    /**
     * The main method that serves as the entry point for the application. It initializes the Python
     * interpreter and executes the embedded script.
     *
     * @param args Command-line arguments passed to the application.
     * @throws IOException if an I/O error occurs during decompression.
     */
    public static void main(String... args) throws IOException {
        String mainScriptFilename = "report2.py";
        String mainScript = "";
        String pythonArgsScript = "";
        for (String arg : args) {
            if (pythonArgsScript.length() == 0) {
                if (!arg.equals(mainScriptFilename)) {
                    pythonArgsScript += "'" + mainScriptFilename + "', ";
                }
            } else {
                pythonArgsScript += ", ";
            }
            pythonArgsScript += "'" + arg + "'";
        }
        if (pythonArgsScript.length() == 0) {
            pythonArgsScript = "'" + mainScriptFilename + "'";
        }
        pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
        {
            byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
            String text = new String(decompress(decodedBytes));
            mainScript = text;
        }
        {
            // create Python interpreter object
            PythonInterpreter pyInterp = new PythonInterpreter();
            // initialize command-line args
            pyInterp.exec(pythonArgsScript);
            // run script
            pyInterp.exec(mainScript);
        }
    }
}
