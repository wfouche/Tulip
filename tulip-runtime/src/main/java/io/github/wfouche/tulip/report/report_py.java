package io.github.wfouche.tulip.report;

/// usr/bin/env jbang "$0" "$@" ; exit $?

// spotless:off
//DEPS com.google.code.gson:gson:2.11.0
//DEPS org.hdrhistogram:HdrHistogram:2.2.2
//DEPS org.python:jython-standalone:2.7.4
//JAVA 21
// spotless:on

import java.util.Base64;
import org.python.util.PythonInterpreter;

public class report_py {

  public static String mainScriptTextBase64 =
      "ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBwcmludF9mdW5jdGlvbg0KaW1wb3J0IGRhdGV0aW1lDQppbXBvcnQganNvbg0KaW1wb3J0IHN5cw0KaW1wb3J0IG9yZy5IZHJIaXN0b2dyYW0uSGlzdG9ncmFtIGFzIEhpc3RvZ3JhbQ0KaW1wb3J0IG9zDQpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBPcmRlcmVkRGljdA0KaW1wb3J0IGphdmEuaW8uUHJpbnRTdHJlYW0gYXMgUHJpbnRTdHJlYW0NCmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbSBhcyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0NCg0KIyAvLy8gamJhbmcNCiMgcmVxdWlyZXMtanl0aG9uID0gIj09Mi43LjQiDQojIHJlcXVpcmVzLWphdmEgPSAiPj0yMSINCiMgZGVwZW5kZW5jaWVzID0gWw0KIyAgICJjb20uZ29vZ2xlLmNvZGUuZ3Nvbjpnc29uOjIuMTEuMCIsDQojICAgIm9yZy5oZHJoaXN0b2dyYW06SGRySGlzdG9ncmFtOjIuMi4yIg0KIyBdDQojIFtweXRob24tanZtXQ0KIyAgIGRlYnVnID0gZmFsc2UNCiMgLy8vDQoNCnN1bW1hcnlfaHRtbF8xID0gJycnPCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCiAgICBkaXYuaGlzdG8gew0KICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW4NCiAgICB9DQo8L3N0eWxlPg0KDQo8IS0tTG9hZCB0aGUgQUpBWCBBUEktLT4NCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vanNhcGkiPjwvc2NyaXB0Pg0KDQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoNCiAgICBpZiAod2luZG93LkZpbGUgJiYgd2luZG93LkZpbGVSZWFkZXIgJiYgd2luZG93LkZpbGVMaXN0ICYmIHdpbmRvdy5CbG9iKSB7DQogICAgICAgIC8vIEdyZWF0IHN1Y2Nlc3MhIEFsbCB0aGUgRmlsZSBBUElzIGFyZSBzdXBwb3J0ZWQuDQogICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ1RoZSBGaWxlIEFQSXMgYXJlIG5vdCBmdWxseSBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLicpOw0KICAgIH0NCg0KICAgIC8vIExvYWQgdGhlIFZpc3VhbGl6YXRpb24gQVBJIGFuZCB0aGUgY29yZWNoYXJ0IHBhY2thZ2UuDQogICAgZ29vZ2xlLmxvYWQoJ3Zpc3VhbGl6YXRpb24nLCAnMS4wJywgeydwYWNrYWdlcyc6Wydjb3JlY2hhcnQnXX0pOw0KDQogICAgLy8gU2V0IGEgY2FsbGJhY2sgdG8gcnVuIHdoZW4gdGhlIEdvb2dsZSBWaXN1YWxpemF0aW9uIEFQSSBpcyBsb2FkZWQuDQogICAgZ29vZ2xlLnNldE9uTG9hZENhbGxiYWNrKGRyYXdJbml0aWFsQ2hhcnQpOw0KDQogICAgdmFyIGNoYXJ0RGF0YSA9IG51bGw7DQogICAgdmFyIGNoYXJ0ID0gbnVsbDsNCg0KICAgIGZ1bmN0aW9uIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKSB7DQogICAgICAgIHdoaWxlIChuYW1lcy5sZW5ndGggPCBoaXN0b3MubGVuZ3RoKSB7DQogICAgICAgICAgICBuYW1lcy5wdXNoKCdVbmtub3duJyk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc2VyaWVzID0gW107DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGlzdG9zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBzZXJpZXMgPSBhcHBlbmREYXRhU2VyaWVzKGhpc3Rvc1tpXSwgbmFtZXNbaV0sIHNlcmllcyk7DQogICAgICAgIH0NCg0KICAgICAgICBjaGFydERhdGEgPSBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHNlcmllcyk7DQogICAgfQ0KDQonJycNCg0KdGV4dF9ibG9ja18xID0gJycnDQogICAgZnVuY3Rpb24gZHJhd0luaXRpYWxDaGFydCgpIHsNCiAgICAgICAgLy8gQ29ubmVjdCB0aGUgY2hvb3NlIGZpbGVzIGJ1dHRvbjoNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGVzJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlRmlsZVNlbGVjdCwgZmFsc2UpOw0KDQogICAgICAgIC8vIExvYWQgc29tZSBzdGF0aWMgZXhhbXBsZSBkYXRhOg0KICAgICAgICB2YXIgZGF0YTFTdHIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJkaXYjZGF0YV8xIikuaW5uZXJIVE1MLnRyaW0oKTsNCiAgICAgICAgdmFyIGRhdGEyU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfMiIpLmlubmVySFRNTC50cmltKCk7DQogICAgICAgIHZhciBkYXRhM1N0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXzMiKS5pbm5lckhUTUwudHJpbSgpOw0KICAgICAgICB2YXIgaGlzdG9zID0gW2RhdGEzU3RyLCBkYXRhMlN0ciwgZGF0YTFTdHJdOw0KICAgICAgICB2YXIgbmFtZXMgPSBbJ0EnLCAnQicsICdDJ107DQoNCiAgICAgICAgc2V0Q2hhcnREYXRhKG5hbWVzLCBoaXN0b3MpOw0KICAgICAgICBkcmF3Q2hhcnQoKTsNCiAgICB9DQonJycNCg0Kc3VtbWFyeV9odG1sXzIgPSAnJycNCiAgICB2YXIgbWF4UGVyY2VudGlsZSA9IDEwMDAwMDA7DQoNCiAgICBmdW5jdGlvbiBkcmF3Q2hhcnQoKSB7DQoNCiAgICAgICAgdmFyIHRpY2tzID0NCiAgICAgICAgICAgICAgICBbe3Y6MSxmOicwJSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMCxmOic5MCUnfSwNCiAgICAgICAgICAgICAgICAgICAge3Y6MTAwLGY6Jzk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwLGY6Jzk5LjklJ30sDQogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwLGY6Jzk5Ljk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAsZjonOTkuOTk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwLGY6Jzk5Ljk5OTklJ30sDQogICAgICAgICAgICAgICAgICAgIHt2OjEwMDAwMDAwLGY6Jzk5Ljk5OTk5JSd9LA0KICAgICAgICAgICAgICAgICAgICB7djoxMDAwMDAwMDAsZjonOTkuOTk5OTk5JSd9XTsNCg0KICAgICAgICB2YXIgdW5pdFNlbGVjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0aW1lVW5pdFNlbGVjdGlvbiIpOw0KICAgICAgICB2YXIgdW5pdFNlbEluZGV4ID0gdW5pdFNlbGVjdGlvbi5zZWxlY3RlZEluZGV4Ow0KICAgICAgICB2YXIgdW5pdFRleHQgPSB1bml0U2VsZWN0aW9uLm9wdGlvbnNbdW5pdFNlbEluZGV4XS5pbm5lckhUTUw7DQoNCiAgICAgICAgdmFyIG9wdGlvbnMgPSB7DQovLyAgICAgICAgICAgIHRpdGxlOiAnUGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbicsDQogICAgICAgICAgICBoZWlnaHQ6IDQ4MCwNCi8vICAgICAgICAgICAgaEF4aXM6IHt0aXRsZTogJ1BlcmNlbnRpbGUnLCBtaW5WYWx1ZTogMCwgbG9nU2NhbGU6IHRydWUsIHRpY2tzOnRpY2tzIH0sDQogICAgICAgICAgICBoQXhpczogew0KICAgICAgICAgICAgICAgIHRpdGxlOiAiUGVyY2VudGlsZSIsDQogICAgICAgICAgICAgICAgbWluVmFsdWU6IDEsIGxvZ1NjYWxlOiB0cnVlLCB0aWNrczp0aWNrcywNCiAgICAgICAgICAgICAgICB2aWV3V2luZG93TW9kZTonZXhwbGljaXQnLA0KICAgICAgICAgICAgICAgIHZpZXdXaW5kb3c6ew0KICAgICAgICAgICAgICAgICAgICBtYXg6bWF4UGVyY2VudGlsZSwNCiAgICAgICAgICAgICAgICAgICAgbWluOjENCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdkF4aXM6IHt0aXRsZTogJ0xhdGVuY3kgKCcgKyB1bml0VGV4dCArICcpJywgbWluVmFsdWU6IDAgfSwNCiAgICAgICAgICAgIGxlZ2VuZDoge3Bvc2l0aW9uOiAnYm90dG9tJ30NCiAgICAgICAgfTsNCg0KDQogICAgICAgIC8vIGFkZCB0b29sdGlwcyB3aXRoIGNvcnJlY3QgcGVyY2VudGlsZSB0ZXh0IHRvIGRhdGE6DQogICAgICAgIHZhciBjb2x1bW5zID0gWzBdOw0KICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNoYXJ0RGF0YS5nZXROdW1iZXJPZkNvbHVtbnMoKTsgaSsrKSB7DQogICAgICAgICAgICBjb2x1bW5zLnB1c2goaSk7DQogICAgICAgICAgICBjb2x1bW5zLnB1c2goew0KICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLA0KICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3Rvb2x0aXAnDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBjYWxjOiAoZnVuY3Rpb24gKGopIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkdCwgcm93KSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyY2VudGlsZSA9IDEwMC4wIC0gKDEwMC4wL2R0LmdldFZhbHVlKHJvdywgMCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGR0LmdldENvbHVtbkxhYmVsKGopICsgJzogJyArDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRpbGUudG9QcmVjaXNpb24oNykgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCVcXCdpbGUgPSAnICsgZHQuZ2V0VmFsdWUocm93LCBqKSArICcgJyArIHVuaXRUZXh0DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KShpKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHZpZXcgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uRGF0YVZpZXcoY2hhcnREYXRhKTsNCiAgICAgICAgdmlldy5zZXRDb2x1bW5zKGNvbHVtbnMpOw0KDQogICAgICAgIGNoYXJ0ID0gbmV3IGdvb2dsZS52aXN1YWxpemF0aW9uLkxpbmVDaGFydChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnRfZGl2JykpOw0KICAgICAgICBjaGFydC5kcmF3KHZpZXcsIG9wdGlvbnMpOw0KDQogICAgICAgIGdvb2dsZS52aXN1YWxpemF0aW9uLmV2ZW50cy5hZGRMaXN0ZW5lcihjaGFydCwgJ3JlYWR5JywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgY2hhcnRfZGl2LmlubmVySFRNTCA9ICc8aW1nIHNyYz0iJyArIGNoYXJ0LmdldEltYWdlVVJJKCkgKyAnIj4nOw0KICAgICAgICB9KTsNCg0KICAgIH0NCjwvc2NyaXB0Pg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIGZ1bmN0aW9uIGFwcGVuZERhdGFTZXJpZXMoaGlzdG8sIG5hbWUsIGRhdGFTZXJpZXMpIHsNCiAgICAgICAgdmFyIHNlcmllczsNCiAgICAgICAgdmFyIHNlcmllc0NvdW50Ow0KICAgICAgICBpZiAoZGF0YVNlcmllcy5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgc2VyaWVzID0gWyBbJ1gnLCBuYW1lXSBdOw0KICAgICAgICAgICAgc2VyaWVzQ291bnQgPSAxOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2VyaWVzID0gZGF0YVNlcmllczsNCiAgICAgICAgICAgIHNlcmllc1swXS5wdXNoKG5hbWUpOw0KICAgICAgICAgICAgc2VyaWVzQ291bnQgPSBzZXJpZXNbMF0ubGVuZ3RoIC0gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBsaW5lcyA9IGhpc3RvLnNwbGl0KCJcXG4iKTsNCg0KICAgICAgICB2YXIgc2VyaWVzSW5kZXggPSAxOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTsNCiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBsaW5lLnRyaW0oKS5zcGxpdCgvWyBdKy8pOw0KDQogICAgICAgICAgICBpZiAobGluZVswXSAhPSAnIycgJiYgdmFsdWVzLmxlbmd0aCA9PSA0KSB7DQoNCiAgICAgICAgICAgICAgICB2YXIgeSA9IHBhcnNlRmxvYXQodmFsdWVzWzBdKTsNCiAgICAgICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodmFsdWVzWzNdKTsNCg0KICAgICAgICAgICAgICAgIGlmICghaXNOYU4oeCkgJiYgIWlzTmFOKHkpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcmllc0luZGV4ID49IHNlcmllcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcy5wdXNoKFt4XSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc2VyaWVzW3Nlcmllc0luZGV4XS5sZW5ndGggPCBzZXJpZXNDb3VudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKG51bGwpOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzW3Nlcmllc0luZGV4XS5wdXNoKHkpOw0KICAgICAgICAgICAgICAgICAgICBzZXJpZXNJbmRleCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHdoaWxlIChzZXJpZXNJbmRleCA8IHNlcmllcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIHNlcmllc1tzZXJpZXNJbmRleF0ucHVzaChudWxsKTsNCiAgICAgICAgICAgIHNlcmllc0luZGV4Kys7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gc2VyaWVzOw0KICAgIH0NCjwvc2NyaXB0Pg0KPHNjcmlwdD4NCiAgICBmdW5jdGlvbiB0aW1lVW5pdHNTZWxlY3RlZChldnQpIHsNCiAgICAgICAgZHJhd0NoYXJ0KCk7DQogICAgICAgIHJldHVybiB7dHlwZWQ6ICcnfTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBkb0V4cG9ydChldmVudCkgew0KICAgICAgICBzYXZlU3ZnQXNQbmcoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3ZnJyksICdIaXN0b2dyYW0nLCAyLjApOw0KICAgICAgICByZXR1cm4ge3R5cGVkOiAnJ307DQogICAgfQ0KPC9zY3JpcHQ+DQoNCjxzY3JpcHQ+DQogICAgZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdChldnQpIHsNCiAgICAgICAgdmFyIGZpbGVzID0gZXZ0LnRhcmdldC5maWxlczsgLy8gRmlsZUxpc3Qgb2JqZWN0DQogICAgICAgIHZhciBmaWxlRGlzcGxheUFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZURpc3BsYXlBcmVhJyk7DQoNCiAgICAgICAgdmFyIG5hbWVzID0gW107DQogICAgICAgIHZhciBoaXN0b3MgPSBbXTsNCg0KICAgICAgICBmaWxlRGlzcGxheUFyZWEuaW5uZXJUZXh0ID0gImZpbGUgc2VsZWN0ZWQuLi5cXG4iOw0KDQogICAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGUgRmlsZUxpc3QgYW5kIHJlbmRlciBpbWFnZSBmaWxlcyBhcyB0aHVtYm5haWxzLg0KICAgICAgICBmb3IgKHZhciBpID0gMCwgZjsgZiA9IGZpbGVzW2ldOyBpKyspIHsNCiAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KDQogICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGZ1bmN0aW9uKHRoZUZpbGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgICAgICBoaXN0b3MucHVzaChlLnRhcmdldC5yZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGVzY2FwZSh0aGVGaWxlLm5hbWUpKTsNCiAgICAgICAgICAgICAgICAgICAgZmlsZURpc3BsYXlBcmVhLmlubmVyVGV4dCA9ICIgUGxvdHRpbmcgaW5wdXQgZnJvbTogIiArIG5hbWVzICsgIlxcbiI7DQogICAgICAgICAgICAgICAgICAgIHNldENoYXJ0RGF0YShuYW1lcywgaGlzdG9zKTsNCiAgICAgICAgICAgICAgICAgICAgZHJhd0NoYXJ0KCk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0pKGYpOw0KDQogICAgICAgICAgICAvLyBSZWFkIGluIHRoZSBpbWFnZSBmaWxlIGFzIGEgZGF0YSBVUkwuDQogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmKTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQo8L3NjcmlwdD4NCg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgIChmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIG91dCQgPSB0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiBleHBvcnRzIHx8IHRoaXM7DQoNCiAgICAgICAgdmFyIGRvY3R5cGUgPSAnPD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+JzsNCg0KICAgICAgICBmdW5jdGlvbiBpbmxpbmVJbWFnZXMoY2FsbGJhY2spIHsNCiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdmcgaW1hZ2UnKTsNCiAgICAgICAgICAgIHZhciBsZWZ0ID0gaW1hZ2VzLmxlbmd0aDsNCiAgICAgICAgICAgIGlmIChsZWZ0ID09IDApIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAoZnVuY3Rpb24oaW1hZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IGltYWdlLmdldEF0dHJpYnV0ZSgneGxpbms6aHJlZicpLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC9eaHR0cC8udGVzdChocmVmKSAmJiAhKG5ldyBSZWdFeHAoJ14nICsgd2luZG93LmxvY2F0aW9uLmhvc3QpLnRlc3QoaHJlZikpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVuZGVyIGVtYmVkZGVkIGltYWdlcyBsaW5raW5nIHRvIGV4dGVybmFsIGhvc3RzLiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBpbWFnZS5nZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnKTsNCiAgICAgICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3hsaW5rOmhyZWYnLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7DQogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0LS07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVmdCA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pKGltYWdlc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBzdHlsZXMoZG9tKSB7DQogICAgICAgICAgICB2YXIgY3NzID0gIiI7DQogICAgICAgICAgICB2YXIgc2hlZXRzID0gZG9jdW1lbnQuc3R5bGVTaGVldHM7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoZWV0cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGlmIChzaGVldHNbaV0uaGFzT3duUHJvcGVydHkoJ2Nzc1J1bGVzJykpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVzID0gc2hlZXRzW2ldLmNzc1J1bGVzOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJ1bGVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IHJ1bGVzW2pdOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihydWxlLnN0eWxlKSAhPSAidW5kZWZpbmVkIikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArPSBydWxlLnNlbGVjdG9yVGV4dCArICIgeyAiICsgcnVsZS5zdHlsZS5jc3NUZXh0ICsgIiB9XFxuIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOw0KICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTsNCiAgICAgICAgICAgIHMuaW5uZXJIVE1MID0gIjwhW0NEQVRBW1xcbiIgKyBjc3MgKyAiXFxuXV0+IjsNCg0KICAgICAgICAgICAgdmFyIGRlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZWZzJyk7DQogICAgICAgICAgICBkZWZzLmFwcGVuZENoaWxkKHMpOw0KICAgICAgICAgICAgcmV0dXJuIGRlZnM7DQogICAgICAgIH0NCg0KICAgICAgICBvdXQkLnN2Z0FzRGF0YVVyaSA9IGZ1bmN0aW9uKGVsLCBzY2FsZUZhY3RvciwgY2IpIHsNCiAgICAgICAgICAgIHNjYWxlRmFjdG9yID0gc2NhbGVGYWN0b3IgfHwgMTsNCg0KICAgICAgICAgICAgaW5saW5lSW1hZ2VzKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHZhciBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IGVsLmNsb25lTm9kZSh0cnVlKTsNCiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCgNCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lLmdldEF0dHJpYnV0ZSgnd2lkdGgnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfHwgY2xvbmUuc3R5bGUud2lkdGgNCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IG91dCQuZ2V0Q29tcHV0ZWRTdHlsZShlbCkuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IHBhcnNlSW50KA0KICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUuZ2V0QXR0cmlidXRlKCdoZWlnaHQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfHwgY2xvbmUuc3R5bGUuaGVpZ2h0DQogICAgICAgICAgICAgICAgICAgICAgICB8fCBvdXQkLmdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpDQogICAgICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgICAgIHZhciB4bWxucyA9ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zLyI7DQoNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCAiMS4xIik7DQogICAgICAgICAgICAgICAgY2xvbmUuc2V0QXR0cmlidXRlTlMoeG1sbnMsICJ4bWxucyIsICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIpOw0KICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZU5TKHhtbG5zLCAieG1sbnM6eGxpbmsiLCAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIpOw0KICAgICAgICAgICAgICAgIGNsb25lLnNldEF0dHJpYnV0ZSgid2lkdGgiLCB3aWR0aCAqIHNjYWxlRmFjdG9yKTsNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIGhlaWdodCAqIHNjYWxlRmFjdG9yKTsNCiAgICAgICAgICAgICAgICBjbG9uZS5zZXRBdHRyaWJ1dGUoInZpZXdCb3giLCAiMCAwICIgKyB3aWR0aCArICIgIiArIGhlaWdodCk7DQogICAgICAgICAgICAgICAgb3V0ZXIuYXBwZW5kQ2hpbGQoY2xvbmUpOw0KDQogICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKHN0eWxlcyhjbG9uZSksIGNsb25lLmZpcnN0Q2hpbGQpOw0KDQogICAgICAgICAgICAgICAgdmFyIHN2ZyA9IGRvY3R5cGUgKyBvdXRlci5pbm5lckhUTUw7DQogICAgICAgICAgICAgICAgdmFyIHVyaSA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LCcgKyB3aW5kb3cuYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ZnKSkpOw0KICAgICAgICAgICAgICAgIGlmIChjYikgew0KICAgICAgICAgICAgICAgICAgICBjYih1cmkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgb3V0JC5zYXZlU3ZnQXNQbmcgPSBmdW5jdGlvbihlbCwgbmFtZSwgc2NhbGVGYWN0b3IpIHsNCiAgICAgICAgICAgIG91dCQuc3ZnQXNEYXRhVXJpKGVsLCBzY2FsZUZhY3RvciwgZnVuY3Rpb24odXJpKSB7DQogICAgICAgICAgICAgICAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7DQogICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gdXJpOw0KICAgICAgICAgICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7DQogICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoOw0KICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBuYW1lOw0KICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsNCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsNCiAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfSkoKTsNCjwvc2NyaXB0Pg0KDQo8c3R5bGU+DQogICAgLnNsaWRlci13aWR0aDUwMA0KICAgIHsNCiAgICAgICAgd2lkdGg6IDUwMHB4Ow0KICAgIH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCg0KPGJvZHk+DQoNCl9fQ0hBUlRTX1RFWFRfXw0KDQo8aDI+UGVyY2VudGlsZSBSZXNwb25zZSBUaW1lIERpc3RyaWJ1dGlvbjwvaDI+DQoNCjxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZmlsZXMiIG5hbWU9ImZpbGVzW10iIG11bHRpcGxlIC8+DQoNCjxwcmUgaWQ9ImZpbGVEaXNwbGF5QXJlYSI+UGxlYXNlIHNlbGVjdCBmaWxlKHMpIGFib3ZlLjwvcHJlPg0KDQo8IS0tRGl2IHRoYXQgd2lsbCBob2xkIHRoZSBjaGFydC0tPg0KPGRpdiBpZD0iY2hhcnRfZGl2Ij5Ob25lIExvYWRlZDwvZGl2Pg0KDQpMYXRlbmN5IHRpbWUgdW5pdHM6DQo8c2VsZWN0IG5hbWU9InVuaXRzIiBzaXplPSIxIiBpZD0idGltZVVuaXRTZWxlY3Rpb24iIG9uQ2hhbmdlPSJ0aW1lVW5pdHNTZWxlY3RlZCgpIj4NCiAgICA8b3B0aW9uIHZhbHVlPSJMYXRlbmN5IChzZWNvbmRzKSI+c2Vjb25kczwvb3B0aW9uPg0KICAgIDxvcHRpb24gc2VsZWN0ZWQgdmFsdWU9IkxhdGVuY3kgKG1pbGxpc2Vjb25kcykiPm1pbGxpc2Vjb25kczwvb3B0aW9uPg0KICAgIDxvcHRpb24gdmFsdWU9IkxhdGVuY3kgKHFzKSI+bWljcm9zZWNvbmRzPC9vcHRpb24+DQogICAgPG9wdGlvbiB2YWx1ZT0iTGF0ZW5jeSAobmFub3NlY29uZHMpIj5uYW5vc2Vjb25kczwvb3B0aW9uPg0KPC9zZWxlY3Q+DQo8YnV0dG9uIHR5cGU9J2J1dHRvbicgb25jbGljaz0nZG9FeHBvcnQoZXZlbnQpJz5FeHBvcnQgSW1hZ2U8L2J1dHRvbj4NCg0KJm5ic3A7ICZuYnNwOyAmbmJzcDsgJm5ic3A7DQo8cD4NClBlcmNlbnRpbGUgcmFuZ2U6DQoNCjxpbnB1dCB0eXBlPSJyYW5nZSIgY2xhc3M9InNsaWRlci13aWR0aDUwMCINCiAgICAgICBtaW49IjEiIG1heD0iOCIgdmFsdWU9IjciIHN0ZXA9IjEiDQogICAgICAgd2lkdGg9IjMwMHB4Ig0KICAgICAgIG9uY2hhbmdlPSJzaG93VmFsdWUodGhpcy52YWx1ZSkiIC8+DQo8c3BhbiBpZD0icGVyY2VudGlsZVJhbmdlIj45OS45OTk5OSU8L3NwYW4+DQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgZnVuY3Rpb24gc2hvd1ZhbHVlKG5ld1ZhbHVlKSB7DQogICAgICAgIHZhciB4ID0gTWF0aC5wb3coMTAsIG5ld1ZhbHVlKTsNCiAgICAgICAgdmFyIHBlcmNlbnRpbGUgPSAxMDAuMCAtICgxMDAuMCAvIHgpOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGVyY2VudGlsZVJhbmdlIikuaW5uZXJIVE1MPXBlcmNlbnRpbGUgKyAiJSI7DQogICAgICAgIG1heFBlcmNlbnRpbGUgPSB4Ow0KICAgICAgICBkcmF3Q2hhcnQoKTsNCiAgICAgICAgcmV0dXJuIHt0eXBlZDogJyd9Ow0KICAgIH0NCjwvc2NyaXB0Pg0KPC9wPg0KPHA+DQogICAgPGJyPg0KKioqIE5vdGU6IElucHV0IGZpbGVzIGFyZSBleHBlY3RlZCB0byBiZSBpbiB0aGUgLmhncm0gZm9ybWF0IHByb2R1Y2VkIGJ5DQpIaXN0b2dyYW1Mb2dQcm9jZXNzb3IsIG9yIHRoZSBwZXJjZW50aWxlIG91dHB1dCBmb3JtYXQgZm9yIEhkckhpc3RvZ3JhbS4NClNlZSBleGFtcGxlIGZpbGUgZm9ybWF0DQogICAgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0hkckhpc3RvZ3JhbS9IZHJIaXN0b2dyYW0vYmxvYi9tYXN0ZXIvR29vZ2xlQ2hhcnRzRXhhbXBsZS9leGFtcGxlMS50eHQiPmhlcmU8L2E+DQo8L3A+DQo8IS0tPGg0PkV4cGVjdGVkIFNlcnZpY2UgTGV2ZWw6PC9oND4tLT4NCjwhLS08aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9IkVTTCIgdmFsdWU9IkVTTCI+UGxvdCBFeHBlY3RlZCBTZXJ2aWNlIExldmVsPGJyPi0tPg0KPCEtLVBlcmNlbnRpbGU6LS0+DQo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMCIgbmFtZT0iRVNMUGVyY2VudGlsZTAiIHNpemU9IjYiIHZhbHVlID0gOTAgLz4tLT4NCjwhLS0lICZuYnNwICZuYnNwICZuYnNwIExpbWl0Oi0tPg0KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMTGltaXQwIiBuYW1lPSJFU0xMaW1pdDAiIHNpemU9IjEyIi8+LS0+DQo8IS0tPGJyPi0tPg0KPCEtLVBlcmNlbnRpbGU6LS0+DQo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMSIgbmFtZT0iRVNMUGVyY2VudGlsZTEiIHNpemU9IjYiIHZhbHVlID0gOTkgLz4tLT4NCjwhLS0lICZuYnNwICZuYnNwICZuYnNwIExpbWl0Oi0tPg0KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMTGltaXQxIiBuYW1lPSJFU0xMaW1pdDEiIHNpemU9IjEyIi8+LS0+DQo8IS0tPGJyPi0tPg0KPCEtLVBlcmNlbnRpbGU6LS0+DQo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMiIgbmFtZT0iRVNMUGVyY2VudGlsZTIiIHNpemU9IjYiIHZhbHVlID0gOTkuOTkgLz4tLT4NCjwhLS0lICZuYnNwICZuYnNwICZuYnNwIExpbWl0Oi0tPg0KPCEtLTxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iRVNMTGltaXQyIiBuYW1lPSJFU0xMaW1pdDIiIHNpemU9IjEyIi8+LS0+DQo8IS0tPGJyPi0tPg0KPCEtLVBlcmNlbnRpbGU6LS0+DQo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xQZXJjZW50aWxlMyIgbmFtZT0iRVNMUGVyY2VudGlsZTIiIHNpemU9IjYiIHZhbHVlPSIxMDAuMCIgcmVhZG9ubHkvPi0tPg0KPCEtLSUgJm5ic3AgJm5ic3AgJm5ic3AgTGltaXQ6LS0+DQo8IS0tPGlucHV0IHR5cGU9InRleHQiIGlkPSJFU0xMaW1pdDMiIG5hbWU9IkVTTExpbWl0MiIgc2l6ZT0iMTIiLz4tLT4NCg0KJycnDQoNCnN1bW1hcnlfaHRtbF8zID0gJycnPC9ib2R5Pg0KPC9odG1sPg0KJycnDQoNCiMgPGgyPjxhIGhyZWY9Imh0dHBzOi8vd2ZvdWNoZS5naXRodWIuaW8vVHVsaXAtZG9jcyI+X19ERVNDMV9fPC9hPiAvIF9fREVTQzJfXzwvaDI+DQojIDxoMj5fX0RFU0MxX18gLyBfX0RFU0MyX188L2gyPg0KDQpoZWFkZXIgPSAnJyc8IURPQ1RZUEUgaHRtbD4NCjxodG1sPg0KDQo8c3R5bGU+DQp0YWJsZSwgdGgsIHRkIHsNCiAgYm9yZGVyOjFweCBzb2xpZCBibGFjazsgZm9udC1zaXplOjE2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCnRoOm50aC1jaGlsZChuKzE0KSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0U1RTRFMjsNCn0NCnRkOm50aC1jaGlsZChuKzE0KSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI0U1RTRFMjsNCn0NCjwvc3R5bGU+DQoNCjxib2R5Pg0KDQo8aDI+PGEgaHJlZj0iaHR0cHM6Ly93Zm91Y2hlLmdpdGh1Yi5pby9UdWxpcC1kb2NzIj5fX0RFU0MxX188L2E+IC8gX19ERVNDMl9fPC9oMj4NCg0KPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlIj4NCiAgPHRyPg0KICAgIDx0aD5CZW5jaG1hcms8L3RoPg0KICAgIDx0aD5SdW4gSWQ8L3RoPg0KICAgIDx0aD4jTjwvdGg+DQogICAgPHRoPiNGPC90aD4NCiAgICA8dGg+RHVyYXRpb248L3RoPg0KICAgIDx0aD5BcHM8L3RoPg0KICAgIDx0aD5BdmdfUnQ8L3RoPg0KICAgIDx0aD5TdGRldjwvdGg+DQogICAgPHRoPk1pbl9SdDwvdGg+DQogICAgPHRoPjkwcF9SdDwvdGg+DQogICAgPHRoPjk5cF9SdDwvdGg+DQogICAgPHRoPk1heF9SdDwvdGg+DQogICAgPHRoPk1heF9SdHQ8L3RoPg0KICAgIDx0aD5BUVM8L3RoPg0KICAgIDx0aD5NUVM8L3RoPg0KICAgIDx0aD5BV1Q8L3RoPg0KICAgIDx0aD5NV1Q8L3RoPg0KICAgIDx0aD5DUFVfVDwvdGg+DQogICAgPHRoPkNQVTwvdGg+DQogICAgPHRoPk1FTTwvdGg+DQogIDwvdHI+DQonJycNCg0KYmVuY2htYXJrX2NvbHVtbnMgPSAnJycNCiAgPHRyPg0KICAgIDx0aD5CZW5jaG1hcms8L3RoPg0KICAgIDx0aD5SdW4gSWQ8L3RoPg0KICAgIDx0aD4jTjwvdGg+DQogICAgPHRoPiNGPC90aD4NCiAgICA8dGg+RHVyYXRpb248L3RoPg0KICAgIDx0aD5BcHM8L3RoPg0KICAgIDx0aD5BdmdfUnQ8L3RoPg0KICAgIDx0aD5TdGRldjwvdGg+DQogICAgPHRoPk1pbl9SdDwvdGg+DQogICAgPHRoPjkwcF9SdDwvdGg+DQogICAgPHRoPjk5cF9SdDwvdGg+DQogICAgPHRoPk1heF9SdDwvdGg+DQogICAgPHRoPk1heF9SdHQ8L3RoPg0KICAgIDx0aD5BUVM8L3RoPg0KICAgIDx0aD5NUVM8L3RoPg0KICAgIDx0aD5BV1Q8L3RoPg0KICAgIDx0aD5NV1Q8L3RoPg0KICAgIDx0aD5DUFVfVDwvdGg+DQogICAgPHRoPkNQVTwvdGg+DQogICAgPHRoPk1FTTwvdGg+DQogIDwvdHI+DQonJycNCg0KYmVuY2htYXJrX2hlYWRlciA9ICcnJw0KICA8dHI+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgICA8dGQ+PC90ZD4NCiAgPC90cj4NCicnJw0KDQpiZW5jaG1hcmtfZW1wdHlfcm93ID0gJycnDQogIDx0cj4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgICA8dGQ+Jm5ic3A7PC90ZD4NCiAgPC90cj4NCicnJw0KDQpiZW5jaG1hcmtfZGV0YWlsX3JvdyA9ICcnJw0KICA8dHI+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+JWQ8L3RkPg0KICAgIDx0ZD4lZDwvdGQ+DQogICAgPHRkPiVkPC90ZD4NCiAgICA8dGQ+JXM8L3RkPg0KICAgIDx0ZD4lLjNmPC90ZD4NCiAgICA8dGQ+JS4zZiBtczwvdGQ+DQogICAgPHRkPiUuMWYgbXM8L3RkPg0KICAgIDx0ZD4lLjFmIG1zPC90ZD4NCiAgICA8dGQ+JS4xZiBtczwvdGQ+DQogICAgPHRkPiUuMWYgbXM8L3RkPg0KICAgIDx0ZD4lLjFmIG1zPC90ZD4NCiAgICA8dGQ+JXM8L3RkPg0KICAgIDx0ZD4lLjFmPC90ZD4NCiAgICA8dGQ+JWQ8L3RkPg0KICAgIDx0ZD4lLjFmPC90ZD4NCiAgICA8dGQ+JS4xZjwvdGQ+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+JS4xZjwvdGQ+DQogICAgPHRkPiUuMWY8L3RkPg0KICA8L3RyPg0KJycnDQoNCmJlbmNobWFya19zdW1tYXJ5X3JvdyA9ICcnJw0KICA8dHI+DQogICAgPHRkPiVzPC90ZD4NCiAgICA8dGQ+JXM8L3RkPg0KICAgIDx0ZD48Yj4lZDwvYj48L3RkPg0KICAgIDx0ZD48Yj48dGFnMT4lZDwvdGFnMT48L2I+PC90ZD4NCiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+PHRhZzI+JS4zZjwvdGFnMj48L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4zZiBtczwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZiBtczwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmIG1zPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWYgbXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPg0KICAgIDx0ZD48Yj4lZDwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+DQogICAgPHRkPjxiPiUuMWY8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JXM8L2I+PC90ZD4NCiAgICA8dGQ+PGI+JS4xZjwvYj48L3RkPg0KICAgIDx0ZD48Yj4lLjFmPC9iPjwvdGQ+DQogIDwvdHI+DQonJycNCg0KdHJhaWxlciA9ICcnJw0KPC90YWJsZT4NCjwvYm9keT4NCjwvaHRtbD4NCicnJw0KDQpjaGFydHNfaHRtbCA9ICcnJw0KPGgyPkFjdGlvbnMgcGVyIFNlY29uZDwvaDI+DQogIDxkaXYgaWQ9Im1haW4iIHN0eWxlPSJ3aWR0aDogMTAwJTtoZWlnaHQ6NDAwcHg7Ij48L2Rpdj4NCiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2VjaGFydHMvNS42LjAvZWNoYXJ0cy5taW4uanMiPjwvc2NyaXB0Pg0KICA8c2NyaXB0IHNyYz0iX19KU19UX0NIQVJUX18iPjwvc2NyaXB0Pg0KPGgyPlJlc3BvbnNlIFRpbWVzIChtcyk8L2gyPg0KICA8ZGl2IGlkPSJtYWluX3AiIHN0eWxlPSJ3aWR0aDogMTAwJTtoZWlnaHQ6NDAwcHg7Ij48L2Rpdj4NCiAgPHNjcmlwdCBzcmM9Il9fSlNfUF9DSEFSVF9fIj48L3NjcmlwdD4NCicnJw0KDQpjaGFydF90X2h0bWwgPSAnJycNCnZhciBteUNoYXJ0MSA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpKTsNCg0KdmFyIGRhdGEgPSAgX19EQVRBX187DQoNCnZhciBvcHRpb24gPSB7DQogIGxlZ2VuZDoge30sDQogIHRvb2x0aXA6IHsNCiAgICB0cmlnZ2VyOiAnYXhpcycsDQogIH0sDQogIGRhdGFzZXQ6IHsNCiAgICBzb3VyY2U6ZGF0YSwNCiAgICBkaW1lbnNpb25zOiBbJ3RpbWVzdGFtcCcsICdzZW5zb3IxJywgJ3NlbnNvcjInXSwNCiAgfSwNCiAgeEF4aXM6IHsgdHlwZTogJ3RpbWUnIH0sDQogIHlBeGlzOiB7IH0sDQogIHNlcmllczogWw0KICB7DQogICAgIG5hbWU6ICdBY3Rpb25zL3MnLA0KICAgICB0eXBlOiAnbGluZScsDQogICAgIHNtb290aDogdHJ1ZSwNCiAgICAgZW5jb2RlOiB7DQogICAgICAgeDogJ3RpbWVzdGFtcCcsDQogICAgICAgeTogJ3NlbnNvcjEnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlIA0KICAgICB9DQogIH0sew0KICAgICBuYW1lOiAnRmFpbHVyZXMvcycsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yMicNCiAgfQ0KfV0NCn07DQpteUNoYXJ0MS5zZXRPcHRpb24ob3B0aW9uKTsNCicnJw0KDQpjaGFydF9wX2h0bWwgPSAnJycNCnZhciBteUNoYXJ0MiA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbl9wJykpOw0KDQp2YXIgZGF0YSA9ICBfX0RBVEFfXzsNCg0KdmFyIG9wdGlvbiA9IHsNCiAgbGVnZW5kOiB7fSwNCiAgdG9vbHRpcDogew0KICAgIHRyaWdnZXI6ICdheGlzJywNCiAgfSwNCiAgZGF0YXNldDogew0KICAgIHNvdXJjZTpkYXRhLA0KICAgIGRpbWVuc2lvbnM6IFsndGltZXN0YW1wJywgJ3NlbnNvcjEnLCAnc2Vuc29yMicsICdzZW5zb3IzJywgJ3NlbnNvcjQnLCAnc2Vuc29yNScsICdzZW5zb3I2J10sDQogIH0sDQogIHhBeGlzOiB7IHR5cGU6ICd0aW1lJyB9LA0KICB5QXhpczogeyB9LA0KICBzZXJpZXM6IFsNCiAgew0KICAgICBuYW1lOiAnTWF4JywNCiAgICAgdHlwZTogJ2xpbmUnLA0KICAgICBzbW9vdGg6IHRydWUsDQogICAgIGVuY29kZTogew0KICAgICAgIHg6ICd0aW1lc3RhbXAnLA0KICAgICAgIHk6ICdzZW5zb3I2JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQ0KICAgICB9DQogIH0sew0KICAgICBuYW1lOiAncDk5JywNCiAgICAgdHlwZTogJ2xpbmUnLA0KICAgICBzbW9vdGg6IHRydWUsDQogICAgIGVuY29kZTogew0KICAgICAgIHg6ICd0aW1lc3RhbXAnLA0KICAgICAgIHk6ICdzZW5zb3I1JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQ0KICAgICB9DQogIH0sew0KICAgICBuYW1lOiAncDk1JywNCiAgICAgdHlwZTogJ2xpbmUnLA0KICAgICBzbW9vdGg6IHRydWUsDQogICAgIGVuY29kZTogew0KICAgICAgIHg6ICd0aW1lc3RhbXAnLA0KICAgICAgIHk6ICdzZW5zb3I0JyAvLyByZWZlciBzZW5zb3IgMSB2YWx1ZQ0KICAgICB9DQoNCiAgfSx7DQogICAgIG5hbWU6ICdwOTAnLA0KICAgICB0eXBlOiAnbGluZScsDQogICAgIHNtb290aDogdHJ1ZSwNCiAgICAgZW5jb2RlOiB7DQogICAgICAgeDogJ3RpbWVzdGFtcCcsDQogICAgICAgeTogJ3NlbnNvcjMnIC8vIHJlZmVyIHNlbnNvciAxIHZhbHVlDQogICAgIH0NCg0KICB9LHsNCiAgICAgbmFtZTogJ0F2ZycsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yMicNCiAgICAgfQ0KICB9LHsNCiAgICAgbmFtZTogJ01pbicsDQogICAgIHR5cGU6ICdsaW5lJywNCiAgICAgc21vb3RoOiB0cnVlLA0KICAgICBlbmNvZGU6IHsNCiAgICAgICB4OiAndGltZXN0YW1wJywNCiAgICAgICB5OiAnc2Vuc29yMScNCiAgfQ0KfV0NCn07DQpteUNoYXJ0Mi5zZXRPcHRpb24ob3B0aW9uKTsNCg0Kd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKSB7DQogIG15Q2hhcnQxLnJlc2l6ZSgpOw0KICBteUNoYXJ0Mi5yZXNpemUoKTsNCn07DQonJycNCg0KY2xhc3MgU3VtbWFyeToNCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYubnVtX2FjdGlvbnMgPSAwDQogICAgICAgIHNlbGYubnVtX2ZhaWxlZCA9IDANCiAgICAgICAgc2VsZi5kdXJhdGlvbiA9IDAuMA0KICAgICAgICBzZWxmLm1pbl9ydCA9IDEwMDAwMDAwMDAuMA0KICAgICAgICBzZWxmLm1heF9ydCA9IDAuMA0KICAgICAgICBzZWxmLm1heF9ydF90cyA9ICIiDQogICAgICAgIHNlbGYubWVtID0gMC4wDQogICAgICAgIHNlbGYuY3B1ID0gMC4wDQogICAgICAgIHNlbGYubWF4X2F3dCA9IDAuMA0KICAgICAgICBzZWxmLm1heF93dCA9IDAuMA0KICAgICAgICBzZWxmLmF2Z19xcyA9IDAuMA0KICAgICAgICBzZWxmLm1heF9xcyA9IDANCiAgICAgICAgc2VsZi5uYW1lID0gIiINCiAgICAgICAgc2VsZi5jcHVfdGltZV9ucyA9IDANCiAgICAgICAgc2VsZi5jaGFydF90X2xpc3QgPSBbXSAgICMgWycyMDE4LTA0LTEwVDIwOjQwOjMzLjEwMCcsIDExMDAsIDBdDQogICAgICAgIHNlbGYuY2hhcnRfcF9saXN0ID0gW10gICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMF0NCg0KZGVmIGNyZWF0ZVJlcG9ydChmaWxlbmFtZSwgdGV4dCk6DQoNCiAgICBwcmludCgiXG5PdXRwdXQgZmlsZW5hbWUgPSAiICsgZmlsZW5hbWUpDQoNCiAgICBpZiB0ZXh0WzBdID09ICd7JzoNCiAgICAgICAgY29uZmlnX2ZpbGVuYW1lID0gIiINCiAgICBlbHNlOg0KICAgICAgICBjb25maWdfZmlsZW5hbWUgPSB0ZXh0DQoNCiAgICBqaGggPSB7fQ0KICAgIGpzcyA9IHt9DQoNCiAgICBwcmludF9kZXRhaWxfcm93cyA9IFRydWUNCg0KICAgIGdsb2JhbCBuYW1lMnMNCiAgICBnbG9iYWwgbmFtZTJzX2xpc3QNCiAgICBnbG9iYWwgYmVuY2htYXJrX2lkDQogICAgbmFtZTJzID0gIiINCiAgICBuYW1lMnNfbGlzdCA9IFtdDQogICAgYmVuY2htYXJrX2lkID0gMA0KDQogICAgc20gPSBOb25lDQogICAgamggPSBIaXN0b2dyYW0oMSwgMzYwMCoxMDAwKjEwMDAsIDMpDQogICAgZmlsZU9iaiA9IG9wZW4oZmlsZW5hbWUpDQogICAgamIgPSBqc29uLmxvYWQoZmlsZU9iaiwgb2JqZWN0X3BhaXJzX2hvb2s9T3JkZXJlZERpY3QpDQogICAgdmVyc2lvbiA9IGpiWyd2ZXJzaW9uJ10NCiAgICBkZXNjMSA9ICdUdWxpcCAnICsgdmVyc2lvbg0KICAgIHJiID0gamJbInJlc3VsdHMiXQ0KDQogICAgcmVwb3J0X2ZuID0gamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInJlcG9ydF9maWxlbmFtZSJdDQogICAgcmVwb3J0X2ZoID0gb3BlbihyZXBvcnRfZm4sICJ3KyIpDQoNCiAgICBnbG9iYWwgcmVwb3J0X2RuDQogICAgcmVwb3J0X2RuID0gb3MucGF0aC5zcGxpdGV4dChyZXBvcnRfZm4pWzBdDQogICAgdHJ5Og0KICAgICAgICBvcy5tYWtlZGlycyhyZXBvcnRfZG4pDQogICAgZXhjZXB0Og0KICAgICAgICBwYXNzDQoNCiAgICBkZWYgb2RpcihmaWxlbmFtZSk6DQogICAgICAgIGdsb2JhbCByZXBvcnRfZG4NCiAgICAgICAgcmV0dXJuIG9zLnBhdGguam9pbihyZXBvcnRfZG4sIGZpbGVuYW1lKQ0KDQogICAgaWYgbGVuKGNvbmZpZ19maWxlbmFtZSkgPiAwOg0KICAgICAgICBkZXNjMiA9ICI8YSBocmVmPSclcyc+IiUob3MucGF0aC5zcGxpdGV4dChjb25maWdfZmlsZW5hbWUpWzBdICsgIi5hZG9jIikNCiAgICBlbHNlOg0KICAgICAgICBkZXNjMiA9ICIiDQoNCiAgICBpZiBsZW4oY29uZmlnX2ZpbGVuYW1lKSA+IDA6DQogICAgICAgIGRlc2MyICs9IGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJkZXNjcmlwdGlvbiJdICsgIjwvYT4gLyAiICsgamJbInRpbWVzdGFtcCJdWzotM10NCiAgICBlbHNlOg0KICAgICAgICBkZXNjMiArPSBqYlsiY29uZmlnIl1bImFjdGlvbnMiXVsiZGVzY3JpcHRpb24iXSArICIgLyAiICsgamJbInRpbWVzdGFtcCJdWzotM10NCg0KICAgIHByaW50KCJSZXBvcnQgZmlsZW5hbWUgPSAiICsgcmVwb3J0X2ZuKQ0KDQogICAgZGVmIHByaW50ZihzKToNCiAgICAgICAgcmVwb3J0X2ZoLndyaXRlKHMpDQoNCiAgICBkZWYgYWN0aW9uTmFtZShzKToNCiAgICAgICAgcmV0dXJuIHMuc3BsaXQoIiwiKVswXS5zdHJpcCgpDQoNCiAgICBkZWYgYWN0aW9uRGVzYyhzKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcmV0dXJuIHMuc3BsaXQoIiwiKVsxXS5zdHJpcCgpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHJldHVybiAiIg0KDQogICAgZGVmIHN0cl9mcm9tX2NwdV90aW1lX25zKHZfbnMpOg0KICAgICAgICByID0gc3RyKGRhdGV0aW1lLnRpbWVkZWx0YShzZWNvbmRzPXZfbnMvMTAwMDAwMDAwMC4wKSkgICNbOi01XQ0KICAgICAgICBpZiAnLicgaW4gcjoNCiAgICAgICAgICAgIHIgPSByWzotNV0NCiAgICAgICAgcmV0dXJuIHINCg0KICAgIGRlZiBwcmludF9nbG9iYWxfc3VtbWFyeSgpOg0KICAgICAgICBnbG9iYWwgbmFtZTJzDQogICAgICAgIGdsb2JhbCBuYW1lMnNfbGlzdA0KICAgICAgICBnbG9iYWwgYmVuY2htYXJrX2lkDQoNCiAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbS5uYW1lIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIHNtLm51bV9hY3Rpb25zL3NtLmR1cmF0aW9uDQogICAgICAgIGlmIHNtLm5hbWUgaW4gWyJvblN0YXJ0IiwgIm9uU3RvcCJdOg0KICAgICAgICAgICAgY3B1X3QgPSAiMDowMDowMCINCiAgICAgICAgICAgIHNtLmNwdSA9IDAuMA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgY3B1X3QgPSBzdHJfZnJvbV9jcHVfdGltZV9ucyhzbS5jcHVfdGltZV9ucykNCg0KICAgICAgICBzdGF0c0ZpbGVuYW1lID0gJyVzXyVkLmh0bWwnJShvZGlyKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdKSxiZW5jaG1hcmtfaWQpDQogICAgICAgIHRleHQgPSAiPGEgaHJlZj0nJXMnPiVzPC9hPiIlKHN0YXRzRmlsZW5hbWUsIltTdW1tYXJ5XSIpDQogICAgICAgIHByaW50U3RyZWFtID0gUHJpbnRTdHJlYW0oc3RhdHNGaWxlbmFtZSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoc3VtbWFyeV9odG1sXzEpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludCgnICAgIGZ1bmN0aW9uIGRyYXdJbml0aWFsQ2hhcnQoKSB7JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgICAgIC8vIENvbm5lY3QgdGhlIGNob29zZSBmaWxlcyBidXR0b246JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCIgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlcycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUZpbGVTZWxlY3QsIGZhbHNlKTsiKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgICAgIC8vIExvYWQgc29tZSBzdGF0aWMgZXhhbXBsZSBkYXRhOicpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICBpZHggPSAwDQogICAgICAgIGFjdGlvbnNTdHJpbmcgPSAiIg0KICAgICAgICBoaXN0b3NTdHJpbmcgPSAiIg0KICAgICAgICBmb3Iga2V5IGluIGpzcy5rZXlzKCk6DQogICAgICAgICAgICBpZHggKz0gMQ0KICAgICAgICAgICAgc214ID0ganNzW2tleV0NCiAgICAgICAgICAgIGpoeCA9IGpoaFtrZXldDQogICAgICAgICAgICBpZiBsZW4oYWN0aW9uc1N0cmluZykgPiAwOg0KICAgICAgICAgICAgICAgIGFjdGlvbnNTdHJpbmcgKz0gJywgJw0KICAgICAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAnLCAnDQogICAgICAgICAgICBhY3Rpb25zU3RyaW5nICs9ICInQSVzJyIlKGtleSkNCiAgICAgICAgICAgIGhpc3Rvc1N0cmluZyArPSAiZGF0YSVkU3RyIiUoaWR4KQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICB2YXIgZGF0YSVkU3RyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiZGl2I2RhdGFfJWQiKS5pbm5lckhUTUwudHJpbSgpOyclKGlkeCxpZHgpKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIGlmIGlkeCA+IDE6DQogICAgICAgICAgICBhY3Rpb25zU3RyaW5nICs9ICcsICcgKyAiJ1MnIg0KICAgICAgICAgICAgaGlzdG9zU3RyaW5nICs9ICcsICcgKyAiZGF0YSVkU3RyIiUoMCkNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGRhdGElZFN0ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImRpdiNkYXRhXyVkIikuaW5uZXJIVE1MLnRyaW0oKTsnJSgwLDApKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIGhpc3RvcyA9IFslc107JyUoaGlzdG9zU3RyaW5nKSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgdmFyIG5hbWVzID0gWyVzXTsnJShhY3Rpb25zU3RyaW5nKSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQoNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJyAgICBzZXRDaGFydERhdGEobmFtZXMsIGhpc3Rvcyk7JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgZHJhd0NoYXJ0KCk7JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50KCcgICAgfScpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICB0Q2hhcnRGaWxlbmFtZSA9ICclc18lZF90LmpzJyUob2RpcihyZXBvcnRfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQ0KICAgICAgICBwQ2hhcnRGaWxlbmFtZSA9ICclc18lZF9wLmpzJyUob2RpcihyZXBvcnRfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludCgNCiAgICAgICAgICAgIHN1bW1hcnlfaHRtbF8yDQogICAgICAgICAgICAgICAgLnJlcGxhY2UoIl9fQ0hBUlRTX1RFWFRfXyIsDQogICAgICAgICAgICAgICAgICAgIGNoYXJ0c19odG1sDQogICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIl9fSlNfVF9DSEFSVF9fIixvcy5wYXRoLmJhc2VuYW1lKHRDaGFydEZpbGVuYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiX19KU19QX0NIQVJUX18iLG9zLnBhdGguYmFzZW5hbWUocENoYXJ0RmlsZW5hbWUpKSkNCiAgICAgICAgICAgICAgICApDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KDQogICAgICAgIGlkeCA9IDANCiAgICAgICAgZm9yIGtleSBpbiBqc3Mua2V5cygpOg0KICAgICAgICAgICAgaWR4ICs9IDENCiAgICAgICAgICAgIHNteCA9IGpzc1trZXldDQogICAgICAgICAgICBqaHggPSBqaGhba2V5XQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzxkaXYgaWQ9ImRhdGFfJWQiIGNsYXNzPSJoaXN0byI+JyUoaWR4KSkNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICAgICAgamh4Lm91dHB1dFBlcmNlbnRpbGVEaXN0cmlidXRpb24ocHJpbnRTdHJlYW0sIDEwMDAuMCkNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50KCc8L2Rpdj4nKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQoNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoJzxkaXYgaWQ9ImRhdGFfMCIgY2xhc3M9Imhpc3RvIj4nKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgamgub3V0cHV0UGVyY2VudGlsZURpc3RyaWJ1dGlvbihwcmludFN0cmVhbSwgMTAwMC4wKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludCgnPC9kaXY+JykNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigpDQoNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoc3VtbWFyeV9odG1sXzMpDQogICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oKQ0KICAgICAgICBwcmludFN0cmVhbS5mbHVzaCgpDQogICAgICAgIHByaW50U3RyZWFtLmNsb3NlKCkNCg0KICAgICAgICAjIEFjdGlvbnMvcyBjaGFydA0KICAgICAgICAjY2hhcnRfdF9saXN0ID0gWw0KICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0MDozMy4xMDAnLCAxMTAwLCAwXSwNCiAgICAgICAgIyAgICBbJzIwMTgtMDQtMTBUMjA6NDA6NTMuMjAwJywgMTAwMiwgMF0sDQogICAgICAgICMgICAgWycyMDE4LTA0LTEwVDIwOjQxOjAzLjMwMCcsIDExMDQsIDBdLA0KICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0NDowMy40MDAnLCAxMjA1LjUsIDBdLA0KICAgICAgICAjICAgIFsnMjAxOC0wNC0xMFQyMDo0NTowMy41MDAnLCAxMzA2LCAwXQ0KICAgICAgICAjXQ0KICAgICAgICBjaGFydF9wX2xpc3QgPSBbDQogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDA6MzNaJywgMSwgNSwgMTAsIDIwLCAyNSwgMzAgXSwNCiAgICAgICAgICAgIFsnMjAxOC0wNC0xMFQyMDo0MDo1M1onLCAyLCA2LCAxNSwgMjUsIDMwLCAzNV0sDQogICAgICAgICAgICBbJzIwMTgtMDQtMTBUMjA6NDE6MDNaJywgMiwgNSwgMjAsIDMwLCAzNSwgNDBdLA0KICAgICAgICAgICAgWycyMDE4LTA0LTEwVDIwOjQ0OjAzWicsIDMsIDcsIDEyLCAyMiwgMzAsIDMyXSwNCiAgICAgICAgICAgIFsnMjAxOC0wNC0xMFQyMDo0NTowM1onLCAyLCAxMCwgMTMsIDIzLCAzMCwgMzNdDQogICAgICAgIF0NCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbSh0Q2hhcnRGaWxlbmFtZSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoY2hhcnRfdF9odG1sLnJlcGxhY2UoIl9fREFUQV9fIiwoIiVzIiUoc20uY2hhcnRfdF9saXN0KSkucmVwbGFjZSgidSciLCInIikpKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQ0KICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpDQoNCiAgICAgICAgIyBSZXNwb25zZSBUaW1lIChtcykgY2hhcnQNCiAgICAgICAgcHJpbnRTdHJlYW0gPSBQcmludFN0cmVhbShwQ2hhcnRGaWxlbmFtZSkNCiAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnQoY2hhcnRfcF9odG1sLnJlcGxhY2UoIl9fREFUQV9fIiwoIiVzIiUoc20uY2hhcnRfcF9saXN0KSkucmVwbGFjZSgidSciLCInIikpKQ0KICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCkNCiAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQ0KICAgICAgICBwcmludFN0cmVhbS5jbG9zZSgpDQoNCiAgICAgICAgaHRtbCA9IGJlbmNobWFya19zdW1tYXJ5X3JvdyUobmFtZTJzLHRleHQsc20ubnVtX2FjdGlvbnMsc20ubnVtX2ZhaWxlZCxzdHIoZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KHNtLmR1cmF0aW9uKSkpLGF2Z19hcHMsamguZ2V0TWVhbigpLzEwMDAuMCxqaC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAsc20ubWluX3J0LGpoLmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCxqaC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjAsc20ubWF4X3J0LHNtLm1heF9ydF90c1s4Ol0sc20uYXZnX3FzLHNtLm1heF9xcyxzbS5tYXhfYXd0LHNtLm1heF93dCxjcHVfdCxzbS5jcHUsc20ubWVtKQ0KICAgICAgICBpZiBub3QgcHJpbnRfZGV0YWlsX3Jvd3M6DQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8Yj4iLCIiKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC9iPiIsIiIpDQogICAgICAgICMgVmFsaWRhdGlvbjogI0YNCiAgICAgICAgaWYgc20ubnVtX2ZhaWxlZCA+IDA6DQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCI8bWFyaz4iKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIjwvbWFyaz4iKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzE+IiwiIikNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMT4iLCIiKQ0KICAgICAgICAjIFZhbGlkYXRpb246IEF2Z19BUFMNCiAgICAgICAgI3ByaW50KHNtLm5hbWUpDQogICAgICAgIGlmICJhcHNfcmF0ZSIgaW4gamJbImNvbmZpZyJdWyJiZW5jaG1hcmtzIl1bc20ubmFtZV0ua2V5cygpOg0KICAgICAgICAgICAgdGFyZ2V0X2FwcyA9IGpiWyJjb25maWciXVsiYmVuY2htYXJrcyJdW3NtLm5hbWVdWyJhcHNfcmF0ZSJdDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICB0YXJnZXRfYXBzID0gMC4wDQogICAgICAgIGlmIHRhcmdldF9hcHMgPiAwLjA6DQogICAgICAgICAgICBkZWx0YV9wZXJjZW50YWdlX2FwcyA9IDEwMC4wKmFicyh0YXJnZXRfYXBzLWF2Z19hcHMpL3RhcmdldF9hcHMNCiAgICAgICAgICAgIGlmIGRlbHRhX3BlcmNlbnRhZ2VfYXBzID4gMS41Og0KICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjx0YWcyPiIsIjxtYXJrPiIpDQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIjwvbWFyaz4iKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQ0KICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMj4iLCIiKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPHRhZzI+IiwiIikNCiAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjwvdGFnMj4iLCIiKQ0KICAgICAgICBwcmludGYoaHRtbCkNCiAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6DQogICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQ0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdDQoNCiAgICBkZWYgcHJpbnRfYWN0aW9uX3N1bW1hcnkoKToNCiAgICAgICAgZ2xvYmFsIG5hbWUycw0KICAgICAgICBnbG9iYWwgbmFtZTJzX2xpc3QNCiAgICAgICAgZ2xvYmFsIGJlbmNobWFya19pZA0KICAgICAgICBwYWdlX2lkID0gMA0KICAgICAgICBudW1fa2V5cyA9IGxlbihqc3Mua2V5cygpKQ0KICAgICAgICBmb3Iga2V5IGluIGpzcy5rZXlzKCk6DQogICAgICAgICAgICBzbXggPSBqc3Nba2V5XQ0KICAgICAgICAgICAgamh4ID0gamhoW2tleV0NCiAgICAgICAgICAgIGlmIGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJ1c2VyX2FjdGlvbnMiXS5oYXNfa2V5KGtleSk6DQogICAgICAgICAgICAgICAgdGV4dCA9ICJbJXMuJXNdIiUoa2V5LCBhY3Rpb25OYW1lKGpiWyJjb25maWciXVsiYWN0aW9ucyJdWyJ1c2VyX2FjdGlvbnMiXVtrZXldKSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgdGV4dCA9ICJbJXNdIiUoa2V5KQ0KICAgICAgICAgICAgc3RhdHNGaWxlbmFtZSA9ICclc18lZF8lZC5odG1sJyUob2RpcihyZXBvcnRfZm4uc3BsaXQoJy4nKVswXSksYmVuY2htYXJrX2lkLHBhZ2VfaWQpDQogICAgICAgICAgICBzdGF0c0ZpbGVuYW1lUHJldiA9ICclc18lZF8lZC5odG1sJyUocmVwb3J0X2ZuLnNwbGl0KCcuJylbMF0sYmVuY2htYXJrX2lkLGFicyhwYWdlX2lkLTEpKQ0KICAgICAgICAgICAgc3RhdHNGaWxlbmFtZU5leHQgPSAnJXNfJWRfJWQuaHRtbCclKHJlcG9ydF9mbi5zcGxpdCgnLicpWzBdLGJlbmNobWFya19pZCxwYWdlX2lkKzEpDQogICAgICAgICAgICB0ZXh0ID0gIjxhIGhyZWY9JyVzJz4lczwvYT4iJShzdGF0c0ZpbGVuYW1lLHRleHQpDQogICAgICAgICAgICBwcmludFN0cmVhbSA9IFByaW50U3RyZWFtKHN0YXRzRmlsZW5hbWUpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8aHRtbD4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPHN0eWxlPiIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ0YWJsZSwgdGgsIHRkIHsiKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrOyBmb250LXNpemU6MTZweDsgdGV4dC1hbGlnbjogY2VudGVyOyIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCJ9IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIm1hcmsgeyIpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCIgIGJhY2tncm91bmQtY29sb3I6IExpZ2h0R3JheTsiKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiICBjb2xvcjogYmxhY2s7IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIn0iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPC9zdHlsZT4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGJvZHk+IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9Ii4uLyVzIj5VcDwvYT4nJShyZXBvcnRfZm4pKQ0KICAgICAgICAgICAgaWYgKHBhZ2VfaWQgPT0gMCkgYW5kIChudW1fa2V5cyA9PSAxKToNCiAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCc8YSBocmVmPSIjIj5QcmV2PC9hPicpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iIyI+TmV4dDwvYT4nKQ0KICAgICAgICAgICAgZWxpZiAocGFnZV9pZCA9PSAwKSBhbmQgKG51bV9rZXlzID4gMSk6DQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iIyI+UHJldjwvYT4nKQ0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5OZXh0PC9hPiclKHN0YXRzRmlsZW5hbWVOZXh0KSkNCiAgICAgICAgICAgIGVsaWYgKHBhZ2VfaWQrMSA9PSBudW1fa2V5cyk6DQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQ0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiMiPk5leHQ8L2E+JykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignPGEgaHJlZj0iJXMiPlByZXY8L2E+JyUoc3RhdHNGaWxlbmFtZVByZXYpKQ0KICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzxhIGhyZWY9IiVzIj5OZXh0PC9hPiclKHN0YXRzRmlsZW5hbWVOZXh0KSkNCg0KICAgICAgICAgICAgaWYgamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdLmhhc19rZXkoa2V5KToNCiAgICAgICAgICAgICAgICBkZXNjID0gIlslcy4lc10iJShrZXksIGFjdGlvbk5hbWUoamJbImNvbmZpZyJdWyJhY3Rpb25zIl1bInVzZXJfYWN0aW9ucyJdW2tleV0pKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkZXNjID0gIltBJXNdIiUoa2V5KQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbigiPGgyPiVzIFBlcmNlbnRpbGUgUmVzcG9uc2UgVGltZSBEaXN0cmlidXRpb248L2gyPiIlKGRlc2MpKQ0KDQogICAgICAgICAgICAjcHJpbnRTdHJlYW0ucHJpbnRsbigiPHByZT4iKQ0KICAgICAgICAgICAgI2poeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKHByaW50U3RyZWFtLCAxMDAwLjApDQoNCiAgICAgICAgICAgIGJvcyA9IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpDQogICAgICAgICAgICBveCA9IFByaW50U3RyZWFtKGJvcykNCiAgICAgICAgICAgIGpoeC5vdXRwdXRQZXJjZW50aWxlRGlzdHJpYnV0aW9uKG94LCAxMDAwLjApDQogICAgICAgICAgICBveC5mbHVzaCgpDQogICAgICAgICAgICBveC5jbG9zZSgpDQogICAgICAgICAgICBwdGV4dCA9IGJvcy50b1N0cmluZygpDQogICAgICAgICAgICBsaW5lcyA9IHB0ZXh0LnNwbGl0KCdcbicpDQogICAgICAgICAgICB0Y291bnQgPSBqaHguZ2V0VG90YWxDb3VudCgpDQogICAgICAgICAgICBoZWFkZXIgPSBUcnVlDQogICAgICAgICAgICBybGlzdCA9IFtdDQogICAgICAgICAgICBmb3IgbGluZSBpbiBsaW5lczoNCiAgICAgICAgICAgICAgaWYgbGVuKGxpbmUpID09IDA6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgaWYgbGluZVswXSAhPSAiIyI6DQogICAgICAgICAgICAgICAgZSA9IGxpbmUuc3BsaXQoKQ0KICAgICAgICAgICAgICAgIGlmIGhlYWRlcjoNCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJzx0YWJsZSBzdHlsZT0id2lkdGg6NjAwcHgiPicpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDx0cj4nKQ0KICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVswXSkpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPiVzPC90aD4nJShlWzFdKSkNCiAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGg+JXM8L3RoPiclKGVbMl0pKQ0KICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0aD4lczwvdGg+JyUoZVszXSkpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRoPkFib3ZlQ291bnQ8L3RoPicpDQogICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgIDwvdHI+JykNCiAgICAgICAgICAgICAgICAgIGhlYWRlciA9IEZhbHNlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgIGlmIGxlbihlKSA9PSAzOg0KICAgICAgICAgICAgICAgICAgICBlLmFwcGVuZCgnJykNCiAgICAgICAgICAgICAgICAgIHJsaXN0LmFwcGVuZChlKQ0KICAgICAgICAgICAgcmxpc3QucmV2ZXJzZSgpDQogICAgICAgICAgICBmb3IgZSBpbiBybGlzdDoNCiAgICAgICAgICAgICAgICBtYXJrID0gRmFsc2UNCiAgICAgICAgICAgICAgICBpZiBlWzFdLnN0YXJ0c3dpdGgoIjAuOTk5MCIpOg0KICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGlmIGVbMV0uc3RhcnRzd2l0aCgiMC45OTAiKToNCiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUNCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjk1MDAwMDAwMDAwMCI6DQogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlDQogICAgICAgICAgICAgICAgaWYgZVsxXSA9PSAiMC45MDAwMDAwMDAwMDAiOg0KICAgICAgICAgICAgICAgICAgICBtYXJrID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGlmIGVbMV0gPT0gIjAuODAwMDAwMDAwMDAwIjoNCiAgICAgICAgICAgICAgICAgICAgbWFyayA9IFRydWUNCiAgICAgICAgICAgICAgICBpZiBlWzFdID09ICIwLjUwMDAwMDAwMDAwMCI6DQogICAgICAgICAgICAgICAgICAgIG1hcmsgPSBUcnVlDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8dHI+JykNCiAgICAgICAgICAgICAgICBpZiBtYXJrOg0KICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPjxtYXJrPiVzPC9tYXJrPjwvdGQ+JyUoZVswXSkpDQogICAgICAgICAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oJyAgICA8dGQ+PG1hcms+JXM8L21hcms+PC90ZD4nJShlWzFdKSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCcgICAgPHRkPiVzPC90ZD4nJShlWzBdKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsxXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVsyXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUoZVszXSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICAgIDx0ZD4lczwvdGQ+JyUodGNvdW50LWludChlWzJdKSkpDQogICAgICAgICAgICAgICAgcHJpbnRTdHJlYW0ucHJpbnRsbignICA8L3RyPicpDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L3RhYmxlPiIpDQoNCiAgICAgICAgICAgICNwcmludFN0cmVhbS5wcmludGxuKCI8L3ByZT4iKQ0KDQogICAgICAgICAgICBwcmludFN0cmVhbS5wcmludGxuKCI8L2JvZHk+IikNCiAgICAgICAgICAgIHByaW50U3RyZWFtLnByaW50bG4oIjwvaHRtbD4iKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0uZmx1c2goKQ0KICAgICAgICAgICAgcHJpbnRTdHJlYW0uY2xvc2UoKQ0KICAgICAgICAgICAgYXZnX2FwcyA9IDAuMCBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl0gZWxzZSBzbXgubnVtX2FjdGlvbnMvc214LmR1cmF0aW9uDQogICAgICAgICAgICBpZiBzbXgubmFtZSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06DQogICAgICAgICAgICAgICAgY3B1X3QgPSAiMDowMDowMCINCiAgICAgICAgICAgICAgICBzbXguY3B1ID0gMC4wDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoc214LmNwdV90aW1lX25zKQ0KICAgICAgICAgICAgaHRtbCA9IGJlbmNobWFya19zdW1tYXJ5X3JvdyUobmFtZTJzLHRleHQsc214Lm51bV9hY3Rpb25zLHNteC5udW1fZmFpbGVkLHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoc20uZHVyYXRpb24pKSksYXZnX2FwcyxqaHguZ2V0TWVhbigpLzEwMDAuMCxqaHguZ2V0U3RkRGV2aWF0aW9uKCkvMTAwMC4wLHNteC5taW5fcnQsamh4LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCxqaHguZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTkuMCkvMTAwMC4wLHNteC5tYXhfcnQsc214Lm1heF9ydF90c1s4Ol0sc214LmF2Z19xcyxzbXgubWF4X3FzLHNteC5tYXhfYXd0LHNteC5tYXhfd3QsY3B1X3Qsc214LmNwdSxzbXgubWVtKQ0KICAgICAgICAgICAgaWYgbm90IHByaW50X2RldGFpbF9yb3dzOg0KICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoIjxiPiIsIiIpDQogICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC9iPiIsIiIpDQogICAgICAgICAgICAjIFJlbW92ZSB0YWcxDQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMT4iLCIiKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcxPiIsIiIpDQogICAgICAgICAgICAjIFJlbW92ZSB0YWcyDQogICAgICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKCI8dGFnMj4iLCIiKQ0KICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgiPC90YWcyPiIsIiIpDQoNCiAgICAgICAgICAgIHByaW50ZihodG1sKQ0KICAgICAgICAgICAgaWYgbGVuKG5hbWUyc19saXN0KSA+IDA6DQogICAgICAgICAgICAgICAgbmFtZTJzID0gbmFtZTJzX2xpc3RbMF0NCiAgICAgICAgICAgICAgICBkZWwgbmFtZTJzX2xpc3RbMF0NCg0KICAgICAgICAgICAgcGFnZV9pZCArPSAxDQoNCiAgICBwcmludGYoaGVhZGVyLnJlcGxhY2UoIl9fREVTQzFfXyIsIGRlc2MxKS5yZXBsYWNlKCJfX0RFU0MyX18iLCBkZXNjMikpDQoNCiAgICBwcmV2X3Jvd19pZCA9IDANCiAgICBmb3IgZSBpbiByYjoNCiAgICAgICAgY3VycmVudF9yb3dfaWQgPSBpbnQoZVsicm93X2lkIl0pDQogICAgICAgIGlmIGN1cnJlbnRfcm93X2lkIDw9IHByZXZfcm93X2lkOg0KICAgICAgICAgICAgaWYgc20gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgcHJpbnRfYWN0aW9uX3N1bW1hcnkoKQ0KICAgICAgICAgICAgICAgIHByaW50X2dsb2JhbF9zdW1tYXJ5KCkNCiAgICAgICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2VtcHR5X3JvdykNCiAgICAgICAgICAgICAgICBwcmludGYoYmVuY2htYXJrX2NvbHVtbnMpDQogICAgICAgICAgICBzbSA9IFN1bW1hcnkoKQ0KICAgICAgICAgICAgc20ubmFtZSA9IGVbImJtX25hbWUiXQ0KICAgICAgICAgICAgamgucmVzZXQoKQ0KICAgICAgICAgICAgYmVuY2htYXJrX2lkICs9IDENCiAgICAgICAgICAgIGpoaCA9IHt9DQogICAgICAgICAgICBqc3MgPSB7fQ0KICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19oZWFkZXIlKGVbImJtX25hbWUiXSkpDQogICAgICAgICAgICBpZiBsZW4oZVsid29ya2Zsb3dfbmFtZSJdKSA+IDA6DQogICAgICAgICAgICAgICAgbmFtZTJzX2xpc3QgPSBbInU6JWQsIHQ6JWQiJShlWyJudW1fdXNlcnMiXSxlWyJudW1fdGhyZWFkcyJdKSwgInc6JXMiJShlWyJ3b3JrZmxvd19uYW1lIl0pLCAiYzolZCIlKGVbImNvbnRleHRfaWQiXSkgLCIiXQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBuYW1lMnNfbGlzdCA9IFsidTolZCwgdDolZCIlKGVbIm51bV91c2VycyJdLGVbIm51bV90aHJlYWRzIl0pLCAiYzolZCIlKGVbImNvbnRleHRfaWQiXSksIiJdDQogICAgICAgICAgICBuYW1lMnMgPSBuYW1lMnNfbGlzdFswXQ0KICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdDQogICAgICAgIGh0ID0gSGlzdG9ncmFtLmZyb21TdHJpbmcoZVsiaGlzdG9ncmFtX3J0Il0pDQogICAgICAgIGpoLmFkZChodCkNCiAgICAgICAgcF9tZW0gPSAxMDAuMCAqIGVbImp2bV9tZW1vcnlfdXNlZCJdIC8gZVsianZtX21lbW9yeV9tYXhpbXVtIl0NCiAgICAgICAgcF9jcHUgPSBlWyJwcm9jZXNzX2NwdV91dGlsaXphdGlvbiJdDQogICAgICAgIGlmIGVbImJtX25hbWUiXSBpbiBbIm9uU3RhcnQiLCAib25TdG9wIl06DQogICAgICAgICAgICBjcHVfdCA9ICIwOjAwOjAwIg0KICAgICAgICAgICAgcF9jcHUgPSAwLjANCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGNwdV90ID0gc3RyX2Zyb21fY3B1X3RpbWVfbnMoZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdKQ0KICAgICAgICAgICAgcF9jcHUgPSBlWyJwcm9jZXNzX2NwdV91dGlsaXphdGlvbiJdDQogICAgICAgIGlmIHByaW50X2RldGFpbF9yb3dzOg0KICAgICAgICAgICAgcHJpbnRmKGJlbmNobWFya19kZXRhaWxfcm93JSggXA0KICAgICAgICAgICAgICAgIG5hbWUycywNCiAgICAgICAgICAgICAgICBlWyJyb3dfaWQiXSsxLA0KICAgICAgICAgICAgICAgIGVbIm51bV9hY3Rpb25zIl0sDQogICAgICAgICAgICAgICAgZVsibnVtX2ZhaWxlZCJdLA0KICAgICAgICAgICAgICAgIHN0cihkYXRldGltZS50aW1lZGVsdGEoc2Vjb25kcz1pbnQoZVsiZHVyYXRpb24iXSkpKSwNCiAgICAgICAgICAgICAgICAwLjAgaWYgZVsiYm1fbmFtZSJdIGluIFsib25TdGFydCIsICJvblN0b3AiXSBlbHNlIGVbImF2Z19hcHMiXSwNCiAgICAgICAgICAgICAgICBlWyJhdmdfcnQiXSwNCiAgICAgICAgICAgICAgICBodC5nZXRTdGREZXZpYXRpb24oKS8xMDAwLjAsDQogICAgICAgICAgICAgICAgZVsibWluX3J0Il0sDQogICAgICAgICAgICAgICAgZVsicGVyY2VudGlsZXNfcnQiXVsiOTAuMCJdLA0KICAgICAgICAgICAgICAgIGVbInBlcmNlbnRpbGVzX3J0Il1bIjk5LjAiXSwNCiAgICAgICAgICAgICAgICBlWyJtYXhfcnQiXSwNCiAgICAgICAgICAgICAgICBlWyJtYXhfcnRfdHMiXVs4Ol0sDQogICAgICAgICAgICAgICAgZVsiYXZnX3d0aHJlYWRfcXNpemUiXSwNCiAgICAgICAgICAgICAgICBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdLA0KICAgICAgICAgICAgICAgIGVbImF2Z193dCJdLA0KICAgICAgICAgICAgICAgIGVbIm1heF93dCJdLA0KICAgICAgICAgICAgICAgIGNwdV90LA0KICAgICAgICAgICAgICAgIHBfY3B1LA0KICAgICAgICAgICAgICAgIHBfbWVtDQogICAgICAgICAgICAgICAgKSkNCiAgICAgICAgICAgIGlmIGxlbihuYW1lMnNfbGlzdCkgPiAwOg0KICAgICAgICAgICAgICAgIG5hbWUycyA9IG5hbWUyc19saXN0WzBdDQogICAgICAgICAgICAgICAgZGVsIG5hbWUyc19saXN0WzBdDQogICAgICAgIGlmIHNtLm1pbl9ydCA+IGVbIm1pbl9ydCJdOg0KICAgICAgICAgICAgc20ubWluX3J0ID0gZVsibWluX3J0Il0NCiAgICAgICAgaWYgc20ubWF4X3J0IDwgZVsibWF4X3J0Il06DQogICAgICAgICAgICBzbS5tYXhfcnQgPSBlWyJtYXhfcnQiXQ0KICAgICAgICAgICAgc20ubWF4X3J0X3RzID0gZVsibWF4X3J0X3RzIl0NCiAgICAgICAgc20ubnVtX2FjdGlvbnMgKz0gZVsibnVtX2FjdGlvbnMiXQ0KICAgICAgICBzbS5udW1fZmFpbGVkICs9IGVbIm51bV9mYWlsZWQiXQ0KICAgICAgICBzbS5kdXJhdGlvbiArPSBlWyJkdXJhdGlvbiJdDQogICAgICAgIGlmIHNtLmF2Z19xcyA8IGVbImF2Z193dGhyZWFkX3FzaXplIl06DQogICAgICAgICAgICBzbS5hdmdfcXMgPSBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdDQogICAgICAgIGlmIHNtLm1heF9xcyA8IGVbIm1heF93dGhyZWFkX3FzaXplIl06DQogICAgICAgICAgICBzbS5tYXhfcXMgPSBlWyJtYXhfd3RocmVhZF9xc2l6ZSJdDQogICAgICAgIGlmIHNtLm1heF9hd3QgPCBlWyJhdmdfd3QiXToNCiAgICAgICAgICAgIHNtLm1heF9hd3QgPSBlWyJhdmdfd3QiXQ0KICAgICAgICBpZiBzbS5tYXhfd3QgPCBlWyJtYXhfd3QiXToNCiAgICAgICAgICAgIHNtLm1heF93dCA9IGVbIm1heF93dCJdDQogICAgICAgIGlmIHNtLm1lbSA8IHBfbWVtOg0KICAgICAgICAgICAgc20ubWVtID0gcF9tZW0NCiAgICAgICAgaWYgc20uY3B1IDwgcF9jcHU6DQogICAgICAgICAgICBzbS5jcHUgPSBwX2NwdQ0KICAgICAgICBzbS5jcHVfdGltZV9ucyArPSBlWyJwcm9jZXNzX2NwdV90aW1lX25zIl0NCg0KICAgICAgICBpZiBsZW4oc20uY2hhcnRfdF9saXN0KSA9PSAtMToNCiAgICAgICAgICAgIHNtLmNoYXJ0X3RfbGlzdC5hcHBlbmQoDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9iZWdpbiJdLnJlcGxhY2UoIl8iLCAiVCIpKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbImF2Z19hcHMiXSkpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjNmIiUoZVsibnVtX2ZhaWxlZCJdL2VbImR1cmF0aW9uIl0pKQ0KICAgICAgICAgICAgXSkNCg0KICAgICAgICBzbS5jaGFydF90X2xpc3QuYXBwZW5kKA0KICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfZW5kIl0ucmVwbGFjZSgiXyIsICJUIikpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX2FwcyJdKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuM2YiJShlWyJudW1fZmFpbGVkIl0vZVsiZHVyYXRpb24iXSkpDQogICAgICAgICAgICAgXSkNCg0KICAgICAgICAjIFsnMjAxOC0wNC0xMFQyMDo0MDozM1onLCAxLCA1LCAxMCwgMjAsIDI1LCAzMCBdDQogICAgICAgIGlmIGxlbihzbS5jaGFydF9wX2xpc3QpID09IC0xOg0KICAgICAgICAgICAgc20uY2hhcnRfcF9saXN0LmFwcGVuZCgNCiAgICAgICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgICAgICclcyclKGVbInRlc3RfYmVnaW4iXS5yZXBsYWNlKCJfIiwgIlQiKSksDQogICAgICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsibWluX3J0Il0pKSwNCiAgICAgICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJhdmdfcnQiXSkpLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCkpLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk1LjApLzEwMDAuMCkpLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDk5LjApLzEwMDAuMCkpLA0KICAgICAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1heF9ydCJdKSkNCiAgICAgICAgICAgICAgICBdKQ0KDQogICAgICAgIHNtLmNoYXJ0X3BfbGlzdC5hcHBlbmQoDQogICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgJyVzJyUoZVsidGVzdF9lbmQiXS5yZXBsYWNlKCJfIiwgIlQiKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShlWyJtaW5fcnQiXSkpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoZVsiYXZnX3J0Il0pKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGh0LmdldFZhbHVlQXRQZXJjZW50aWxlKDkwLjApLzEwMDAuMCkpLA0KICAgICAgICAgICAgICAgIGZsb2F0KCIlLjFmIiUoaHQuZ2V0VmFsdWVBdFBlcmNlbnRpbGUoOTUuMCkvMTAwMC4wKSksDQogICAgICAgICAgICAgICAgZmxvYXQoIiUuMWYiJShodC5nZXRWYWx1ZUF0UGVyY2VudGlsZSg5OS4wKS8xMDAwLjApKSwNCiAgICAgICAgICAgICAgICBmbG9hdCgiJS4xZiIlKGVbIm1heF9ydCJdKSkNCiAgICAgICAgICAgIF0pDQoNCiAgICAgICAgIyBqaGggLi4uDQogICAgICAgIGZvciBrZXkgaW4gZVsidXNlcl9hY3Rpb25zIl0ua2V5cygpOg0KICAgICAgICAgICAgYXIgPSBlWyJ1c2VyX2FjdGlvbnMiXVtrZXldDQogICAgICAgICAgICBodHQgPSBIaXN0b2dyYW0uZnJvbVN0cmluZyhhclsiaGlzdG9ncmFtX3J0Il0pDQogICAgICAgICAgICAjcHJpbnQoYXJbIm5hbWUiXSArICIgLSAiICsgIiUuM2YiJShodHQuZ2V0TWVhbigpLzEwMDAuMCkpDQogICAgICAgICAgICBpZiBqaGguaGFzX2tleShrZXkpOg0KICAgICAgICAgICAgICAgIGpoaFtrZXldLmFkZChodHQpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGpoaFtrZXldID0gSGlzdG9ncmFtKDEsIDM2MDAqMTAwMCoxMDAwLCAzKQ0KICAgICAgICAgICAgICAgIGpoaFtrZXldLmFkZChodHQpDQogICAgICAgICAgICAjcHJpbnQoYXJbIm5hbWUiXSArICIgLSAiICsgIiUuM2YiJShqaGhba2V5XS5nZXRNZWFuKCkvMTAwMC4wKSArICIgLSAlZCIlKGpoaFtrZXldLmdldFRvdGFsQ291bnQoKSkpDQoNCiAgICAgICAgIyBqc3MgLi4uDQogICAgICAgIGZvciBrZXkgaW4gZVsidXNlcl9hY3Rpb25zIl0ua2V5cygpOg0KICAgICAgICAgICAgYXIgPSBlWyJ1c2VyX2FjdGlvbnMiXVtrZXldDQogICAgICAgICAgICBpZiBqc3MuaGFzX2tleShrZXkpOg0KICAgICAgICAgICAgICAgIHNteCA9IGpzc1trZXldDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHNteCA9IGpzc1trZXldID0gU3VtbWFyeSgpDQogICAgICAgICAgICAgICAgc214Lm5hbWUgPSBlWyJibV9uYW1lIl0NCg0KICAgICAgICAgICAgaWYgc214Lm1pbl9ydCA+IGFyWyJtaW5fcnQiXToNCiAgICAgICAgICAgICAgICBzbXgubWluX3J0ID0gYXJbIm1pbl9ydCJdDQogICAgICAgICAgICBpZiBzbXgubWF4X3J0IDwgYXJbIm1heF9ydCJdOg0KICAgICAgICAgICAgICAgIHNteC5tYXhfcnQgPSBhclsibWF4X3J0Il0NCiAgICAgICAgICAgICAgICBzbXgubWF4X3J0X3RzID0gYXJbIm1heF9ydF90cyJdDQogICAgICAgICAgICBzbXgubnVtX2FjdGlvbnMgKz0gYXJbIm51bV9hY3Rpb25zIl0NCiAgICAgICAgICAgIHNteC5udW1fZmFpbGVkICs9IGFyWyJudW1fZmFpbGVkIl0NCg0KICAgICAgICAgICAgc214LmR1cmF0aW9uICs9IGVbImR1cmF0aW9uIl0NCiAgICAgICAgICAgIGlmIHNteC5hdmdfcXMgPCBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdOg0KICAgICAgICAgICAgICAgIHNteC5hdmdfcXMgPSBlWyJhdmdfd3RocmVhZF9xc2l6ZSJdDQogICAgICAgICAgICBpZiBzbXgubWF4X3FzIDwgZVsibWF4X3d0aHJlYWRfcXNpemUiXToNCiAgICAgICAgICAgICAgICBzbXgubWF4X3FzID0gZVsibWF4X3d0aHJlYWRfcXNpemUiXQ0KICAgICAgICAgICAgaWYgc214Lm1heF9hd3QgPCBlWyJhdmdfd3QiXToNCiAgICAgICAgICAgICAgICBzbXgubWF4X2F3dCA9IGVbImF2Z193dCJdDQogICAgICAgICAgICBpZiBzbXgubWF4X3d0IDwgZVsibWF4X3d0Il06DQogICAgICAgICAgICAgICAgc214Lm1heF93dCA9IGVbIm1heF93dCJdDQogICAgICAgICAgICBpZiBzbXgubWVtIDwgcF9tZW06DQogICAgICAgICAgICAgICAgc214Lm1lbSA9IHBfbWVtDQogICAgICAgICAgICBpZiBzbXguY3B1IDwgcF9jcHU6DQogICAgICAgICAgICAgICAgc214LmNwdSA9IHBfY3B1DQogICAgICAgICAgICBzbXguY3B1X3RpbWVfbnMgKz0gZVsicHJvY2Vzc19jcHVfdGltZV9ucyJdDQoNCiAgICBwcmludF9hY3Rpb25fc3VtbWFyeSgpDQogICAgcHJpbnRfZ2xvYmFsX3N1bW1hcnkoKQ0KICAgIHByaW50Zih0cmFpbGVyKQ0KDQogICAgcmVwb3J0X2ZoLmNsb3NlKCkNCg0KaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoNCiAgICBpZiBsZW4oc3lzLmFyZ3YpID49IDM6DQogICAgICAgIGZpbGVuYW1lID0gc3lzLmFyZ3ZbMV0NCiAgICAgICAgY29uZmlnRmlsZW5hbWUgPSBzeXMuYXJndlsyXQ0KICAgICAgICBjcmVhdGVSZXBvcnQoZmlsZW5hbWUsIGNvbmZpZ0ZpbGVuYW1lKQ0K";

  public static void main(String... args) {
    String mainScriptFilename = "report.py";
    String mainScript = "";
    String pythonArgsScript = "";
    for (String arg : args) {
      if (pythonArgsScript.length() == 0) {
        if (!arg.equals(mainScriptFilename)) {
          pythonArgsScript += "'" + mainScriptFilename + "', ";
        }
      } else {
        pythonArgsScript += ", ";
      }
      pythonArgsScript += "'" + arg + "'";
    }
    if (pythonArgsScript.length() == 0) {
      pythonArgsScript = "'" + mainScriptFilename + "'";
    }
    pythonArgsScript = "import sys; sys.argv = [" + pythonArgsScript + "]";
    {
      byte[] decodedBytes = Base64.getDecoder().decode(mainScriptTextBase64);
      String text = new String(decodedBytes);
      mainScript = text;
    }
    {
      // create Python interpreter object
      PythonInterpreter pyInterp = new PythonInterpreter();
      // initialize command-line args
      pyInterp.exec(pythonArgsScript);
      // run script
      pyInterp.exec(mainScript);
    }
  }
}
